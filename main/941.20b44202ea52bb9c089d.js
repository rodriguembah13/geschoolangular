"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[941],{965:(Q,q,l)=>{l.d(q,{U:()=>C});var g=l(1841),f=l(2340),d=l(5917),u=l(3342),e=l(5304),b=l(8002),v=l(3018);let C=(()=>{class _{constructor(r){this.http=r,this.apiUrl=f.N.API_URL+"cycles",this.apiUrlClasse=f.N.API_URL+"classes",this.apiUrlNiveau=f.N.API_URL+"niveaux",this.httpOptions={headers:new g.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getCycles(){return this.http.get(this.apiUrl,this.httpOptions).pipe((0,u.b)(r=>console.log("fetched cycles")),(0,e.K)(this.handleError("getcycles",[])))}getCycle(r){return this.http.get(`${this.apiUrl}/${r}`).pipe((0,u.b)(Z=>console.log(`fetched cycle id=${r}`)),(0,e.K)(this.handleError(`getCycle id=${r}`)))}getNiveaus(){return this.http.get(this.apiUrlNiveau,this.httpOptions).pipe((0,u.b)(r=>console.log("fetched niveau")),(0,e.K)(this.handleError("getniveaux",[])))}getNiveauxbycycle(r){return this.http.get(`${this.apiUrlNiveau}/${r}/cycle`)}getNiveau(r){return this.http.get(`${this.apiUrlNiveau}/${r}`)}getClasses(){return this.http.get(this.apiUrlClasse,this.httpOptions).pipe((0,u.b)(r=>console.log("fetched classes")),(0,e.K)(this.handleError("getClasses",[])))}getClassesbis(){return this.http.get(this.apiUrlClasse,this.httpOptions).pipe((0,b.U)(r=>r.data),(0,u.b)(r=>console.log("fetched matieres")),(0,e.K)(this.handleError("getmatieres",[])))}getClasse(r){return this.http.get(`${this.apiUrlClasse}/${r}`).pipe((0,u.b)(Z=>console.log(`fetched classe id=${r}`)),(0,e.K)(this.handleError(`getClasse id=${r}`)))}getClassebyniveau(r){return this.http.get(`${this.apiUrlClasse}/${r}/niveau`)}addCycle(r){return this.http.post(this.apiUrl,r,this.httpOptions).pipe((0,u.b)(m=>console.log(`added sequence w/ id=${r.id}`)),(0,e.K)(this.handleError("addSequence")))}editCycle(r,m){return this.http.put(`${this.apiUrl}/${m}`,r)}editNiveau(r,m){return this.http.put(`${this.apiUrlNiveau}/${m}`,r)}editClasse(r,m){return this.http.put(`${this.apiUrlClasse}/${m}`,r)}addNiveau(r){return this.http.post(this.apiUrlNiveau,r,this.httpOptions).pipe((0,u.b)(m=>console.log(`added niveau w/ id=${r.id}`)),(0,e.K)(this.handleError("addNiveau")))}addClasse(r){return this.http.post(this.apiUrlClasse,r,this.httpOptions).pipe((0,u.b)(m=>console.log(`added classe w/ id=${r.id}`)),(0,e.K)(this.handleError("addClasse")))}deleteCycle(r){return this.http.delete(`${this.apiUrl}/${r}`)}deleteClasse(r){return this.http.delete(`${this.apiUrlClasse}/${r}`)}deleteNiveau(r){return this.http.delete(`${this.apiUrlNiveau}/${r}`)}handleError(r="operation",m){return Z=>(console.error(Z),(0,d.of)(m))}}return _.\u0275fac=function(r){return new(r||_)(v.LFG(g.eN))},_.\u0275prov=v.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},3941:(Q,q,l)=>{l.r(q),l.d(q,{CommunicationModule:()=>yt});var g=l(8583),f=l(8932),d=l(3679),u=l(9344),e=l(3018),b=l(2340),v=l(1841);let C=(()=>{class n{constructor(t){this.http=t,this.apiUrl=b.N.API_URL+"sms"}addModel(t){return this.http.post(`${this.apiUrl}/models`,t)}addSms(t){return this.http.post(`${this.apiUrl}`,t)}addSmsMultiple(t){return this.http.post(`${this.apiUrl}/multiple`,t)}gethistorique(){return this.http.get(`${this.apiUrl}`)}getmodels(){return this.http.get(`${this.apiUrl}/models`)}getmodelsone(t){return this.http.get(`${this.apiUrl}/models/${t}`)}getonesms(t){return this.http.get(`${this.apiUrl}/${t}`)}getsmsclasse(t){return this.http.get(`${this.apiUrl}/${t}/classe`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=l(9790),c=l(7552);let r=(()=>{class n{constructor(t,s,o,i,h){this.formBuilder=t,this.smsService=s,this.toaster=o,this.translateService=i,this.cdr=h}ngOnInit(){this.formGroup=this.formBuilder.group({phone:["",[d.kI.required]],message:["",[d.kI.maxLength(160),d.kI.minLength(1)]]})}onSubmit(){this.smsService.addSms({data:{phone:this.formGroup.value.phone,message:this.formGroup.value.message}}).subscribe(s=>{this.formGroup.reset(),this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},s=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.qu),e.Y36(C),e.Y36(u._W),e.Y36(_.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendone"]],features:[e._Bn([u._W])],decls:26,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-center"],[1,"mb-2","fw-bolder"],[1,"row","justify-content-center"],[1,"col-md-8"],[3,"formGroup","validSubmit"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","formControlName","phone","id","exampleFormControlInput1","placeholder","+237",1,"form-control"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return s.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"label",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",13),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",14),e.TgZ(23,"button",15),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",s.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,5,"fields.phone")),e.xp6(5),e.Oqu(e.lcZ(18,7,"fields.message")),e.xp6(4),e.hij("",160-s.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,9,"actions.send")))},directives:[d._Y,d.JL,d.sg,c.MU,d.Fj,c.oH,d.JJ,d.u],pipes:[_.X$],styles:[""]}),n})();var m=l(965),Z=l(6640);function L(n,a){if(1&n&&(e.TgZ(0,"ng-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.libelle)}}function P(n,a){if(1&n&&(e.TgZ(0,"ng-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function $(n,a){if(1&n&&(e.TgZ(0,"li",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.name," - ",t.phonesms,"")}}let I=(()=>{class n{constructor(t,s,o,i,h,x){this.formBuilder=t,this.classeService=s,this.smsService=o,this.toaster=i,this.translateService=h,this.cdr=x,this.models=[],this.classes=[],this.rows=[]}ngOnInit(){this.formGroup=this.formBuilder.group({model:["",[d.kI.required]],message:["",[d.kI.maxLength(160),d.kI.minLength(1)]]}),this.initf()}initf(){this.smsService.getmodels().subscribe(t=>{this.models=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}),this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}onSubmit(){this.smsService.addSmsMultiple({data:{model:this.formGroup.value.model.id,message:this.formGroup.value.message,classe:this.mclasse}}).subscribe(s=>{this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},s=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}changeModel(){this.formGroup.patchValue({message:this.formGroup.value.model.message}),this.cdr.markForCheck()}changeClasse(){this.smsService.getsmsclasse(this.mclasse).subscribe(t=>{this.rows=t.data,this.cdr.markForCheck()},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.qu),e.Y36(m.U),e.Y36(C),e.Y36(u._W),e.Y36(_.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendmasse"]],features:[e._Bn([u._W])],decls:36,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-7"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","model",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"col-5"],[3,"ngModel","ngModelChange","change"],[1,"list-group","list-group-flush"],["class","list-group-item",3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item",3,"value"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms en masse"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return s.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"ng-select",11),e.NdJ("change",function(){return s.changeModel()}),e.YNc(15,L,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"label",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"textarea",15),e.TgZ(21,"p"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"button",17),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"div",9),e.TgZ(29,"label",10),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"ng-select",19),e.NdJ("ngModelChange",function(i){return s.mclasse=i})("change",function(){return s.changeClasse()}),e.YNc(33,P,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(34,"ul",20),e.YNc(35,$,2,3,"li",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",s.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,10,"fields.model")),e.xp6(3),e.Q6J("ngForOf",s.models),e.xp6(3),e.Oqu(e.lcZ(19,12,"fields.message")),e.xp6(4),e.hij("",160-s.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(26,14,"action.send")),e.xp6(5),e.Oqu(e.lcZ(31,16,"fields.classe")),e.xp6(2),e.Q6J("ngModel",s.mclasse),e.xp6(1),e.Q6J("ngForOf",s.classes),e.xp6(2),e.Q6J("ngForOf",s.rows))},directives:[d._Y,d.JL,d.sg,c.MU,c.HK,Z.w9,d.JJ,d.u,g.sg,d.Fj,c.oH,d.On,Z.xv],pipes:[_.X$],styles:[""]}),n})();var p=l(8550);function G(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.libelle," ")}function j(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.message," ")}let K=(()=>{class n{constructor(t,s,o,i,h){this.formBuilder=t,this.smsService=s,this.toaster=o,this.translateService=i,this.cdr=h,this.columnMode=p.hq.force,this.rows=[],this.models=[],this.classes=[]}ngOnInit(){this.formGroup=this.formBuilder.group({libelle:["",[d.kI.required]],message:["",[d.kI.maxLength(160),d.kI.minLength(1)]]}),this.initf()}initf(){this.smsService.getmodels().subscribe(t=>{this.rows=t.data,this.cdr.markForCheck()},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}onSubmit(){this.smsService.addModel({data:{libelle:this.formGroup.value.libelle,message:this.formGroup.value.message}}).subscribe(s=>{this.cdr.markForCheck(),this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.initf()},s=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}addmodel(t){this.formGroup.patchValue({message:this.formGroup.value.message+t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.qu),e.Y36(C),e.Y36(u._W),e.Y36(_.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-modelsms"]],viewQuery:function(t,s){if(1&t&&e.Gf(p.nE,5),2&t){let o;e.iGM(o=e.CRH())&&(s.table=o.first)}},features:[e._Bn([u._W])],decls:76,vars:27,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-8"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","libelle","id","exampleFormControlInput1","placeholder","",1,"form-control"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-warning"],[1,"col-4"],[1,"badge","bg-dark",3,"click"],[1,"badge","bg-primary",3,"click"],[1,"badge","bg-success",3,"click"],[1,"badge","bg-danger",3,"click"],[1,"badge","bg-warning",3,"click"],[1,"row","mt-4"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Model sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return s.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",14),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"button",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"button",17),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"h4"),e._uU(31,"Mots cl\xe9s"),e.qZA(),e.TgZ(32,"div"),e.TgZ(33,"span",19),e.NdJ("click",function(){return s.addmodel("#name")}),e._uU(34,"Name"),e.qZA(),e.TgZ(35,"span",20),e.NdJ("click",function(){return s.addmodel("#classe")}),e._uU(36,"Classe"),e.qZA(),e.TgZ(37,"span",21),e.NdJ("click",function(){return s.addmodel("#rang")}),e._uU(38,"Rang"),e.qZA(),e.TgZ(39,"span",20),e.NdJ("click",function(){return s.addmodel("#moyenne")}),e._uU(40,"Moyenne"),e.qZA(),e.TgZ(41,"span",19),e.NdJ("click",function(){return s.addmodel("#moyclasse")}),e._uU(42,"Moyenne Classe"),e.qZA(),e.TgZ(43,"span",22),e.NdJ("click",function(){return s.addmodel("#moyfirst")}),e._uU(44,"Moyenne du Premier"),e.qZA(),e.TgZ(45,"span",21),e.NdJ("click",function(){return s.addmodel("#moylast")}),e._uU(46,"Moyenne du Denier"),e.qZA(),e.TgZ(47,"span",23),e.NdJ("click",function(){return s.addmodel("#matricule")}),e._uU(48,"Matricule"),e.qZA(),e.TgZ(49,"span",23),e.NdJ("click",function(){return s.addmodel("#evaluation")}),e._uU(50,"Evaluation"),e.qZA(),e.TgZ(51,"span",21),e.NdJ("click",function(){return s.addmodel("#trimestre")}),e._uU(52,"Trimestre"),e.qZA(),e.TgZ(53,"span",20),e.NdJ("click",function(){return s.addmodel("#yearschool")}),e._uU(54,"Annee scolaire"),e.qZA(),e.TgZ(55,"span",23),e.NdJ("click",function(){return s.addmodel("#amountremaing")}),e._uU(56,"Montant Restant"),e.qZA(),e.TgZ(57,"span",22),e.NdJ("click",function(){return s.addmodel("#amount")}),e._uU(58,"Montant pay\xe9"),e.qZA(),e.TgZ(59,"span",20),e.NdJ("click",function(){return s.addmodel("#datepaid")}),e._uU(60,"Date paiement"),e.qZA(),e.TgZ(61,"span",21),e.NdJ("click",function(){return s.addmodel("#amountscolarity")}),e._uU(62,"Montant Scolarite"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",24),e.TgZ(64,"div",4),e.TgZ(65,"h4",5),e._uU(66,"Listes des Modeles sms"),e.qZA(),e.qZA(),e.TgZ(67,"div",25),e.TgZ(68,"ngx-datatable",26,27),e.TgZ(70,"ngx-datatable-column",28),e.ALo(71,"translate"),e.YNc(72,G,1,1,"ng-template",29),e.qZA(),e.TgZ(73,"ngx-datatable-column",28),e.ALo(74,"translate"),e.YNc(75,j,1,1,"ng-template",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",s.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,15,"fields.libelle")),e.xp6(5),e.Oqu(e.lcZ(18,17,"fields.message")),e.xp6(4),e.hij("",160-s.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,19,"action.save")),e.xp6(3),e.Oqu(e.lcZ(28,21,"action.cancel")),e.xp6(41),e.Q6J("rows",s.rows)("columnMode",s.columnMode)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(2),e.s9C("name",e.lcZ(71,23,"fields.libelle")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(74,25,"fields.message")),e.Q6J("width",100))},directives:[d._Y,d.JL,d.sg,c.MU,c.HK,d.Fj,c.oH,d.JJ,d.u,p.nE,p.UC,p.vq],pipes:[_.X$],styles:["span[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function B(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.recepteur," ")}function V(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.categorie.libelle," ")}function z(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.categorie.montant," ")}function W(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.operateur," ")}function D(n,a){1&n&&(e._uU(0),e.ALo(1,"date")),2&n&&e.hij(" ",e.xi3(1,1,a.row.created_at,"dd/MM/yyyy H:m")," ")}function X(n,a){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"span",14),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.qZA()),2&n){const t=a.row;e.Q6J("ngClass","active"===t.is_enabled?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass","active"===t.is_enabled?"bg-success":"bg-danger"),e.xp6(2),e.Oqu(t.is_enabled)}}let ee=(()=>{class n{constructor(t,s,o,i,h){this.formBuilder=t,this.smsService=s,this.toaster=o,this.translateService=i,this.cdr=h,this.columnMode=p.hq.force,this.rows=[]}ngOnInit(){this.initf()}initf(){this.smsService.gethistorique().subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.qu),e.Y36(C),e.Y36(u._W),e.Y36(_.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-historique"]],viewQuery:function(t,s){if(1&t&&e.Gf(p.nE,5),2&t){let o;e.iGM(o=e.CRH())&&(s.table=o.first)}},features:[e._Bn([u._W])],decls:30,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],[1,"text-capitalize"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Historique sms"),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"input",7),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"ngx-datatable",9,10),e.TgZ(12,"ngx-datatable-column",11),e.ALo(13,"translate"),e.YNc(14,B,1,1,"ng-template",12),e.qZA(),e.TgZ(15,"ngx-datatable-column",11),e.ALo(16,"translate"),e.YNc(17,V,1,1,"ng-template",12),e.qZA(),e.TgZ(18,"ngx-datatable-column",11),e.ALo(19,"translate"),e.YNc(20,z,1,1,"ng-template",12),e.qZA(),e.TgZ(21,"ngx-datatable-column",11),e.ALo(22,"translate"),e.YNc(23,W,1,1,"ng-template",12),e.qZA(),e.TgZ(24,"ngx-datatable-column",11),e.ALo(25,"translate"),e.YNc(26,D,2,4,"ng-template",12),e.qZA(),e.TgZ(27,"ngx-datatable-column",11),e.ALo(28,"translate"),e.YNc(29,X,4,3,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("rows",s.rows)("columnMode",s.columnMode)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(2),e.s9C("name",e.lcZ(13,17,"fields.etablissement")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(16,19,"fields.campaign")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(19,21,"fields.phone")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(22,23,"fields.message")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(25,25,"fields.datecreation")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(28,27,"fields.status")),e.Q6J("width",70))},directives:[c.oH,p.nE,p.UC,p.vq,g.mk],pipes:[_.X$,g.uU],styles:[""]}),n})(),te=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mail"]],decls:7,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer un mail"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),n})();var T=l(2471);function y(n,a){return n.filter(s=>(s=>{for(let o in s)if(null!=s[o]&&-1!==s[o].toString().toUpperCase().indexOf(a.toString().toUpperCase()))return!0})(s))}let N=(()=>{class n{constructor(t){this.http=t,this.apiUrl=b.N.API_URL+"chats"}getChatList(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatDetail(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatOne(t,s){return this.http.get(`${this.apiUrl}/${t}/${s}/getchat`)}updateConversation(t,s,o){return this.http.post(`${this.apiUrl}/conversation`,{data:{id:s,avatar:t.avatar,from:o,msgtype:t.msg_type,text:t.text,time:t.time,user:o}})}addChat(t){return this.http.post(`${this.apiUrl}/post`,t)}addChatMessage(t){return this.http.post(`${this.apiUrl}/msg`,t)}getstudentbyteacher(t){return this.http.get(`${this.apiUrl}/${t}/getstudents`)}getteacherbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getteachers`)}getstudentsbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getstudentsbystudent`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=l(3301),k=l(2),O=l(1452),F=l(2655),w=l(1383),E=l(7871);const ne=["chatPS"];function se(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.chat.name)}}function oe(n,a){if(1&n&&e._UZ(0,"avatar",28),2&n){const t=e.oxw(2).$implicit;e.Q6J("icon","feather icon-user")("src",t.avatar)}}function ae(n,a){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,oe,1,2,"avatar",27),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.avatar.length>1)}}function ie(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.text)}}function re(n,a){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.text,e.LSH)("alt",t.text)}}function le(n,a){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"span",32),e.TgZ(3,"u"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.text)}}function ce(n,a){if(1&n&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.time," ")}}const de=function(n,a,t){return{"msg-recipient":n,"msg-sent":a,"justify-content-center":t}},pe=function(n){return{"no-avatar":n}},he=function(n){return{"p-3":n}};function me(n,a){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,ae,2,1,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"div",22),e.YNc(4,ie,2,1,"span",5),e.YNc(5,re,1,2,"img",23),e.YNc(6,le,5,1,"div",24),e.qZA(),e.qZA(),e.YNc(7,ce,2,1,"div",25),e.qZA()),2&n){const t=a.$implicit,s=e.oxw(2);e.Q6J("ngClass",e.kEZ(8,de,t.fromuser!==s.currentuser.id,t.fromuser==s.currentuser.id,"date"==t.msg_type)),e.xp6(1),e.Q6J("ngIf",t.avatar),e.xp6(1),e.Q6J("ngClass",e.VKq(12,pe,0==t.avatar.length)),e.xp6(1),e.Q6J("ngClass",e.VKq(14,he,"image"==t.msg_type)),e.xp6(1),e.Q6J("ngIf","text"==t.msg_type),e.xp6(1),e.Q6J("ngIf","image"==t.msg_type),e.xp6(1),e.Q6J("ngIf","file"==t.msg_type),e.xp6(1),e.Q6J("ngIf",t.time.length>1)}}function ue(n,a){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,me,8,16,"div",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chat.msg)}}let R=(()=>{class n{constructor(t,s){this.chatSvc=t,this.cdr=s,this.updateChat=new e.vpe,this.openMobilePanel=new e.vpe,this.currentuser=JSON.parse(localStorage.getItem("auth"))}set chatId(t){this._id=t,this.fetchChatDetail(t)}get chatId(){return this._id}ngOnInit(){}ngAfterViewChecked(){this.scrollToBottom()}fetchChatDetail(t){this.chatSvc.getChatOne(t,this.currentuser.id).subscribe(s=>{this.chat=s.data,this.chatPS.directiveRef.scrollToBottom(),this.cdr.detectChanges()})}sendMessage(){const t={avatar:"",text:this.message,fromuser:this.currentuser.id,time:"",msg_type:"text"};this.message&&(this.chat.msg.push(t),this.chatSvc.updateConversation(t,this.chat.id,this.currentuser.id).subscribe(),this.updateChat.emit(this.currentuser.id),this.cdr.detectChanges()),this.message=""}scrollToBottom(){this.chatPS.directiveRef.scrollToBottom()}onMobilePanelOpen(){this.openMobilePanel.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["conversation"]],viewQuery:function(t,s){if(1&t&&e.Gf(ne,5),2&t){let o;e.iGM(o=e.CRH())&&(s.chatPS=o.first)}},hostVars:2,hostBindings:function(t,s){2&t&&e.ekj("conversation",!0)},inputs:{chatId:"chatId"},outputs:{updateChat:"updateChat",openMobilePanel:"openMobilePanel"},decls:20,vars:3,consts:[[1,"conversation-header"],[1,"d-flex","align-items-center"],[1,"d-block","d-lg-none","cursor-pointer","me-2","font-size-lg",3,"click"],[1,"feather","icon-menu"],[1,"mb-0"],[4,"ngIf"],[1,"conversation-body"],["chatPS",""],["class","p-4",4,"ngIf"],[1,"conversation-footer"],["type","text","placeholder","Enter your message here",1,"form-control","ms-2",3,"ngModel","ngModelChange","keydown.enter"],[1,"conversation-footer-icon","d-flex"],["href","javascript:void(0)",1,"mx-2"],[1,"las","la-paperclip"],[1,"las","la-smile"],[1,"btn","btn-primary","ms-2",3,"click"],[1,"feather","icon-send"],[1,"p-4"],["class","msg",3,"ngClass",4,"ngFor","ngForOf"],[1,"msg",3,"ngClass"],["class","ms-2",4,"ngIf"],[1,"bubble",3,"ngClass"],[1,"bubble-wrapper",3,"ngClass"],[3,"src","alt",4,"ngIf"],["class","d-flex align-items-center msg-file",4,"ngIf"],["class","fw-bold font-size-sm",4,"ngIf"],[1,"ms-2"],[3,"icon","src",4,"ngIf"],[3,"icon","src"],[3,"src","alt"],[1,"d-flex","align-items-center","msg-file"],[1,"feather","icon-file"],[1,"ms-2","fw-bold","text-link","cursor-pointer"],[1,"fw-bold","font-size-sm"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.NdJ("click",function(){return s.onMobilePanelOpen()}),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"h5",4),e.YNc(5,se,2,1,"span",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"perfect-scrollbar",6,7),e.YNc(8,ue,2,1,"div",8),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(i){return s.message=i})("keydown.enter",function(i){return s.sendMessage(),i.preventDefault()}),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"a",12),e._UZ(13,"i",13),e.qZA(),e.TgZ(14,"a",12),e._UZ(15,"i",14),e.qZA(),e.qZA(),e.TgZ(16,"button",15),e.NdJ("click",function(){return s.sendMessage()}),e.TgZ(17,"span"),e._uU(18,"Send"),e.qZA(),e._UZ(19,"i",16),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",s.chat),e.xp6(3),e.Q6J("ngIf",s.chat),e.xp6(2),e.Q6J("ngModel",s.message))},directives:[g.O5,w.Vv,d.Fj,c.oH,d.JJ,d.On,g.sg,g.mk,E.A],encapsulation:2}),n})();var S=l(5690);const _e=["openchateModal"];function ge(n,a){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function fe(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ge,2,1,"p",40),e.BQk()),2&n){const t=a.last;e.xp6(1),e.Q6J("ngIf",t)}}const Ce=function(n){return{active:n}};function Ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,fe,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit,s=e.oxw();e.Q6J("ngClass",e.VKq(6,Ce,t.id===s.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function Te(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function be(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ve(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Ae(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function Se(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.classe," ")}function xe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function we(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Me(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function Ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ne(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Ee(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}const ye=function(){return{backdrop:"static"}};let ke=(()=>{class n{constructor(t,s,o,i,h,x,M,U,J){this.toaster=t,this.translateservice=s,this.chatSvc=o,this.modalService=i,this.cdr=h,this.route=x,this.router=M,this.professorService=U,this.personnelService=J,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth")),this.currentuser.roles[0]===T.W.STUDENT&&this.router.navigate(["/communication/chat-student"]),this.currentuser.roles[0]===T.W.TEACHER&&this.router.navigate(["/communication/chat-professor"])}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(s=>{this.chatList=s.data,this.temp=s.data,this.chatList.length&&this.chatList.forEach(o=>{3===o.id&&(this.selectedId=o.id)}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const s=t.target.value;this.chatList=s?y(this.temp,s):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.selectedId=o.data.id,this.openchateModal.hide(),this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(s=>{this.personnels=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(s=>{this.professors=s.data,this.cdr.markForCheck()},s=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(s)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(s=>{this.students=s.data,this.cdr.markForCheck()},s=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(s)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u._W),e.Y36(_.sK),e.Y36(N),e.Y36(A.tT),e.Y36(e.sBO),e.Y36(f.gz),e.Y36(f.F0),e.Y36(k.c),e.Y36(O.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,s){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(_e,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.table=o.first),e.iGM(o=e.CRH())&&(s.tableteacher=o.first),e.iGM(o=e.CRH())&&(s.openchateModal=o.first)}},features:[e._Bn([u._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return s.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,Ze,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return s.updateChat(i)})("openMobilePanel",function(){return s.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return s.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,Te,2,1,"ng-template",25),e.YNc(28,be,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,ve,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Ae,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Se,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return s.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectPersonnel(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,xe,2,1,"ng-template",25),e.YNc(43,qe,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,we,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,Me,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(i){return s.onSelectTabP(i)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(i){return s.onSelectPersonnel(i)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,Ue,2,1,"ng-template",25),e.YNc(55,Je,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,Ne,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,Ee,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return s.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",s.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",s.chatList),e.xp6(1),e.Q6J("chatId",s.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,ye)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",s.students)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.professors)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.personnels)("selected",s.selectedpersonnel)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[F.n,c.oH,w.Vv,g.sg,R,A.oB,S.AH,S.wW,p.nE,p.UC,p.tk,p.vq,g.mk,E.A,g.O5],pipes:[_.X$],styles:[""]}),n})();var Y=l(2331);const Oe=["openchateModal"];function Fe(n,a){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function Re(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Fe,2,1,"p",40),e.BQk()),2&n){const t=a.last;e.xp6(1),e.Q6J("ngIf",t)}}const He=function(n){return{active:n}};function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,Re,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit,s=e.oxw();e.Q6J("ngClass",e.VKq(6,He,t.id===s.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function Ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Le(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Pe(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function $e(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function Ie(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.classe," ")}function Ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ke(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Be(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function Ve(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matiere," ")}function ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function We(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function De(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Xe(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}const et=function(){return{backdrop:"static"}},nt=["openchateModal"];function st(n,a){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function ot(n,a){if(1&n&&(e.ynx(0),e.YNc(1,st,2,1,"p",40),e.BQk()),2&n){const t=a.last;e.xp6(1),e.Q6J("ngIf",t)}}const at=function(n){return{active:n}};function it(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,ot,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=a.$implicit,s=e.oxw();e.Q6J("ngClass",e.VKq(6,at,t.id===s.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function rt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function lt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ct(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function dt(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function pt(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.classe," ")}function ht(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ut(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function _t(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}function gt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function ft(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ct(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.name," ")}function Zt(n,a){1&n&&e._uU(0),2&n&&e.hij(" ",a.row.matricule," ")}const Tt=function(){return{backdrop:"static"}},vt=[{path:"mail",data:{title:"Envoyer un mail",hidePageHeader:!1},component:te},{path:"chat",data:{title:"Chat",hidePageHeader:!1,authorities:[T.W.ADMIN,T.W.TEACHER,T.W.STUDENT,T.W.ECONOME]},component:ke},{path:"chat-student",data:{title:"Chat",hidePageHeader:!1,authorities:[T.W.STUDENT]},component:(()=>{class n{constructor(t,s,o,i,h,x,M,U,J,H){this.toaster=t,this.translateservice=s,this.chatSvc=o,this.modalService=i,this.cdr=h,this.route=x,this.router=M,this.professorService=U,this.personnelService=J,this.studentService=H,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(s=>{this.chatList=s.data,this.temp=s.data,this.chatList.length&&this.chatList.forEach(o=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const s=t.target.value;this.chatList=s?y(this.temp,s):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(s=>{this.personnels=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTabT(t){this.chatSvc.getteacherbystudent(this.currentuser.id).subscribe(s=>{this.professors=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTabS(t){this.chatSvc.getstudentsbystudent(this.currentuser.id).subscribe(s=>{this.students=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u._W),e.Y36(_.sK),e.Y36(N),e.Y36(A.tT),e.Y36(e.sBO),e.Y36(f.gz),e.Y36(f.F0),e.Y36(k.c),e.Y36(O.G),e.Y36(Y.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatstudent"]],viewQuery:function(t,s){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(Oe,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.table=o.first),e.iGM(o=e.CRH())&&(s.tableteacher=o.first),e.iGM(o=e.CRH())&&(s.openchateModal=o.first)}},features:[e._Bn([u._W])],decls:68,vars:81,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return s.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,Qe,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return s.updateChat(i)})("openMobilePanel",function(){return s.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return s.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,Ye,2,1,"ng-template",25),e.YNc(28,Le,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,Pe,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,$e,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Ie,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return s.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectStudent(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,Ge,2,1,"ng-template",25),e.YNc(43,je,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,Ke,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,Be,1,1,"ng-template",26),e.qZA(),e.TgZ(50,"ngx-datatable-column",27),e.ALo(51,"translate"),e.YNc(52,Ve,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"tab",29),e.NdJ("selectTab",function(i){return s.onSelectTabP(i)}),e.TgZ(54,"ngx-datatable",22,30),e.NdJ("select",function(i){return s.onSelectPersonnel(i)}),e.TgZ(56,"ngx-datatable-column",24),e.YNc(57,ze,2,1,"ng-template",25),e.YNc(58,We,2,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,De,1,1,"ng-template",26),e.qZA(),e.TgZ(62,"ngx-datatable-column",27),e.ALo(63,"translate"),e.YNc(64,Xe,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",31),e.TgZ(66,"button",32),e.NdJ("click",function(){return s.cancel()}),e._uU(67,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",s.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",s.chatList),e.xp6(1),e.Q6J("chatId",s.selectedId),e.xp6(1),e.Q6J("config",e.DdM(80,et)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",s.students)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,64,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,66,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,68,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.professors)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,70,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,72,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(51,74,"fields.matiere")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.personnels)("selected",s.selectedpersonnel)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(60,76,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(63,78,"fields.matricule")),e.Q6J("width",240))},directives:[F.n,c.oH,w.Vv,g.sg,R,A.oB,S.AH,S.wW,p.nE,p.UC,p.tk,p.vq,g.mk,E.A,g.O5],pipes:[_.X$],styles:[""]}),n})()},{path:"chat-professor",data:{title:"Chat",hidePageHeader:!1,authorities:[T.W.TEACHER]},component:(()=>{class n{constructor(t,s,o,i,h,x,M,U,J,H){this.toaster=t,this.translateservice=s,this.chatSvc=o,this.modalService=i,this.cdr=h,this.route=x,this.router=M,this.professorService=U,this.personnelService=J,this.studentService=H,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(s=>{this.chatList=s.data,this.temp=s.data,this.chatList.length&&this.chatList.forEach(o=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const s=t.target.value;this.chatList=s?y(this.temp,s):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(s=>{this.personnels=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(s=>{this.professors=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(s=>{this.students=s.data,this.cdr.markForCheck()},s=>{console.log(s)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u._W),e.Y36(_.sK),e.Y36(N),e.Y36(A.tT),e.Y36(e.sBO),e.Y36(f.gz),e.Y36(f.F0),e.Y36(k.c),e.Y36(O.G),e.Y36(Y.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatprofessor"]],viewQuery:function(t,s){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(nt,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.table=o.first),e.iGM(o=e.CRH())&&(s.tableteacher=o.first),e.iGM(o=e.CRH())&&(s.openchateModal=o.first)}},features:[e._Bn([u._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return s.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,it,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return s.updateChat(i)})("openMobilePanel",function(){return s.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return s.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,rt,2,1,"ng-template",25),e.YNc(28,lt,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,ct,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,dt,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,pt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return s.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return s.onSelectPersonnel(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,ht,2,1,"ng-template",25),e.YNc(43,mt,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,ut,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,_t,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(i){return s.onSelectTabP(i)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(i){return s.onSelectPersonnel(i)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,gt,2,1,"ng-template",25),e.YNc(55,ft,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,Ct,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,Zt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return s.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",s.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",s.chatList),e.xp6(1),e.Q6J("chatId",s.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,Tt)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",s.students)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.professors)("selected",s.selectedteacher)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",s.personnels)("selected",s.selectedpersonnel)("selectionType",s.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",s.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[F.n,c.oH,w.Vv,g.sg,R,A.oB,S.AH,S.wW,p.nE,p.UC,p.tk,p.vq,g.mk,E.A,g.O5],pipes:[_.X$],styles:[""]}),n})()},{path:"historique",data:{title:"Historique",hidePageHeader:!1},component:ee},{path:"modelsms",data:{title:"Model sms",hidePageHeader:!1},component:K},{path:"sendmasse",data:{title:"Envoyer les sms en masse",hidePageHeader:!1},component:I},{path:"sendone",data:{title:"Envoyer un sms",hidePageHeader:!1},component:r}];let At=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(vt)],f.Bz]}),n})();var St=l(4079),xt=l(902),qt=l(8900),wt=l(2563),Mt=l(743),Ut=l(8090),Jt=l(7587),Nt=l(4466),Et=l(7535);let yt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,At,Nt.m,St.h,A.zk,Z.A0,xt.n,p.xD,qt.F,Et.A,w.Xd,wt.k,c.VN,c.VN.forRoot(),Mt.mr,S.P4.forRoot(),u.Rh.forRoot(),Ut.d,Jt.HC,w.Xd]]}),n})()},2331:(Q,q,l)=>{l.d(q,{V:()=>v});var g=l(1841),f=l(2340),d=l(5917),u=l(3342),e=l(5304),b=l(3018);let v=(()=>{class C{constructor(c){this.http=c,this.apiUrl=f.N.API_URL+"students",this.apiUrlfile=f.N.API_URL+"upload",this.apiUrlchangepassword=f.N.API_URL+"changepassword",this.httpOptions={headers:new g.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getStudents(){return this.http.get(this.apiUrl).pipe((0,u.b)(c=>console.log("fetched getStudents")),(0,e.K)(this.handleError("getStudents",[])))}getStudent(c){return this.http.get(`${this.apiUrl}/${c}`).pipe((0,u.b)(m=>console.log(`fetched product id=${c}`)),(0,e.K)(this.handleError(`getProduct id=${c}`)))}addStudent(c){return this.http.post(this.apiUrl,c,this.httpOptions)}upload(c){return this.http.post(this.apiUrlfile,c,this.httpOptions)}changepassword(c){return this.http.post(this.apiUrlchangepassword,c,this.httpOptions)}editStudent(c,r){return this.http.put(`${this.apiUrl}/${r}`,c,this.httpOptions)}deleteStudent(c){return this.http.delete(`${this.apiUrl}/${c}`,this.httpOptions)}studentcompte(c){return this.http.get(`${this.apiUrl}/${c}/compte`,this.httpOptions)}importStudent(c){return this.http.post(this.apiUrl+"/import",c,this.httpOptions).pipe((0,u.b)(r=>console.log(`import student w/ id=${c.id}`)),(0,e.K)(this.handleError("import student")))}importRegisterStudent(c){return this.http.post(this.apiUrl+"/importregister",c,this.httpOptions).pipe((0,u.b)(r=>console.log(`import student w/ id=${c.id}`)),(0,e.K)(this.handleError("import student")))}handleError(c="operation",r){return m=>(console.error(m),(0,d.of)(r))}}return C.\u0275fac=function(c){return new(c||C)(b.LFG(g.eN))},C.\u0275prov=b.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()}}]);