"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[117],{6117:(ht,k,r)=>{r.r(k),r.d(k,{RessourcehumaineModule:()=>gt});var u=r(8583),Z=r(8932),s=r(3679),d=r(8550),y=r(1289),M=r(8002),_=r(1541),g=r(9344),e=r(3018),A=r(3301),f=r(9790),j=r(850),J=r(6209),N=r(2),U=r(5836),p=r(7552),I=r(7871),E=r(8971),P=r(5994),T=r(6640),F=r(1875),O=r(519),R=r(2201);const V=["childModal"],G=["childEditModal"];function B(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",68),e.TgZ(1,"input",69),e.NdJ("change",function(){const i=e.CHM(t);return i.selectFn(!i.allRowsSelected)}),e.qZA(),e.qZA()}if(2&o){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function D(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",68),e.TgZ(1,"input",69),e.NdJ("change",function(i){return e.CHM(t).onCheckboxChangeFn(i)}),e.qZA(),e.qZA()}if(2&o){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function $(o,a){if(1&o&&(e.TgZ(0,"div",70),e._UZ(1,"avatar",71),e.TgZ(2,"div",72),e.TgZ(3,"div",73),e._uU(4),e.qZA(),e.TgZ(5,"div",74),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.row;e.xp6(1),e.Q6J("size",38)("src",t.imagefilename),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.adresseMail)}}function W(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.matricule," ")}function K(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.sexe," ")}function X(o,a){if(1&o&&(e.TgZ(0,"div",75),e._UZ(1,"span",76),e.TgZ(2,"span",77),e._uU(3),e.qZA(),e.qZA()),2&o){const t=a.row;e.Q6J("ngClass","active"===t.status?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass","active"===t.status?"bg-success":"bg-danger"),e.xp6(2),e.Oqu(t.status)}}function ee(o,a){1&o&&(e._uU(0),e.ALo(1,"date")),2&o&&e.hij(" ",e.xi3(1,1,a.row.dateborn,"dd/MM/yyyy")," ")}function te(o,a){if(1&o&&(e.TgZ(0,"span",87),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function ne(o,a){if(1&o&&(e.TgZ(0,"span",87),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function oe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",78),e.NdJ("click",function(i){return e.CHM(t),e.MAs(4).toggle(i)}),e.TgZ(1,"a",79),e._UZ(2,"i",80),e.qZA(),e.TgZ(3,"dropdown-menu",81,82),e.TgZ(5,"a",83),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().showDetail(l.id)}),e.TgZ(6,"div",70),e._UZ(7,"i",84),e.TgZ(8,"span",72),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,te,2,1,"span",85),e.qZA(),e.qZA(),e.TgZ(12,"a",83),e.NdJ("click",function(){const l=e.CHM(t).row,c=e.oxw(),m=e.MAs(207);return c.delete(l,m)}),e.TgZ(13,"div",70),e._UZ(14,"i",86),e.TgZ(15,"span",72),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,ne,2,1,"span",85),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,4,"action.edit")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0),e.xp6(5),e.Oqu(e.lcZ(17,6,"action.delete")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0)}}function ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",88),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",89),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(4,"Yes"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().decline()}),e._uU(6,"No"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Voulez-vous vraiment supprimer le professeur :",t.deleteRow.name,"?")}}const Q=function(){return{backdrop:"static"}};let ae=(()=>{class o{constructor(t,n,i,l,c,m,b,v,q,w){this.modalService=t,this.translateService=n,this.toastr=i,this.formBuilder=l,this.matiereService=c,this.router=m,this.documentpdfService=b,this.tableSvc=v,this.cdr=q,this.screenSizeSvc=w,this.imageSrc="/assets/images/avatars/thumb-1.jpg",this.status=!1,this.temp=[],this.rows=[],this.matieres=[],this.userImg="",this.matieresSharedCollection=[],this.selected=[],this.columnMode=d.hq.force,this.SelectionType=d.RT,this.rowHeight="auto",this.scrollbarH=!1,this.columns=[{prop:"name"},{name:"regime"},{name:"Company"}],this.editForm=this.formBuilder.group({email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],name:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(220)]],sexe:[null,s.kI.required],dateborn:[null,s.kI.nullValidator],salaireheure:["null",s.kI.nullValidator],salairefixe:["null",s.kI.nullValidator],matieres:[null,s.kI.nullValidator],isvacataire:[!1,s.kI.nullValidator],phone:["",s.kI.nullValidator],enfants:[0,s.kI.nullValidator],filename:[" ",s.kI.nullValidator],lieunaissance:[" ",s.kI.nullValidator],adresse:["",s.kI.nullValidator],tauxhoraire:[0,s.kI.nullValidator]}),this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(h=>{h.includes(_.y.XXL)||h.includes(_.y.XL)||h.includes(_.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=d.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=d.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],name:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(220)]],sexe:[null,s.kI.required],dateborn:[null,s.kI.nullValidator],salaireheure:[null,s.kI.nullValidator],salairefixe:[null,s.kI.nullValidator],matieres:[null,s.kI.nullValidator],isvacataire:[!1,s.kI.nullValidator],phone:[null,s.kI.nullValidator],enfants:[null,s.kI.nullValidator],filename:[null,s.kI.nullValidator],lieunaissance:[null,s.kI.nullValidator],adresse:[null,s.kI.nullValidator],tauxhoraire:[null,s.kI.nullValidator]})}fetch(){this.tableSvc.getProfessors().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)}),this.matieres$=this.matiereService.getMatieres()}goToImport(){this.router.navigate(["/rh/importprofessor"])}delete(t,n){this.deleteRow=t,this.modalRef=this.modalService.show(n,{class:"modal-sm"})}confirm(){this.tableSvc.delete(this.deleteRow.id).subscribe(t=>{this.toastr.success(this.translateService.instant("MESSAGES.DELETE_SUCCESS"),"OK"),this.fetch()},t=>{this.toastr.error(this.translateService.instant("MESSAGES.DELETE_ERROR"),"OK")}),this.modalRef.hide()}decline(){this.modalRef.hide()}updateFilter(t){const n=t.target.value.toLowerCase(),i=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(n)||!n});this.rows=i,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onSubmit(){this.formGroup.value.filename=this.imageSrc;const t={data:this.formGroup.value};console.log(t),this.tableSvc.create(t).subscribe(n=>{this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.fetch()},n=>{this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(n)})}onReset(){this.formGroup.reset()}onActivate(t){}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showDetail(t){this.iditId=t,this.loadRelationshipsOptions(),this.tableSvc.getProfessorbis(t).subscribe(n=>{this.updateForm(n),this.childEditModal.show(),this.cdr.markForCheck()},n=>{})}updateForm(t){var n;this.editForm.patchValue({id:t.id,email:t.compte.email,name:t.name,sexe:t.sexe,dateborn:t.dateborn,salaireheure:t.salaireheure,salairefixe:t.salairefixe,matieres:t.matieres,isvacataire:t.isvacataire,phone:t.phone,enfants:t.enfants,filename:t.imagefilename,lieunaissance:t.lieunaissance,adresse:t.adresse,tauxhoraire:t.tauxhoraire}),this.matieresSharedCollection=this.matiereService.addMatiereToCollectionIfMissing(this.matieresSharedCollection,...null!==(n=t.matieres)&&void 0!==n?n:[])}getSelectedMatiere(t,n){if(n)for(const i of n)if(t.id===i.id)return i;return t}getIdsmatiers(){}loadRelationshipsOptions(){this.matiereService.getMatieres().pipe((0,M.U)(t=>{var n;return this.matiereService.addMatiereToCollectionIfMissing(t,...null!==(n=this.editForm.get("matieres").value)&&void 0!==n?n:[])})).subscribe(t=>this.matieresSharedCollection=t)}onSubmitEdit(){this.editForm.value.filename=this.imageSrc,this.tableSvc.edit({data:this.editForm.value},this.iditId).subscribe(n=>{this.fetch(),this.hideChildEditModal(),this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},n=>{console.log(n.error.detail),this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),n.error.detail)})}hideChildEditModal(){this.childEditModal.hide(),this.editForm.reset()}onFileSelect(t){this.status=!1;const n=t.target.files[0];if(this.status=t.target.files.length>0,!0===this.status){const i=new FileReader;i.readAsDataURL(n),i.onload=()=>{this.imageSrc=i.result,this.cdr.detectChanges()}}}print(){this.documentpdfService.createPdfProfessor(this.rows)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.tT),e.Y36(f.sK),e.Y36(g._W),e.Y36(s.qu),e.Y36(j._),e.Y36(Z.F0),e.Y36(J.J),e.Y36(N.c),e.Y36(e.sBO),e.Y36(U.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-professor"]],viewQuery:function(t,n){if(1&t&&(e.Gf(d.nE,5),e.Gf(V,5),e.Gf(G,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.table=i.first),e.iGM(i=e.CRH())&&(n.childModal=i.first),e.iGM(i=e.CRH())&&(n.childEditModal=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("resize",function(l){return n.windowResize(l)},!1,e.Jf7)},features:[e._Bn([g._W])],decls:208,vars:76,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-primary",3,"click"],[1,"la","la-plus"],["type","button",1,"btn","btn-success",3,"click"],[1,"la","la-print"],["type","button",1,"btn","btn-warning",3,"click"],[1,"la","la-upload"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search user by name",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","Name",3,"width"],["name","Matricule",3,"width"],["name","Sexe",3,"width"],["name","Status",3,"width"],["name","dateborn",3,"width"],["cellClass","allow-overflow",3,"sortable","width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"col-md-8"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],["type","email","formControlName","email",1,"form-control"],[1,"form-group","col-md-3","mb-3"],[1,"mb-3"],[3,"shape","size","src"],["type","file",1,"form-control",3,"change"],[1,"form-group","mb-3","col-md-4"],["value","masculin","formControlName","sexe","name","radioInlineDemo",3,"inline"],["value","feminin","formControlName","sexe","name","radioInlineDemo",3,"inline"],["type","date","formControlName","dateborn",1,"form-control"],["type","text","formControlName","lieunaissance",1,"form-control"],["type","text","formControlName","adresse",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["type","number","formControlName","enfants",1,"form-control"],[1,"form-group","mb-3","col-md-6"],["formControlName","isvacataire","single","true"],[1,"form-group","col-md-6"],["bindLabel","libelle","placeholder","Select matieres","formControlName","matieres",3,"items","multiple","closeOnSelect","searchable"],["type","number","formControlName","salaireheure",1,"form-control"],["type","number","formControlName","salairefixe",1,"form-control"],[1,"col-md-12"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-childedit-name",1,"modal","fade",3,"config"],["childEditModal","bs-modal"],["id","dialog-childedit-name",1,"modal-title","pull-left"],["template",""],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],[1,"text-muted"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],[1,"text-capitalize"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"feather","icon-user-plus"],["class","ms-1",4,"ngIf"],[1,"feather","icon-trash-2"],[1,"ms-1"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.showChildModal()}),e._UZ(5,"i",5),e._uU(6,"Ajouter enseignant"),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.print()}),e._UZ(8,"i",7),e._uU(9,"Imprimer"),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return n.goToImport()}),e._UZ(11,"i",9),e._uU(12,"Importer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"h4",12),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",13),e.TgZ(19,"input",14),e.NdJ("keyup",function(l){return n.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",15),e.TgZ(21,"ngx-datatable",16,17),e.NdJ("activate",function(l){return n.onActivate(l)})("select",function(l){return n.onSelect(l)}),e.TgZ(23,"ngx-datatable-column",18),e.YNc(24,B,2,1,"ng-template",19),e.YNc(25,D,2,1,"ng-template",20),e.qZA(),e.TgZ(26,"ngx-datatable-column",21),e.YNc(27,$,7,4,"ng-template",20),e.qZA(),e.TgZ(28,"ngx-datatable-column",22),e.YNc(29,W,1,1,"ng-template",20),e.qZA(),e.TgZ(30,"ngx-datatable-column",23),e.YNc(31,K,1,1,"ng-template",20),e.qZA(),e.TgZ(32,"ngx-datatable-column",24),e.YNc(33,X,4,3,"ng-template",20),e.qZA(),e.TgZ(34,"ngx-datatable-column",25),e.YNc(35,ee,2,4,"ng-template",20),e.qZA(),e.TgZ(36,"ngx-datatable-column",26),e.YNc(37,oe,19,8,"ng-template",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",27,28),e.TgZ(40,"div",29),e.TgZ(41,"div",30),e.TgZ(42,"div",31),e.TgZ(43,"h4",32),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"button",33),e.NdJ("click",function(){return n.hideChildModal()}),e.TgZ(47,"span",34),e._uU(48,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",35),e.TgZ(50,"form",36),e.NdJ("validSubmit",function(){return n.onSubmit()}),e.TgZ(51,"div",37),e.TgZ(52,"div",38),e.TgZ(53,"div",39),e.TgZ(54,"label",40),e._uU(55,"Nom complet"),e.qZA(),e._UZ(56,"input",41),e.qZA(),e.TgZ(57,"div",39),e.TgZ(58,"label",40),e._uU(59,"Email"),e.qZA(),e._UZ(60,"input",42),e.qZA(),e.qZA(),e.TgZ(61,"div",43),e.TgZ(62,"label",40),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"div",44),e._UZ(66,"avatar",45),e.qZA(),e.TgZ(67,"input",46),e.NdJ("change",function(l){return n.onFileSelect(l)}),e.qZA(),e.qZA(),e.TgZ(68,"div",37),e.TgZ(69,"div",47),e.TgZ(70,"label",40),e._uU(71,"Sexe"),e.qZA(),e._UZ(72,"br"),e.TgZ(73,"radio",48),e._uU(74,"Masculin"),e.qZA(),e.TgZ(75,"radio",49),e._uU(76,"Feminin"),e.qZA(),e.qZA(),e.TgZ(77,"div",47),e.TgZ(78,"label",40),e._uU(79,"dateborn"),e.qZA(),e._UZ(80,"input",50),e.qZA(),e.TgZ(81,"div",47),e.TgZ(82,"label",40),e._uU(83,"lieunaissance"),e.qZA(),e._UZ(84,"input",51),e.qZA(),e._UZ(85,"hr"),e.TgZ(86,"div",47),e.TgZ(87,"label",40),e._uU(88,"adresse"),e.qZA(),e._UZ(89,"input",52),e.qZA(),e.TgZ(90,"div",47),e.TgZ(91,"label",40),e._uU(92,"phone"),e.qZA(),e._UZ(93,"input",53),e.qZA(),e.TgZ(94,"div",47),e.TgZ(95,"label",40),e._uU(96,"enfants"),e.qZA(),e._UZ(97,"input",54),e.qZA(),e._UZ(98,"hr"),e.TgZ(99,"div",55),e.TgZ(100,"checkbox",56),e._uU(101,"isvacataire"),e.qZA(),e.qZA(),e.TgZ(102,"div",57),e.TgZ(103,"label",40),e._uU(104,"Matieres"),e.qZA(),e._UZ(105,"ng-select",58),e.ALo(106,"async"),e.qZA(),e.TgZ(107,"div",55),e.TgZ(108,"label",40),e._uU(109,"salaireheure"),e.qZA(),e._UZ(110,"input",59),e.qZA(),e.TgZ(111,"div",55),e.TgZ(112,"label",40),e._uU(113,"salairefixe"),e.qZA(),e._UZ(114,"input",60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(115,"div",61),e.TgZ(116,"button",62),e.NdJ("click",function(){return n.onReset()}),e._uU(117),e.ALo(118,"translate"),e.qZA(),e.TgZ(119,"button",63),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(122,"div",64,65),e.TgZ(124,"div",29),e.TgZ(125,"div",30),e.TgZ(126,"div",31),e.TgZ(127,"h4",66),e._uU(128),e.ALo(129,"translate"),e.qZA(),e.TgZ(130,"button",33),e.NdJ("click",function(){return n.hideChildEditModal()}),e.TgZ(131,"span",34),e._uU(132,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(133,"div",35),e.TgZ(134,"form",36),e.NdJ("validSubmit",function(){return n.onSubmitEdit()}),e.TgZ(135,"div",37),e.TgZ(136,"div",38),e.TgZ(137,"div",39),e.TgZ(138,"label",40),e._uU(139,"Nom complet"),e.qZA(),e._UZ(140,"input",41),e.qZA(),e.TgZ(141,"div",39),e.TgZ(142,"label",40),e._uU(143,"Email"),e.qZA(),e._UZ(144,"input",42),e.qZA(),e.qZA(),e.TgZ(145,"div",43),e.TgZ(146,"label",40),e._uU(147),e.ALo(148,"translate"),e.qZA(),e.TgZ(149,"div",44),e._UZ(150,"avatar",45),e.qZA(),e.TgZ(151,"input",46),e.NdJ("change",function(l){return n.onFileSelect(l)}),e.qZA(),e.qZA(),e.TgZ(152,"div",37),e.TgZ(153,"div",47),e.TgZ(154,"label",40),e._uU(155,"Sexe"),e.qZA(),e._UZ(156,"br"),e.TgZ(157,"radio",48),e._uU(158,"Masculin"),e.qZA(),e.TgZ(159,"radio",49),e._uU(160,"Feminin"),e.qZA(),e.qZA(),e.TgZ(161,"div",47),e.TgZ(162,"label",40),e._uU(163,"dateborn"),e.qZA(),e._UZ(164,"input",50),e.qZA(),e.TgZ(165,"div",47),e.TgZ(166,"label",40),e._uU(167,"lieunaissance"),e.qZA(),e._UZ(168,"input",51),e.qZA(),e._UZ(169,"hr"),e.TgZ(170,"div",47),e.TgZ(171,"label",40),e._uU(172,"adresse"),e.qZA(),e._UZ(173,"input",52),e.qZA(),e.TgZ(174,"div",47),e.TgZ(175,"label",40),e._uU(176,"phone"),e.qZA(),e._UZ(177,"input",53),e.qZA(),e.TgZ(178,"div",47),e.TgZ(179,"label",40),e._uU(180,"enfants"),e.qZA(),e._UZ(181,"input",54),e.qZA(),e._UZ(182,"hr"),e.TgZ(183,"div",55),e.TgZ(184,"checkbox",56),e._uU(185,"isvacataire"),e.qZA(),e.qZA(),e.TgZ(186,"div",57),e.TgZ(187,"label",40),e._uU(188,"Matieres"),e.qZA(),e._UZ(189,"ng-select",58),e.ALo(190,"async"),e.qZA(),e.TgZ(191,"div",55),e.TgZ(192,"label",40),e._uU(193,"salaireheure"),e.qZA(),e._UZ(194,"input",59),e.qZA(),e.TgZ(195,"div",55),e.TgZ(196,"label",40),e._uU(197,"salairefixe"),e.qZA(),e._UZ(198,"input",60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(199,"div",61),e.TgZ(200,"button",62),e.NdJ("click",function(){return n.hideChildEditModal()}),e._uU(201),e.ALo(202,"translate"),e.qZA(),e.TgZ(203,"button",63),e._uU(204),e.ALo(205,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(206,ie,7,1,"ng-template",null,67,e.W1O)),2&t&&(e.xp6(16),e.hij("",e.lcZ(17,52,"title.professor")," "),e.xp6(5),e.Q6J("rows",n.rows)("columnMode",n.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",n.selected)("selectionType",n.SelectionType.checkbox)("rowHeight",n.rowHeight)("scrollbarH",n.scrollbarH),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("sortable",!1)("width",40),e.xp6(2),e.Q6J("config",e.DdM(74,Q)),e.xp6(6),e.Oqu(e.lcZ(45,54,"title.addprofessor")),e.xp6(6),e.Q6J("formGroup",n.formGroup),e.xp6(13),e.Oqu(e.lcZ(64,56,"fields.photo")),e.xp6(3),e.Q6J("shape","square")("size",130)("src",n.imageSrc),e.xp6(7),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(30),e.Q6J("items",e.lcZ(106,58,n.matieres$))("multiple",!0)("closeOnSelect",!1)("searchable",!0),e.xp6(12),e.Oqu(e.lcZ(118,60,"action.cancel")),e.xp6(3),e.Oqu(e.lcZ(121,62,"action.save")),e.xp6(2),e.Q6J("config",e.DdM(75,Q)),e.xp6(6),e.Oqu(e.lcZ(129,64,"title.editprofessor")),e.xp6(6),e.Q6J("formGroup",n.editForm),e.xp6(13),e.Oqu(e.lcZ(148,66,"fields.photo")),e.xp6(3),e.Q6J("shape","square")("size",130)("src",n.imageSrc),e.xp6(7),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(30),e.Q6J("items",e.lcZ(190,68,n.matieres$))("multiple",!0)("closeOnSelect",!1)("searchable",!0),e.xp6(12),e.Oqu(e.lcZ(202,70,"action.cancel")),e.xp6(3),e.Oqu(e.lcZ(205,72,"action.save")))},directives:[p.oH,d.nE,d.UC,d.tk,d.vq,A.oB,s._Y,s.JL,s.sg,p.MU,p.HK,s.Fj,s.JJ,s.u,I.A,E.U,s.wV,P.b,T.w9,u.mk,F.L,O.h,R.h,u.O5],pipes:[f.X$,u.Ov,u.uU],styles:[""]}),o})(),le=(()=>{class o{constructor(t,n){this.route=t,this.router=n}ngOnInit(){}addPaie(){this.router.navigate(["/rh/typerecette"])}goToStructure(){this.router.navigate(["/rh/structurebulletin"])}openReglePaie(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.gz),e.Y36(Z.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bulletin"]],decls:17,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"btn-group"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"la","la-plus"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[1,"la","la-cube"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"la","la-list-alt"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Bulletins paie"),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.addPaie()}),e._UZ(9,"i",8),e._uU(10,"Ajouter paie"),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.goToStructure()}),e._UZ(12,"i",10),e._uU(13,"Structue paie"),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.openReglePaie()}),e._UZ(15,"i",12),e._uU(16,"Regles paie"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),o})(),se=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-structuebulletin"]],decls:7,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Structure"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),o})(),re=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-advancesalaire"]],decls:7,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Avance de salaire"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),o})();var C=r(965),H=r(1841),S=r(2340),ce=r(5917),de=r(3342),ue=r(5304);let me=(()=>{class o{constructor(t){this.http=t,this.apiUrl=S.N.API_URL+"pointagescours",this.httpOptions={headers:new H.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getPointages(t,n){return this.http.get(`${this.apiUrl}/${t}/${n}`,this.httpOptions).pipe((0,de.b)(l=>console.log("fetched professor")),(0,ue.K)(this.handleError("getProfessors",[])))}create(t){return this.http.post(this.apiUrl,t)}handleError(t="operation",n){return i=>(console.error(i),(0,ce.of)(n))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(H.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function pe(o,a){if(1&o&&(e.TgZ(0,"ng-option",18),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function ge(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.affectation.professor.name," ")}function Ze(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.affectation.matiere.libelle," ")}const he=function(o,a,t){return{"bg-color-yellow":o,"bg-color-red":a,"bg-color-green":t}};function _e(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"input",19),e.NdJ("change",function(i){const c=e.CHM(t).rowIndex;return e.oxw().updateInput(i,"heure",c)}),e.qZA()}if(2&o){const t=a.row;e.s9C("value",t.heure),e.Q6J("ngClass",e.kEZ(3,he,t.heure>9.99&&t.heure<14,t.note<10,t.note>14))("min",1)}}let fe=(()=>{class o{constructor(t,n,i,l){this.cdr=t,this.toaster=n,this.classeService=i,this.pointagecoursService=l,this.editing={},this.columnMode=d.hq.force,this.SelectionType=d.RT,this.cdr.markForCheck()}updateInput(t,n,i){this.rows[i][n]=t.target.value,this.rows=[...this.rows]}updateValue(t,n,i){console.log("inline editing rowIndex",i),this.editing[i+"-"+n]=!1,this.rows[i][n]=t.target.value,this.rows=[...this.rows],console.log("UPDATED!",this.rows[i][n])}ngOnInit(){this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{console.log(t)})}onSubmit(){const t=[];for(let l=0;l<this.rows.length;l++)t.push({affectation:this.rows[l].affectation.id,heure:this.rows[l].heure,day:this.mday});const i={data:t};console.log(t),this.pointagecoursService.create(i).subscribe(l=>{this.rows=l.data,this.cdr.markForCheck(),this.toaster.success("Save note","Success save")},l=>{console.log(l),this.toaster.error("Save note","Echec")})}onChangeClasse(t){this.pointagecoursService.getPointages(this.mclasse,this.mday).subscribe(n=>{this.rows=n.data,console.log(n.data),this.cdr.markForCheck()},n=>{console.log(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(g._W),e.Y36(C.U),e.Y36(me))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pointagecours"]],viewQuery:function(t,n){if(1&t&&e.Gf(d.nE,5),2&t){let i;e.iGM(i=e.CRH())&&(n.table=i.first)}},features:[e._Bn([g._W])],decls:35,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"form-group","col-md-3"],[1,"form-label"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"card-footer"],[1,"btn","btn-md","btn-primary",3,"click"],[3,"value"],["type","number",3,"ngClass","value","min","change"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Pointage de cours"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"label",8),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"ng-select",9),e.NdJ("ngModelChange",function(l){return n.mclasse=l}),e.YNc(13,pe,2,2,"ng-option",10),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"label",8),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",11),e.NdJ("ngModelChange",function(l){return n.mday=l})("change",function(l){return n.onChangeClasse(l)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(19,"hr"),e.TgZ(20,"ngx-datatable",12,13),e.TgZ(22,"ngx-datatable-column",14),e.ALo(23,"translate"),e.YNc(24,ge,1,1,"ng-template",15),e.qZA(),e.TgZ(25,"ngx-datatable-column",14),e.ALo(26,"translate"),e.YNc(27,Ze,1,1,"ng-template",15),e.qZA(),e.TgZ(28,"ngx-datatable-column",14),e.ALo(29,"translate"),e.YNc(30,_e,1,7,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",16),e.TgZ(32,"button",17),e.NdJ("click",function(){return n.onSubmit()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Oqu(e.lcZ(11,17,"fields.classe")),e.xp6(2),e.Q6J("ngModel",n.mclasse),e.xp6(1),e.Q6J("ngForOf",n.classes),e.xp6(3),e.Oqu(e.lcZ(17,19,"fields.date")),e.xp6(2),e.Q6J("ngModel",n.mday),e.xp6(2),e.Q6J("rows",n.rows)("columnMode",n.columnMode)("headerHeight",50)("footerHeight",50)("limit",100),e.xp6(2),e.s9C("name",e.lcZ(23,21,"fields.professor")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(26,23,"fields.matiere")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(29,25,"fields.heure")),e.Q6J("width",70),e.xp6(5),e.Oqu(e.lcZ(34,27,"action.save")))},directives:[p.HK,T.w9,s.JJ,s.On,u.sg,s.Fj,p.oH,d.nE,d.UC,d.vq,T.xv,u.mk],pipes:[f.X$],styles:[""]}),o})();var Te=r(2649),x=r(743);function be(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"ul",12),e.TgZ(1,"li",13),e.TgZ(2,"a",14),e.NdJ("click",function(i){e.CHM(t);const l=e.oxw().$implicit;return e.oxw().onRowClick(l.id,i)}),e._uU(3,"Affectation par enseignants"),e.qZA(),e.qZA(),e.TgZ(4,"li",13),e.TgZ(5,"a",14),e.NdJ("click",function(i){e.CHM(t);const l=e.oxw().$implicit;return e.oxw().onRowClickClasse(l.id,i)}),e._uU(6,"Affectation par classe"),e.qZA(),e.qZA(),e.qZA()}}function Ae(o,a){if(1&o&&(e.TgZ(0,"ul",7),e.TgZ(1,"li",8),e.TgZ(2,"button",9),e._uU(3),e._UZ(4,"span",10),e.qZA(),e.YNc(5,be,7,0,"ul",11),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",t.libelle,"")}}let ve=(()=>{class o{constructor(t,n,i,l,c,m){this.route=t,this.router=n,this.serClasse=i,this.timestableservice=l,this.cdr=c,this.screenSizeSvc=m,this.rows=[],this.classes=[],this.cdr.markForCheck()}ngOnInit(){this.initValues()}initValues(){this.serClasse.getClasses().subscribe(t=>{this.classes=t.data,console.log(this.classes),this.cdr.markForCheck()},t=>{console.log(t)})}onRowClick(t,n){this.router.navigate(["/rh/makeprofessor/"+t])}onRowClickClasse(t,n){this.router.navigate(["/rh/makeprofessor"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.gz),e.Y36(Z.F0),e.Y36(C.U),e.Y36(Te.H),e.Y36(e.sBO),e.Y36(U.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-affectation"]],decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],["dropdown","",1,"btn-group","justify-content-end"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"list-group-item","list-group-item-action","btn","btn-primary","dropdown-toggle"],[1,"caret"],["id","dropdown-basic","class","dropdown-menu  dropdown-menu-right","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],["href","javascript:void(0)",1,"dropdown-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Affectations"),e.qZA(),e.qZA(),e.YNc(7,Ae,6,1,"ul",6),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.classes))},directives:[u.sg,x.TO,x.Mq,x.Hz],styles:[""]}),o})();var qe=r(735),Ce=r(1452);const xe=["childModal"],Ue=["childEditModal"];function Se(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",72),e.TgZ(1,"input",73),e.NdJ("change",function(){const i=e.CHM(t);return i.selectFn(!i.allRowsSelected)}),e.qZA(),e.qZA()}if(2&o){const t=a.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function we(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",72),e.TgZ(1,"input",73),e.NdJ("change",function(i){return e.CHM(t).onCheckboxChangeFn(i)}),e.qZA(),e.qZA()}if(2&o){const t=a.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ke(o,a){if(1&o&&(e.TgZ(0,"div",74),e._UZ(1,"avatar",75),e.TgZ(2,"div",76),e.TgZ(3,"div",77),e._uU(4),e.qZA(),e.TgZ(5,"div",78),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.row;e.xp6(1),e.Q6J("size",38)("src",t.imagefilename),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(t.adresseMail)}}function ye(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.matricule," ")}function Me(o,a){1&o&&e._uU(0),2&o&&e.hij(" ",a.row.sexe," ")}function Je(o,a){if(1&o&&(e.TgZ(0,"div",79),e._UZ(1,"span",80),e.TgZ(2,"span",81),e._uU(3),e.qZA(),e.qZA()),2&o){const t=a.row;e.Q6J("ngClass",!0===t.status?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass",!0===t.status?"bg-success":"bg-danger"),e.xp6(2),e.Oqu(t.status)}}function Ne(o,a){1&o&&(e._uU(0),e.ALo(1,"date")),2&o&&e.hij(" ",e.xi3(1,1,a.row.dateborn,"dd/MM/yyyy")," ")}function Ie(o,a){if(1&o&&(e.TgZ(0,"span",92),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function Ee(o,a){if(1&o&&(e.TgZ(0,"span",92),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function Pe(o,a){if(1&o&&(e.TgZ(0,"span",92),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function Fe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",82),e.NdJ("click",function(i){return e.CHM(t),e.MAs(4).toggle(i)}),e.TgZ(1,"a",83),e._UZ(2,"i",84),e.qZA(),e.TgZ(3,"dropdown-menu",85,86),e.TgZ(5,"a",87),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().showDetail(l.id)}),e.TgZ(6,"div",74),e._UZ(7,"i",88),e.TgZ(8,"span",76),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Ie,2,1,"span",89),e.qZA(),e.qZA(),e.TgZ(12,"a",90),e.TgZ(13,"div",74),e._UZ(14,"i",88),e.TgZ(15,"span",76),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,Ee,2,1,"span",89),e.qZA(),e.qZA(),e.TgZ(19,"a",87),e.NdJ("click",function(){const l=e.CHM(t).row,c=e.oxw(),m=e.MAs(228);return c.delete(l,m)}),e.TgZ(20,"div",74),e._UZ(21,"i",91),e.TgZ(22,"span",76),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.YNc(25,Pe,2,1,"span",89),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.row,n=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,7,"action.edit")),e.xp6(2),e.Q6J("ngIf",n.selected.length>0),e.xp6(1),e.MGl("routerLink","/rh/classepersonnel/",t.id,""),e.xp6(4),e.Oqu(e.lcZ(17,9,"action.classe")),e.xp6(2),e.Q6J("ngIf",n.selected.length>0),e.xp6(5),e.Oqu(e.lcZ(24,11,"action.delete")),e.xp6(2),e.Q6J("ngIf",n.selected.length>0)}}function Oe(o,a){if(1&o&&(e.TgZ(0,"ng-option",93),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function Re(o,a){if(1&o&&(e.TgZ(0,"ng-option",93),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function Qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",94),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",95),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(4,"Yes"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().decline()}),e._uU(6,"No"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Voulez-vous vraiment supprimer le personnel:",t.deleteRow.name,"?")}}const Y=function(){return{backdrop:"static"}};let He=(()=>{class o{constructor(t,n,i,l,c,m,b,v,q,w){this.modalService=t,this.translateService=n,this.toastr=i,this.configService=l,this.documentpdfService=c,this.formBuilder=m,this.tableSvc=b,this.classeservice=v,this.cdr=q,this.screenSizeSvc=w,this.imageSrc="/assets/images/avatars/thumb-1.jpg",this.status=!1,this.temp=[],this.caissesSharedCollection=[],this.caisses=[],this.ages=[{value:"<18",label:"Under 18"},{value:"18",label:"18"},{value:">18",label:"More than 18"}],this.rows=[],this.selected=[],this.columnMode=d.hq.force,this.SelectionType=d.RT,this.rowHeight="auto",this.scrollbarH=!1,this.columns=[{prop:"name"},{name:"regime"},{name:"Company"}],this.editForm=this.formBuilder.group({id:[],email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],name:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(220)]],sexe:["",s.kI.required],cni:["",s.kI.required],dateborn:["",s.kI.nullValidator],salaireheure:[],salairefixe:[],phone:[],enfants:[],photo:[],lieunaissance:[],adresse:[],caisse:[],roles:[null,s.kI.nullValidator],classes:[]}),this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(h=>{h.includes(_.y.XXL)||h.includes(_.y.XL)||h.includes(_.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=d.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=d.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({email:["",[s.kI.required,s.kI.pattern(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],name:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(220)]],sexe:[null,s.kI.required],cni:[null,s.kI.required],dateborn:[null,s.kI.nullValidator],salaireheure:[null,s.kI.nullValidator],salairefixe:[null,s.kI.nullValidator],phone:[null,s.kI.nullValidator],enfants:[null,s.kI.nullValidator],photo:[null,s.kI.nullValidator],lieunaissance:[null,s.kI.nullValidator],adresse:[null,s.kI.nullValidator],caisse:[null,s.kI.nullValidator],roles:[null,s.kI.nullValidator],classes:[null,s.kI.nullValidator]})}fetch(){this.tableSvc.getPersonnels().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)}),this.configService.getCaisses().subscribe(t=>{this.caisses=t.data,this.cdr.markForCheck()},t=>{console.log(t)}),this.classes$=this.classeservice.getClassesbis(),this.loadRelationshipsOptions()}delete(t,n){this.deleteRow=t,this.modalRef=this.modalService.show(n,{class:"modal-sm"})}confirm(){this.tableSvc.delete(this.deleteRow.id).subscribe(t=>{this.toastr.success(this.translateService.instant("MESSAGES.DELETE_SUCCESS"),"OK"),this.fetch()},t=>{this.toastr.error(this.translateService.instant("MESSAGES.DELETE_ERROR"),"OK")}),this.modalRef.hide()}decline(){this.modalRef.hide()}updateFilter(t){const n=t.target.value.toLowerCase(),i=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(n)||!n});this.rows=i,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onSubmit(){this.formGroup.value.photo=this.imageSrc;const t={data:this.formGroup.value};console.log(t),this.tableSvc.create(t).subscribe(n=>{this.fetch(),this.toastr.success(n.data.name,this.translateService.instant("MESSAGES.SAVE_SUCCESS"),{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"}),this.formGroup.reset()},n=>{console.log(n),this.toastr.error("Une erreur est survenue","Echec save",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"})})}onReset(){this.formGroup.reset()}onActivate(t){}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showDetail(t){this.iditId=t,console.log(t),this.tableSvc.getPersonnelBis(t).subscribe(n=>{console.log(n),this.imageSrc=n.imagefilename,this.updateForm(n),this.editForm.get("roles").patchValue(n.compte.roles),this.editForm.get("email").patchValue(n.compte.email),this.childEditModal.show(),this.cdr.markForCheck()},n=>{})}hideChildEditModal(){this.childEditModal.hide()}loadRelationshipsOptions(){this.configService.getCaissesbis().pipe((0,M.U)(t=>this.configService.addCaisseToCollectionIfMissing(t,this.editForm.get("caisse").value))).subscribe(t=>this.caissesSharedCollection=t)}updateForm(t){t.caisse&&this.editForm.get("caisse").patchValue(t.caisse.id),this.editForm.patchValue({id:t.id,sexe:t.sexe,name:t.name,email:t.email,cni:t.cni,dateborn:t.dateborn,salaireheure:t.salaireheure,salairefixe:t.salairefixe,phone:t.phone,enfants:t.enfants,photo:t.imagefilename,lieunaissance:t.lieunaissance,adresse:t.adresse,roles:t.roles,classes:t.classes}),this.caissesSharedCollection=this.configService.addCaisseToCollectionIfMissing(this.caissesSharedCollection,t.caisse)}onSubmitEdit(){this.editForm.value.photo=this.imageSrc,this.tableSvc.edit({data:this.editForm.value},this.iditId).subscribe(n=>{this.fetch(),this.childEditModal.hide(),this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.formGroup.reset()},n=>{console.log(n),this.childEditModal.hide(),this.toastr.error(n.error.details,"ERROR")})}onFileSelect(t){this.status=!1;const n=t.target.files[0];if(this.status=t.target.files.length>0,!0===this.status){const i=new FileReader;i.readAsDataURL(n),i.onload=()=>{this.imageSrc=i.result,this.cdr.detectChanges()}}}print(){this.documentpdfService.createPdfPersonnel(this.rows)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.tT),e.Y36(f.sK),e.Y36(g._W),e.Y36(qe.e),e.Y36(J.J),e.Y36(s.qu),e.Y36(Ce.G),e.Y36(C.U),e.Y36(e.sBO),e.Y36(U.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-personnel"]],viewQuery:function(t,n){if(1&t&&(e.Gf(d.nE,5),e.Gf(xe,5),e.Gf(Ue,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.table=i.first),e.iGM(i=e.CRH())&&(n.childModal=i.first),e.iGM(i=e.CRH())&&(n.childEditModal=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("resize",function(l){return n.windowResize(l)},!1,e.Jf7)},features:[e._Bn([g._W])],decls:229,vars:83,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-primary",3,"click"],[1,"la","la-plus"],["type","button",1,"btn","btn-success",3,"click"],[1,"la","la-print"],["type","button",1,"btn","btn-warning",3,"click"],[1,"la","la-upload"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search user by name",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","Name",3,"width"],["name","Matricule",3,"width"],["name","Sexe",3,"width"],["name","Status",3,"width"],["name","dateborn",3,"width"],["cellClass","allow-overflow",3,"sortable","width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"col-md-8"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],[1,"form-group","col-md-6"],["type","email","formControlName","email",1,"form-control"],["type","text","formControlName","cni",1,"form-control"],[1,"form-group","col-md-3","mb-3"],[1,"mb-3"],[3,"shape","size","src"],["type","file",1,"form-control",3,"change"],[1,"form-group","mb-3","col-md-4"],["value","masculin","formControlName","sexe","name","radioInlineDemo",3,"inline"],["value","feminin","formControlName","sexe","name","radioInlineDemo",3,"inline"],["type","date","formControlName","dateborn",1,"form-control"],["type","text","formControlName","lieunaissance",1,"form-control"],["type","text","formControlName","adresse",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["type","number","formControlName","enfants",1,"form-control"],[1,"form-group","mb-3","col-md-12"],["name","framework","value","ROLE_ADMIN","formControlName","roles",1,"form-check-inline",3,"inline"],["name","framework","value","ROLE_SUPERADMIN","formControlName","roles",1,"form-check-inline",3,"inline"],["name","framework","value","ROLE_ECONOME","formControlName","roles",1,"form-check-inline",3,"inline"],["name","framework","value","ROLE_COMPTA","formControlName","roles",1,"form-check-inline",3,"inline"],["formControlName","caisse"],[3,"value",4,"ngFor","ngForOf"],["bindLabel","libelle","placeholder","Select classe","formControlName","classes",3,"items","multiple","closeOnSelect","searchable"],[1,"col-md-12"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-childedit-name",1,"modal","fade",3,"config"],["childEditModal","bs-modal"],["id","dialog-childedit-name",1,"modal-title","pull-left"],["template",""],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],[1,"text-muted"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],[1,"text-capitalize"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"feather","icon-user-plus"],["class","ms-1",4,"ngIf"],["dropdownItem","","href","javascript:void(0)",3,"routerLink"],[1,"feather","icon-trash-2"],[1,"ms-1"],[3,"value"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.showChildModal()}),e._UZ(5,"i",5),e._uU(6,"Ajouter personnel "),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.print()}),e._UZ(8,"i",7),e._uU(9,"Imprimer "),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return n.showChildModal()}),e._UZ(11,"i",9),e._uU(12,"Importer "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"h4",12),e._uU(16,"Personnels"),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"input",14),e.NdJ("keyup",function(l){return n.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"ngx-datatable",16,17),e.NdJ("activate",function(l){return n.onActivate(l)})("select",function(l){return n.onSelect(l)}),e.TgZ(22,"ngx-datatable-column",18),e.YNc(23,Se,2,1,"ng-template",19),e.YNc(24,we,2,1,"ng-template",20),e.qZA(),e.TgZ(25,"ngx-datatable-column",21),e.YNc(26,ke,7,4,"ng-template",20),e.qZA(),e.TgZ(27,"ngx-datatable-column",22),e.YNc(28,ye,1,1,"ng-template",20),e.qZA(),e.TgZ(29,"ngx-datatable-column",23),e.YNc(30,Me,1,1,"ng-template",20),e.qZA(),e.TgZ(31,"ngx-datatable-column",24),e.YNc(32,Je,4,3,"ng-template",20),e.qZA(),e.TgZ(33,"ngx-datatable-column",25),e.YNc(34,Ne,2,4,"ng-template",20),e.qZA(),e.TgZ(35,"ngx-datatable-column",26),e.YNc(36,Fe,26,13,"ng-template",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",27,28),e.TgZ(39,"div",29),e.TgZ(40,"div",30),e.TgZ(41,"div",31),e.TgZ(42,"h4",32),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"button",33),e.NdJ("click",function(){return n.hideChildModal()}),e.TgZ(46,"span",34),e._uU(47,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",35),e.TgZ(49,"form",36),e.NdJ("validSubmit",function(){return n.onSubmit()}),e.TgZ(50,"div",37),e.TgZ(51,"div",38),e.TgZ(52,"div",39),e.TgZ(53,"label",40),e._uU(54,"Nom complet"),e.qZA(),e._UZ(55,"input",41),e.qZA(),e.TgZ(56,"div",37),e.TgZ(57,"div",42),e.TgZ(58,"label",40),e._uU(59,"Email"),e.qZA(),e._UZ(60,"input",43),e.qZA(),e.TgZ(61,"div",42),e.TgZ(62,"label",40),e._uU(63,"Cni"),e.qZA(),e._UZ(64,"input",44),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",45),e.TgZ(66,"label",40),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"div",46),e._UZ(70,"avatar",47),e.qZA(),e.TgZ(71,"input",48),e.NdJ("change",function(l){return n.onFileSelect(l)}),e.qZA(),e.qZA(),e.TgZ(72,"div",37),e.TgZ(73,"div",49),e.TgZ(74,"label",40),e._uU(75,"Sexe"),e.qZA(),e._UZ(76,"br"),e.TgZ(77,"radio",50),e._uU(78,"Masculin"),e.qZA(),e.TgZ(79,"radio",51),e._uU(80,"Feminin"),e.qZA(),e.qZA(),e.TgZ(81,"div",49),e.TgZ(82,"label",40),e._uU(83,"dateborn"),e.qZA(),e._UZ(84,"input",52),e.qZA(),e.TgZ(85,"div",49),e.TgZ(86,"label",40),e._uU(87,"lieunaissance"),e.qZA(),e._UZ(88,"input",53),e.qZA(),e._UZ(89,"hr"),e.TgZ(90,"div",49),e.TgZ(91,"label",40),e._uU(92,"adresse"),e.qZA(),e._UZ(93,"input",54),e.qZA(),e.TgZ(94,"div",49),e.TgZ(95,"label",40),e._uU(96,"phone"),e.qZA(),e._UZ(97,"input",55),e.qZA(),e.TgZ(98,"div",49),e.TgZ(99,"label",40),e._uU(100,"enfants"),e.qZA(),e._UZ(101,"input",56),e.qZA(),e.qZA(),e.TgZ(102,"div",37),e.TgZ(103,"div",57),e.TgZ(104,"checkbox",58),e._uU(105,"Administrateur "),e.qZA(),e.TgZ(106,"checkbox",59),e._uU(107,"Super admin "),e.qZA(),e.TgZ(108,"checkbox",60),e._uU(109,"ECONOME "),e.qZA(),e.TgZ(110,"checkbox",61),e._uU(111,"COMPTABLE "),e.qZA(),e.qZA(),e.qZA(),e._UZ(112,"hr"),e.TgZ(113,"div",37),e.TgZ(114,"div",42),e.TgZ(115,"label",40),e._uU(116,"Caisse"),e.qZA(),e.TgZ(117,"ng-select",62),e.YNc(118,Oe,2,2,"ng-option",63),e.qZA(),e.qZA(),e.TgZ(119,"div",42),e.TgZ(120,"label",40),e._uU(121,"Classes"),e.qZA(),e._UZ(122,"ng-select",64),e.ALo(123,"async"),e.qZA(),e.qZA(),e.qZA(),e._UZ(124,"hr"),e.TgZ(125,"div",65),e.TgZ(126,"button",66),e.NdJ("click",function(){return n.onReset()}),e._uU(127),e.ALo(128,"translate"),e.qZA(),e.TgZ(129,"button",67),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(132,"div",68,69),e.TgZ(134,"div",29),e.TgZ(135,"div",30),e.TgZ(136,"div",31),e.TgZ(137,"h4",70),e._uU(138),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"button",33),e.NdJ("click",function(){return n.hideChildEditModal()}),e.TgZ(141,"span",34),e._uU(142,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(143,"div",35),e.TgZ(144,"form",36),e.NdJ("validSubmit",function(){return n.onSubmitEdit()}),e.TgZ(145,"div",37),e.TgZ(146,"div",38),e.TgZ(147,"div",39),e.TgZ(148,"label",40),e._uU(149,"Nom complet"),e.qZA(),e._UZ(150,"input",41),e.qZA(),e.TgZ(151,"div",37),e.TgZ(152,"div",42),e.TgZ(153,"label",40),e._uU(154,"Email"),e.qZA(),e._UZ(155,"input",43),e.qZA(),e.TgZ(156,"div",42),e.TgZ(157,"label",40),e._uU(158,"Cni"),e.qZA(),e._UZ(159,"input",44),e.qZA(),e.qZA(),e.qZA(),e.TgZ(160,"div",45),e.TgZ(161,"label",40),e._uU(162),e.ALo(163,"translate"),e.qZA(),e.TgZ(164,"div",46),e._UZ(165,"avatar",47),e.qZA(),e.TgZ(166,"input",48),e.NdJ("change",function(l){return n.onFileSelect(l)}),e.qZA(),e.qZA(),e.TgZ(167,"div",37),e.TgZ(168,"div",49),e.TgZ(169,"label",40),e._uU(170,"Sexe"),e.qZA(),e._UZ(171,"br"),e.TgZ(172,"radio",50),e._uU(173,"Masculin"),e.qZA(),e.TgZ(174,"radio",51),e._uU(175,"Feminin"),e.qZA(),e.qZA(),e.TgZ(176,"div",49),e.TgZ(177,"label",40),e._uU(178,"dateborn"),e.qZA(),e._UZ(179,"input",52),e.qZA(),e.TgZ(180,"div",49),e.TgZ(181,"label",40),e._uU(182,"lieunaissance"),e.qZA(),e._UZ(183,"input",53),e.qZA(),e._UZ(184,"hr"),e.TgZ(185,"div",49),e.TgZ(186,"label",40),e._uU(187,"adresse"),e.qZA(),e._UZ(188,"input",54),e.qZA(),e.TgZ(189,"div",49),e.TgZ(190,"label",40),e._uU(191,"phone"),e.qZA(),e._UZ(192,"input",55),e.qZA(),e.TgZ(193,"div",49),e.TgZ(194,"label",40),e._uU(195,"enfants"),e.qZA(),e._UZ(196,"input",56),e.qZA(),e.qZA(),e.TgZ(197,"div",37),e.TgZ(198,"div",57),e.TgZ(199,"checkbox",58),e._uU(200,"Administrateur "),e.qZA(),e.TgZ(201,"checkbox",59),e._uU(202,"Super admin "),e.qZA(),e.TgZ(203,"checkbox",60),e._uU(204,"ECONOME "),e.qZA(),e.TgZ(205,"checkbox",61),e._uU(206,"COMPTABLE "),e.qZA(),e.qZA(),e.qZA(),e._UZ(207,"hr"),e.TgZ(208,"div",37),e.TgZ(209,"div",42),e.TgZ(210,"label",40),e._uU(211,"Caisse"),e.qZA(),e.TgZ(212,"ng-select",62),e.YNc(213,Re,2,2,"ng-option",63),e.qZA(),e.qZA(),e.TgZ(214,"div",42),e.TgZ(215,"label",40),e._uU(216,"Classes"),e.qZA(),e._UZ(217,"ng-select",64),e.ALo(218,"async"),e.qZA(),e.qZA(),e.qZA(),e._UZ(219,"hr"),e.TgZ(220,"div",65),e.TgZ(221,"button",66),e.NdJ("click",function(){return n.onReset()}),e._uU(222),e.ALo(223,"translate"),e.qZA(),e.TgZ(224,"button",67),e._uU(225),e.ALo(226,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(227,Qe,7,1,"ng-template",null,71,e.W1O)),2&t&&(e.xp6(20),e.Q6J("rows",n.rows)("columnMode",n.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",n.selected)("selectionType",n.SelectionType.checkbox)("rowHeight",n.rowHeight)("scrollbarH",n.scrollbarH),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("sortable",!1)("width",40),e.xp6(2),e.Q6J("config",e.DdM(81,Y)),e.xp6(6),e.Oqu(e.lcZ(44,61,"title.addpersonnel")),e.xp6(6),e.Q6J("formGroup",n.formGroup),e.xp6(18),e.Oqu(e.lcZ(68,63,"fields.photo")),e.xp6(3),e.Q6J("shape","square")("size",130)("src",n.imageSrc),e.xp6(7),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(25),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(8),e.Q6J("ngForOf",n.caisses),e.xp6(4),e.Q6J("items",e.lcZ(123,65,n.classes$))("multiple",!0)("closeOnSelect",!1)("searchable",!0),e.xp6(5),e.Oqu(e.lcZ(128,67,"action.cancel")),e.xp6(3),e.Oqu(e.lcZ(131,69,"action.save")),e.xp6(2),e.Q6J("config",e.DdM(82,Y)),e.xp6(6),e.Oqu(e.lcZ(139,71,"title.editpersonnel")),e.xp6(6),e.Q6J("formGroup",n.editForm),e.xp6(18),e.Oqu(e.lcZ(163,73,"fields.photo")),e.xp6(3),e.Q6J("shape","square")("size",130)("src",n.imageSrc),e.xp6(7),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(25),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(2),e.Q6J("inline",!0),e.xp6(8),e.Q6J("ngForOf",n.caissesSharedCollection),e.xp6(4),e.Q6J("items",e.lcZ(218,75,n.classes$))("multiple",!0)("closeOnSelect",!1)("searchable",!1),e.xp6(5),e.Oqu(e.lcZ(223,77,"action.cancel")),e.xp6(3),e.Oqu(e.lcZ(226,79,"action.save")))},directives:[p.oH,d.nE,d.UC,d.tk,d.vq,A.oB,s._Y,s.JL,s.sg,p.MU,p.HK,s.Fj,s.JJ,s.u,I.A,E.U,s.wV,P.b,T.w9,u.sg,u.mk,F.L,O.h,R.h,u.O5,Z.yS,T.xv],pipes:[f.X$,u.Ov,u.uU],styles:[""]}),o})();var L=r(6160),Ye=r(3673),Le=r.n(Ye),ze=r(7361),je=r(1057),z=r(8618),Ve=r(4300);const Ge=["input"];function Be(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"i",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeFile()}),e.qZA()}}let De=(()=>{class o{constructor(t,n){this.toaster=t,this.sequence=n,this.WAITING_FILE="No se a cargado ningun archivo para procesar",this.upload=new e.vpe,this.data=[[1,2],[3,4]]}ngOnInit(){}removeFile(){this.filename="",this.textFromFile="",this.isShowTextFromFile=!1,this.textToStateFile=this.WAITING_FILE,this.isBtnUploadShow=!1,this.myInputVariable.nativeElement.value=""}readFile(){this.isShowTextFromFile=!0,this.upload.emit({fileInfo:this.files,data:this.data})}fileNfo(t){return this.tmp=t.split("."),{name:this.tmp[0],format:this.tmp[1]}}onFileChange(t,n){if(n.files.length>0){this.filename=n.files[0].name,this.files={name:n.files[0].name,type:n.files[0].type,lastModifiedDate:n.files[0].lastModifiedDate};const i=t.target;1!==i.files.length&&this.toaster.error("Por el momento no se pueden procesar multiples archivos","Error");const l=new FileReader;l.onload=c=>{const b=z.read(c.target.result,{type:"binary"});this.data=z.utils.sheet_to_json(b.Sheets[b.SheetNames[0]],{header:1})},l.readAsBinaryString(i.files[0])}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g._W),e.Y36(Ve.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ge,5),2&t){let i;e.iGM(i=e.CRH())&&(n.myInputVariable=i.first)}},outputs:{upload:"upload"},features:[e._Bn([g._W])],decls:10,vars:3,consts:[[1,"input-group","file-upload"],["type","file","accept",".xls","multiple","false",1,"file-upload-btn",3,"change"],["input",""],["type","text","placeholder","Pick a file from your system ...",1,"form-control",3,"value"],["class","fa fa-times delete-file ml-3",3,"click",4,"ngIf"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-primary"],[1,"la","la-folder-open"],["type","button","title","Read file",1,"btn","btn-outline-success",3,"disabled","click"],[1,"la","la-upload"],[1,"fa","fa-times","delete-file","ml-3",3,"click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"input",1,2),e.NdJ("change",function(c){e.CHM(i);const m=e.MAs(2);return n.onFileChange(c,m)}),e.qZA(),e._UZ(3,"input",3),e.YNc(4,Be,1,0,"i",4),e.TgZ(5,"span",5),e.TgZ(6,"button",6),e._UZ(7,"i",7),e.qZA(),e.TgZ(8,"button",8),e.NdJ("click",function(){return n.readFile()}),e._UZ(9,"i",9),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(3),e.s9C("value",n.filename),e.xp6(1),e.Q6J("ngIf",n.filename),e.xp6(4),e.Q6J("disabled",!n.filename))},directives:[p.oH,u.O5],styles:[".file-upload .file-upload-btn{position:absolute;width:95%;height:35px;z-index:9;opacity:0}.file-upload .delete-file{position:absolute;right:80px;top:8px;font-size:16px;opacity:.8;cursor:pointer;z-index:10;visibility:hidden}.file-upload:hover .delete-file{visibility:visible}.input-group-append .btn.btn-success,.input-group-append .btn.btn-outline-success{z-index:11}\n"],encapsulation:2}),o})();function $e(o,a){if(1&o&&(e.TgZ(0,"th",23),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}function We(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"th"),e._uU(2,"#"),e.qZA(),e.YNc(3,$e,2,1,"th",22),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function Ke(o,a){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,We,4,1,"ng-container",19),e.qZA()),2&o){const t=a.index;e.xp6(1),e.Q6J("ngIf",0==t)}}function Xe(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.hij(" ",t," ")}}function et(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t," ")}}function tt(o,a){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,et,2,1,"span",19),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.Q6J("ngIf",t>0)}}function nt(o,a){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Xe,2,1,"td",19),e.YNc(2,tt,2,1,"td",21),e.qZA()),2&o){const t=a.$implicit,n=a.index;e.xp6(1),e.Q6J("ngIf",0!=n),e.xp6(1),e.Q6J("ngForOf",t)}}function ot(o,a){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"div",8),e.TgZ(2,"table",20),e.TgZ(3,"thead"),e.YNc(4,Ke,2,1,"tr",21),e.qZA(),e.TgZ(5,"tbody"),e.YNc(6,nt,3,2,"tr",21),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.files.data),e.xp6(2),e.Q6J("ngForOf",t.files.data)}}function it(o,a){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"div",8),e.TgZ(2,"table",24),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.TgZ(5,"th",25),e._uU(6,"Details"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"tbody"),e.TgZ(8,"tr"),e.TgZ(9,"td"),e._uU(10,"Name:"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"tr"),e.TgZ(14,"td"),e._uU(15,"Size:"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"tr"),e.TgZ(19,"td"),e._uU(20,"Modification date:"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"tr"),e.TgZ(24,"td"),e._uU(25,"Mimetype:"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(12),e.hij(" ",t.files.fileInfo.name," "),e.xp6(5),e.hij(" ",t.files.fileInfo.size," "),e.xp6(5),e.hij(" ",t.files.fileInfo.lastModifiedDate," "),e.xp6(5),e.hij(" ",t.files.fileInfo.type," ")}}const at=[{path:"professor",data:{title:"Enseignants",hidePageHeader:!0},component:ae},{path:"personnel",data:{title:"Personnels",hidePageHeader:!0},component:He},{path:"affectation",data:{title:"Affectations",hidePageHeader:!0},component:ve},{path:"importprofessor",component:(()=>{class o{constructor(t,n,i,l,c,m){this.auth=t,this.toaster=n,this.translateService=i,this.compositionService=l,this.classeService=c,this.professorService=m,this.viewOptions=!0,this.enbld=!0,this.files={name:"",size:0,lastModifiedDate:"",mimetype:""},this.titles=[],this.contents=[],this.finalData=[],this.rows=[]}ngOnInit(){this.initValues()}initValues(){this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{console.log(t)})}upload(t){this.reset(),this.enbld=!1,t&&(this.toaster.success(this.translateService.instant("MESSAGES.DELETE_SUCCESS"),"OK"),this.files=t,this.finalData=this.prepare(t.data),this.rows=this.prepare(t.data).rows,console.log("prepare",this.finalData))}lomtik(t,n){const i=[];for(let l=0;l<t.length;l++)void 0!==t[l][n]&&i.push(t[l][n]);return i}prepare(t){t.forEach((i,l)=>{l>0&&this.contents.push(i)}),t.forEach((i,l)=>{0===l&&this.titles.push(...i)});const n=[];return this.titles.forEach((i,l)=>{n.push(this.lomtik(this.contents,l))}),{columnNames:this.titles,rows:n}}save(){const t=[],n=this.files.data;for(let l=1;l<n.length;l++)t.push({sexe:n[l][1],email:n[l][2],name:n[l][0],phone:n[l][2],adresse:n[l][3]});const i={data:t};console.log(i),this.professorService.import(i).subscribe(l=>{this.toaster.success(S.N.MESSAGES.UPLOAD_SUCCESS,"OK")},l=>{this.toaster.success(S.N.MESSAGES.MULTIPLE_FILES_ERROR,"OK"),console.log(l)})}reset(){this.enbld=!0,this.files=[],this.contents=[],this.titles=[],this.finalData=[]}print(t){Le()({printable:t.id,type:"html",header:"Invoice",documentTitle:"Invoice",targetStyles:["*"]})}previousState(){window.history.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ze.$),e.Y36(g._W),e.Y36(f.sK),e.Y36(je.x),e.Y36(C.U),e.Y36(N.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-import"]],features:[e._Bn([g._W])],decls:28,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"la","la-arrow-left"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"form-group","col-md-6"],[3,"upload"],[1,"row","justify-content-center","mb-3"],[1,"md-auto"],[1,"btn","btn-outline-secondary","la","la-eraser",3,"click"],[1,"btn","btn-outline-secondary","la","la-print","ml-2",3,"click"],[1,"btn","btn-outline-primary","la","la-save","ml-2",3,"disabled","click"],["id","tableContent",1,"album","text-muted"],["tableContent",""],[1,"container"],[4,"ngIf"],["id","data",1,"table","table-striped","text-center"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],["id","fileInfo",1,"table","table-striped","text-center"],["colspan","2",1,"text-center"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.previousState()}),e._UZ(4,"i",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"h4",7),e._uU(8,"Importer Enseignant"),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"app-upload",10),e.NdJ("upload",function(c){return n.upload(c)}),e.qZA(),e.qZA(),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"div",11),e.TgZ(14,"div",12),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"button",13),e.NdJ("click",function(){return n.reset()}),e.qZA(),e.TgZ(18,"button",14),e.NdJ("click",function(){e.CHM(i);const c=e.MAs(21);return n.print(c)}),e.qZA(),e.TgZ(19,"button",15),e.NdJ("click",function(){return n.save()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",16,17),e.TgZ(22,"div",18),e.YNc(23,ot,7,2,"div",19),e.YNc(24,it,28,4,"div",19),e.qZA(),e.qZA(),e.TgZ(25,"code"),e._uU(26),e.ALo(27,"json"),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(19),e.Q6J("disabled",n.enbld),e.xp6(4),e.Q6J("ngIf",1==n.viewOptions),e.xp6(1),e.Q6J("ngIf",0==n.viewOptions),e.xp6(2),e.hij(" ",e.lcZ(27,4,n.files.data)," "))},directives:[p.HK,De,u.O5,u.sg],pipes:[u.Ts],encapsulation:2}),o})(),data:{title:"Professor",hidePageHeader:!0}},{path:"makeprofessor/:id",data:{title:"Affectations",hidePageHeader:!0},component:L.z},{path:"classepersonnel/:id",data:{title:"Classepersonnel",hidePageHeader:!0},component:L.z},{path:"pointage",data:{title:"Pointage cours",hidePageHeader:!0},component:fe},{path:"advancesalaire",data:{title:"Avance salaire",hidePageHeader:!0},component:re},{path:"structurebulletin",data:{title:"Structure",hidePageHeader:!0},component:se},{path:"bulletin",data:{title:"Bulletin de paie",hidePageHeader:!0},component:le}];let lt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(at)],Z.Bz]}),o})();var st=r(8900),rt=r(2563),ct=r(902),dt=r(4466),ut=r(4079),mt=r(8090),pt=r(4124);let gt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[dt.m,ut.h,u.ez,lt,d.xD,st.F,rt.k,A.zk,p.VN,T.A0,ct.n,p.VN.forRoot(),x.mr,mt.d,g.Rh.forRoot(),pt._t]]}),o})()}}]);