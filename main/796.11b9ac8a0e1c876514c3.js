"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[796],{2655:(V,k,r)=>{r.d(k,{n:()=>w});var d=r(3018);const e=["*"];let w=(()=>{class C{constructor(){this.panelWidth=300,this.borderRight=!1,this.borderLeft=!1}ngOnInit(){this.maxWidth=`${this.panelWidth}px`,this.minWidth=`${this.panelWidth}px`,this.left=`-${this.panelWidth}px`}}return C.\u0275fac=function(q){return new(q||C)},C.\u0275cmp=d.Xpm({type:C,selectors:[["column-panel"]],hostVars:14,hostBindings:function(q,M){2&q&&(d.Udp("max-width",M.maxWidth)("min-width",M.minWidth)("left",M.left),d.ekj("column-panel",!0)("border-end",M.borderRight)("border-start",M.borderLeft)("is-mobile-active",M.isMobileActive))},inputs:{panelWidth:"panelWidth",borderRight:"borderRight",borderLeft:"borderLeft",isMobileActive:"isMobileActive"},ngContentSelectors:e,decls:1,vars:0,template:function(q,M){1&q&&(d.F$t(),d.Hsn(0))},encapsulation:2,changeDetection:0}),C})()},7535:(V,k,r)=>{r.d(k,{A:()=>w});var d=r(8583),e=r(3018);let w=(()=>{class C{}return C.\u0275fac=function(q){return new(q||C)},C.\u0275mod=e.oAB({type:C}),C.\u0275inj=e.cJS({providers:[],imports:[[d.ez]]}),C})()},965:(V,k,r)=>{r.d(k,{U:()=>J});var d=r(1841),e=r(2340),w=r(5917),C=r(3342),v=r(5304),q=r(8002),M=r(3018);let J=(()=>{class O{constructor(c){this.http=c,this.apiUrl=e.N.API_URL+"cycles",this.apiUrlClasse=e.N.API_URL+"classes",this.apiUrlNiveau=e.N.API_URL+"niveaux",this.httpOptions={headers:new d.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getCycles(){return this.http.get(this.apiUrl,this.httpOptions).pipe((0,C.b)(c=>console.log("fetched cycles")),(0,v.K)(this.handleError("getcycles",[])))}getCycle(c){return this.http.get(`${this.apiUrl}/${c}`).pipe((0,C.b)(E=>console.log(`fetched cycle id=${c}`)),(0,v.K)(this.handleError(`getCycle id=${c}`)))}getNiveaus(){return this.http.get(this.apiUrlNiveau,this.httpOptions).pipe((0,C.b)(c=>console.log("fetched niveau")),(0,v.K)(this.handleError("getniveaux",[])))}getNiveauxbycycle(c){return this.http.get(`${this.apiUrlNiveau}/${c}/cycle`)}getNiveau(c){return this.http.get(`${this.apiUrlNiveau}/${c}`)}getClasses(){return this.http.get(this.apiUrlClasse,this.httpOptions).pipe((0,C.b)(c=>console.log("fetched classes")),(0,v.K)(this.handleError("getClasses",[])))}getClassesbis(){return this.http.get(this.apiUrlClasse,this.httpOptions).pipe((0,q.U)(c=>c.data),(0,C.b)(c=>console.log("fetched matieres")),(0,v.K)(this.handleError("getmatieres",[])))}getClasse(c){return this.http.get(`${this.apiUrlClasse}/${c}`).pipe((0,C.b)(E=>console.log(`fetched classe id=${c}`)),(0,v.K)(this.handleError(`getClasse id=${c}`)))}getClassebyniveau(c){return this.http.get(`${this.apiUrlClasse}/${c}/niveau`)}addCycle(c){return this.http.post(this.apiUrl,c,this.httpOptions).pipe((0,C.b)(g=>console.log(`added sequence w/ id=${c.id}`)),(0,v.K)(this.handleError("addSequence")))}editCycle(c,g){return this.http.put(`${this.apiUrl}/${g}`,c)}editNiveau(c,g){return this.http.put(`${this.apiUrlNiveau}/${g}`,c)}editClasse(c,g){return this.http.put(`${this.apiUrlClasse}/${g}`,c)}addNiveau(c){return this.http.post(this.apiUrlNiveau,c,this.httpOptions).pipe((0,C.b)(g=>console.log(`added niveau w/ id=${c.id}`)),(0,v.K)(this.handleError("addNiveau")))}addClasse(c){return this.http.post(this.apiUrlClasse,c,this.httpOptions).pipe((0,C.b)(g=>console.log(`added classe w/ id=${c.id}`)),(0,v.K)(this.handleError("addClasse")))}deleteCycle(c){return this.http.delete(`${this.apiUrl}/${c}`)}deleteClasse(c){return this.http.delete(`${this.apiUrlClasse}/${c}`)}deleteNiveau(c){return this.http.delete(`${this.apiUrlNiveau}/${c}`)}handleError(c="operation",g){return E=>(console.error(E),(0,w.of)(g))}}return O.\u0275fac=function(c){return new(c||O)(M.LFG(d.eN))},O.\u0275prov=M.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},3796:(V,k,r)=>{r.r(k),r.d(k,{CommunicationModule:()=>Vn});var d=r(8583),e=r(3018),w=r(1841),C=r(2340);const v={headers:new w.WM({"Content-Type":"application/json"})};let q=(()=>{class n{constructor(t){this.http=t,this.apiUrl=C.N.API_URL+"mail"}getMail(t,i){return this.http.get(this.apiUrl+"/"+t+"/"+i)}getuserbyname(t){return this.http.get(`${this.apiUrl}/${t}/type`)}getuserbyclasse(t){return this.http.get(`${this.apiUrl}/${t}/classe`)}addMail(t){return this.http.post(`${this.apiUrl}`,t)}deleteMail(t){let i=Object.assign(Object.assign({},v),{body:{ids:t}});return console.log("params",i),this.http.delete(this.apiUrl,i)}updateMark(t,i){return this.http.post(`${this.apiUrl}/mark`,{id:t,mark:i})}getMailContent(t){return this.http.get(`${this.apiUrl}/detail/`+t+"/message")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(w.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"a",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().getCategory(a.value)}),e.TgZ(1,"div",20),e._UZ(2,"i",21),e.TgZ(3,"span",22),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.ekj("active",i.selectedGroup===t.value),e.xp6(2),e.Q6J("ngClass",t.icon),e.xp6(2),e.Oqu(t.title)}}const J=function(n){return{"background-color":n}};function O(n,s){if(1&n&&(e.TgZ(0,"a",23),e.TgZ(1,"div",20),e._UZ(2,"span",24),e.TgZ(3,"span",22),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&n){const t=s.$implicit;e.xp6(2),e.Q6J("ngStyle",e.VKq(2,J,t.color)),e.xp6(2),e.Oqu(t.title)}}const Z=function(n){return{"mobile-hide-list":n}};function c(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mail-list",25),e.NdJ("rowClick",function(o){return e.CHM(t),e.oxw().selectMailData(o)})("onMobilePanelOpen",function(){return e.CHM(t),e.oxw().onToggleClick()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("selectedMail",t.selectedMailId)("showMailContent",t.showMailContent)("data",t.mails)("ngClass",e.VKq(4,Z,t.displayContentMobile))}}const g=function(n){return{"mobile-show-content":n}};function E(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mail-content",26),e.NdJ("onMobileContentClose",function(){return e.CHM(t),e.oxw().onMobileContentToggleClick()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,g,t.displayContentMobile))("mailId",t.selectedMailId)}}function ce(n,s){1&n&&e._UZ(0,"mail-compose")}const ie=[{title:"Inbox",value:"inbox",icon:"icon-inbox"},{title:"Sent",value:"sent",icon:"icon-send"},{title:"Marked",value:"marked",icon:"icon-star"},{title:"Draft",value:"draft",icon:"icon-edit"}];let oe=(()=>{class n{constructor(t,i){this.mailSvc=t,this.cdr=i,this.categories=ie,this.showMailContent=!1,this.labels=[],this.mails=[],this.compose=!1,this.showMobilePanel=!1,this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.getCategory("inbox"),this.displayContentMobile=!1}getCategory(t){this.showMailContent=!1,this.compose=!1,this.selectedGroup=t,this.mailSvc.getMail(this.currentuser.id,t).subscribe(i=>{this.mails=i.data,this.selectMailData(this.mails[0].id),this.displayContentMobile=!1,this.cdr.detectChanges()})}selectMailData(t){this.showMailContent=!0,this.displayContentMobile=!0,this.selectedMailId=t}composeMail(){this.compose=!0}onToggleClick(){this.showMobilePanel=!this.showMobilePanel}onMobileContentToggleClick(){this.displayContentMobile=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mail"]],decls:22,vars:8,consts:[[1,"mail","card","mb-0"],[1,"d-flex","content-min-height","content-max-height"],[1,"p-0",3,"borderRight","panelWidth","isMobileActive"],[1,"mail-panel"],[1,"mail-panel-menu"],[1,"d-flex","justify-content-between","align-items-center"],[1,"p-3"],[1,"me-3","cursor-pointer","d-block","d-lg-none",3,"click"],[1,"feather","icon-arrow-left","font-size-lg"],[1,"columns-panel-item-group"],["href","javascript:void(0)","class","columns-panel-item columns-panel-item-link",3,"active","click",4,"ngFor","ngForOf"],[1,"mt-4","columns-panel-item-group"],["href","javascript:void(0)","class","columns-panel-item columns-panel-item-link",4,"ngFor","ngForOf"],[1,"mail-panel-footer"],[1,"btn","btn-primary","d-block","w-100",3,"click"],[1,"feather","icon-plus","me-2"],[3,"selectedMail","showMailContent","data","ngClass","rowClick","onMobilePanelOpen",4,"ngIf"],[3,"ngClass","mailId","onMobileContentClose",4,"ngIf"],[4,"ngIf"],["href","javascript:void(0)",1,"columns-panel-item","columns-panel-item-link",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","font-size-lg",3,"ngClass"],[1,"ms-3"],["href","javascript:void(0)",1,"columns-panel-item","columns-panel-item-link"],[1,"badge-dot",3,"ngStyle"],[3,"selectedMail","showMailContent","data","ngClass","rowClick","onMobilePanelOpen"],[3,"ngClass","mailId","onMobileContentClose"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"column-panel",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h4",6),e._uU(7,"Messagerie"),e.qZA(),e.TgZ(8,"div",7),e.NdJ("click",function(){return i.onToggleClick()}),e._UZ(9,"i",8),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.YNc(11,M,5,4,"a",10),e.qZA(),e.TgZ(12,"div",11),e.YNc(13,O,5,4,"a",12),e.qZA(),e.qZA(),e.TgZ(14,"div",13),e.TgZ(15,"button",14),e.NdJ("click",function(){return i.composeMail()}),e._UZ(16,"i",15),e.TgZ(17,"span"),e._uU(18,"Nouveau"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,c,1,6,"mail-list",16),e.YNc(20,E,1,4,"mail-content",17),e.YNc(21,ce,1,0,"mail-compose",18),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("borderRight",!0)("panelWidth",230)("isMobileActive",i.showMobilePanel),e.xp6(9),e.Q6J("ngForOf",i.categories),e.xp6(2),e.Q6J("ngForOf",i.labels),e.xp6(6),e.Q6J("ngIf",!i.compose),e.xp6(1),e.Q6J("ngIf",i.showMailContent&&!i.compose),e.xp6(1),e.Q6J("ngIf",i.compose))},styles:[""]}),n})();var N=r(8932),h=r(3679),A=r(9344);let z=(()=>{class n{constructor(t){this.http=t,this.apiUrl=C.N.API_URL+"sms"}addModel(t){return this.http.post(`${this.apiUrl}/models`,t)}addSms(t){return this.http.post(`${this.apiUrl}`,t)}addSmsMultiple(t){return this.http.post(`${this.apiUrl}/multiple`,t)}gethistorique(){return this.http.get(`${this.apiUrl}`)}getmodels(){return this.http.get(`${this.apiUrl}/models`)}getmodelsone(t){return this.http.get(`${this.apiUrl}/models/${t}`)}getonesms(t){return this.http.get(`${this.apiUrl}/${t}`)}getsmsclasse(t){return this.http.get(`${this.apiUrl}/${t}/classe`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(w.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=r(9790),S=r(7552);let de=(()=>{class n{constructor(t,i,o,a,l){this.formBuilder=t,this.smsService=i,this.toaster=o,this.translateService=a,this.cdr=l}ngOnInit(){this.formGroup=this.formBuilder.group({phone:["",[h.kI.required]],message:["",[h.kI.maxLength(160),h.kI.minLength(1)]]})}onSubmit(){this.smsService.addSms({data:{phone:this.formGroup.value.phone,message:this.formGroup.value.message}}).subscribe(i=>{this.formGroup.reset(),this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.qu),e.Y36(z),e.Y36(A._W),e.Y36(x.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendone"]],features:[e._Bn([A._W])],decls:26,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-center"],[1,"mb-2","fw-bolder"],[1,"row","justify-content-center"],[1,"col-md-8"],[3,"formGroup","validSubmit"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","formControlName","phone","id","exampleFormControlInput1","placeholder","+237",1,"form-control"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"label",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",13),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",14),e.TgZ(23,"button",15),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,5,"fields.phone")),e.xp6(5),e.Oqu(e.lcZ(18,7,"fields.message")),e.xp6(4),e.hij("",160-i.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,9,"action.send")))},directives:[h._Y,h.JL,h.sg,S.MU,h.Fj,S.oH,h.JJ,h.u],pipes:[x.X$],styles:[""]}),n})();var se=r(965),I=r(6640);function he(n,s){if(1&n&&(e.TgZ(0,"ng-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.libelle)}}function pe(n,s){if(1&n&&(e.TgZ(0,"ng-option",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function me(n,s){if(1&n&&(e.TgZ(0,"li",23),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.name," - ",t.phonesms,"")}}let ue=(()=>{class n{constructor(t,i,o,a,l,f){this.formBuilder=t,this.classeService=i,this.smsService=o,this.toaster=a,this.translateService=l,this.cdr=f,this.models=[],this.classes=[],this.rows=[]}ngOnInit(){this.formGroup=this.formBuilder.group({model:["",[h.kI.required]],message:["",[h.kI.maxLength(160),h.kI.minLength(1)]]}),this.initf()}initf(){this.smsService.getmodels().subscribe(t=>{this.models=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}),this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}onSubmit(){this.smsService.addSmsMultiple({data:{model:this.formGroup.value.model.id,message:this.formGroup.value.message,classe:this.mclasse}}).subscribe(i=>{this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}changeModel(){this.formGroup.patchValue({message:this.formGroup.value.model.message}),this.cdr.markForCheck()}changeClasse(){this.smsService.getsmsclasse(this.mclasse).subscribe(t=>{this.rows=t.data,this.cdr.markForCheck()},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.qu),e.Y36(se.U),e.Y36(z),e.Y36(A._W),e.Y36(x.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendmasse"]],features:[e._Bn([A._W])],decls:36,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-7"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","model",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"col-5"],[3,"ngModel","ngModelChange","change"],[1,"list-group","list-group-flush"],["class","list-group-item",3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms en masse"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"ng-select",11),e.NdJ("change",function(){return i.changeModel()}),e.YNc(15,he,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"label",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"textarea",15),e.TgZ(21,"p"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"button",17),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"div",9),e.TgZ(29,"label",10),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"ng-select",19),e.NdJ("ngModelChange",function(a){return i.mclasse=a})("change",function(){return i.changeClasse()}),e.YNc(33,pe,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(34,"ul",20),e.YNc(35,me,2,3,"li",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,10,"fields.model")),e.xp6(3),e.Q6J("ngForOf",i.models),e.xp6(3),e.Oqu(e.lcZ(19,12,"fields.message")),e.xp6(4),e.hij("",160-i.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(26,14,"action.send")),e.xp6(5),e.Oqu(e.lcZ(31,16,"fields.classe")),e.xp6(2),e.Q6J("ngModel",i.mclasse),e.xp6(1),e.Q6J("ngForOf",i.classes),e.xp6(2),e.Q6J("ngForOf",i.rows))},directives:[h._Y,h.JL,h.sg,S.MU,S.HK,I.w9,h.JJ,h.u,d.sg,h.Fj,S.oH,h.On,I.xv],pipes:[x.X$],styles:[""]}),n})();var p=r(8550);function ge(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.libelle," ")}function _e(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.message," ")}let fe=(()=>{class n{constructor(t,i,o,a,l){this.formBuilder=t,this.smsService=i,this.toaster=o,this.translateService=a,this.cdr=l,this.columnMode=p.hq.force,this.rows=[],this.models=[],this.classes=[]}ngOnInit(){this.formGroup=this.formBuilder.group({libelle:["",[h.kI.required]],message:["",[h.kI.maxLength(160),h.kI.minLength(1)]]}),this.initf()}initf(){this.smsService.getmodels().subscribe(t=>{this.rows=t.data,this.cdr.markForCheck()},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}onSubmit(){this.smsService.addModel({data:{libelle:this.formGroup.value.libelle,message:this.formGroup.value.message}}).subscribe(i=>{this.cdr.markForCheck(),this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.initf()},i=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}addmodel(t){this.formGroup.patchValue({message:this.formGroup.value.message+t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.qu),e.Y36(z),e.Y36(A._W),e.Y36(x.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-modelsms"]],viewQuery:function(t,i){if(1&t&&e.Gf(p.nE,5),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first)}},features:[e._Bn([A._W])],decls:76,vars:27,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-8"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","libelle","id","exampleFormControlInput1","placeholder","",1,"form-control"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-warning"],[1,"col-4"],[1,"badge","bg-dark",3,"click"],[1,"badge","bg-primary",3,"click"],[1,"badge","bg-success",3,"click"],[1,"badge","bg-danger",3,"click"],[1,"badge","bg-warning",3,"click"],[1,"row","mt-4"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Model sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",14),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"button",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"button",17),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"h4"),e._uU(31,"Mots cl\xe9s"),e.qZA(),e.TgZ(32,"div"),e.TgZ(33,"span",19),e.NdJ("click",function(){return i.addmodel("#name")}),e._uU(34,"Name"),e.qZA(),e.TgZ(35,"span",20),e.NdJ("click",function(){return i.addmodel("#classe")}),e._uU(36,"Classe"),e.qZA(),e.TgZ(37,"span",21),e.NdJ("click",function(){return i.addmodel("#rang")}),e._uU(38,"Rang"),e.qZA(),e.TgZ(39,"span",20),e.NdJ("click",function(){return i.addmodel("#moyenne")}),e._uU(40,"Moyenne"),e.qZA(),e.TgZ(41,"span",19),e.NdJ("click",function(){return i.addmodel("#moyclasse")}),e._uU(42,"Moyenne Classe"),e.qZA(),e.TgZ(43,"span",22),e.NdJ("click",function(){return i.addmodel("#moyfirst")}),e._uU(44,"Moyenne du Premier"),e.qZA(),e.TgZ(45,"span",21),e.NdJ("click",function(){return i.addmodel("#moylast")}),e._uU(46,"Moyenne du Denier"),e.qZA(),e.TgZ(47,"span",23),e.NdJ("click",function(){return i.addmodel("#matricule")}),e._uU(48,"Matricule"),e.qZA(),e.TgZ(49,"span",23),e.NdJ("click",function(){return i.addmodel("#evaluation")}),e._uU(50,"Evaluation"),e.qZA(),e.TgZ(51,"span",21),e.NdJ("click",function(){return i.addmodel("#trimestre")}),e._uU(52,"Trimestre"),e.qZA(),e.TgZ(53,"span",20),e.NdJ("click",function(){return i.addmodel("#yearschool")}),e._uU(54,"Annee scolaire"),e.qZA(),e.TgZ(55,"span",23),e.NdJ("click",function(){return i.addmodel("#amountremaing")}),e._uU(56,"Montant Restant"),e.qZA(),e.TgZ(57,"span",22),e.NdJ("click",function(){return i.addmodel("#amount")}),e._uU(58,"Montant pay\xe9"),e.qZA(),e.TgZ(59,"span",20),e.NdJ("click",function(){return i.addmodel("#datepaid")}),e._uU(60,"Date paiement"),e.qZA(),e.TgZ(61,"span",21),e.NdJ("click",function(){return i.addmodel("#amountscolarity")}),e._uU(62,"Montant Scolarite"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",24),e.TgZ(64,"div",4),e.TgZ(65,"h4",5),e._uU(66,"Listes des Modeles sms"),e.qZA(),e.qZA(),e.TgZ(67,"div",25),e.TgZ(68,"ngx-datatable",26,27),e.TgZ(70,"ngx-datatable-column",28),e.ALo(71,"translate"),e.YNc(72,ge,1,1,"ng-template",29),e.qZA(),e.TgZ(73,"ngx-datatable-column",28),e.ALo(74,"translate"),e.YNc(75,_e,1,1,"ng-template",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,15,"fields.libelle")),e.xp6(5),e.Oqu(e.lcZ(18,17,"fields.message")),e.xp6(4),e.hij("",160-i.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,19,"action.save")),e.xp6(3),e.Oqu(e.lcZ(28,21,"action.cancel")),e.xp6(41),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(2),e.s9C("name",e.lcZ(71,23,"fields.libelle")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(74,25,"fields.message")),e.Q6J("width",100))},directives:[h._Y,h.JL,h.sg,S.MU,S.HK,h.Fj,S.oH,h.JJ,h.u,p.nE,p.UC,p.vq],pipes:[x.X$],styles:["span[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();function Ce(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.recepteur," ")}function Ze(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.categorie.libelle," ")}function Te(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.categorie.montant," ")}function be(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.operateur," ")}function ve(n,s){1&n&&(e._uU(0),e.ALo(1,"date")),2&n&&e.hij(" ",e.xi3(1,1,s.row.created_at,"dd/MM/yyyy H:m")," ")}function Ae(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"span",14),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.qZA()),2&n){const t=s.row;e.Q6J("ngClass","active"===t.is_enabled?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass","active"===t.is_enabled?"bg-success":"bg-danger"),e.xp6(2),e.Oqu(t.is_enabled)}}let xe=(()=>{class n{constructor(t,i,o,a,l){this.formBuilder=t,this.smsService=i,this.toaster=o,this.translateService=a,this.cdr=l,this.columnMode=p.hq.force,this.rows=[]}ngOnInit(){this.initf()}initf(){this.smsService.gethistorique().subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.qu),e.Y36(z),e.Y36(A._W),e.Y36(x.sK),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-historique"]],viewQuery:function(t,i){if(1&t&&e.Gf(p.nE,5),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first)}},features:[e._Bn([A._W])],decls:30,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],[1,"text-capitalize"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Historique sms"),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"input",7),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"ngx-datatable",9,10),e.TgZ(12,"ngx-datatable-column",11),e.ALo(13,"translate"),e.YNc(14,Ce,1,1,"ng-template",12),e.qZA(),e.TgZ(15,"ngx-datatable-column",11),e.ALo(16,"translate"),e.YNc(17,Ze,1,1,"ng-template",12),e.qZA(),e.TgZ(18,"ngx-datatable-column",11),e.ALo(19,"translate"),e.YNc(20,Te,1,1,"ng-template",12),e.qZA(),e.TgZ(21,"ngx-datatable-column",11),e.ALo(22,"translate"),e.YNc(23,be,1,1,"ng-template",12),e.qZA(),e.TgZ(24,"ngx-datatable-column",11),e.ALo(25,"translate"),e.YNc(26,ve,2,4,"ng-template",12),e.qZA(),e.TgZ(27,"ngx-datatable-column",11),e.ALo(28,"translate"),e.YNc(29,Ae,4,3,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(2),e.s9C("name",e.lcZ(13,17,"fields.etablissement")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(16,19,"fields.campaign")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(19,21,"fields.phone")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(22,23,"fields.message")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(25,25,"fields.datecreation")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(28,27,"fields.status")),e.Q6J("width",70))},directives:[S.oH,p.nE,p.UC,p.vq,d.mk],pipes:[x.X$,d.uU],styles:[""]}),n})();var y=r(2471);function B(n,s){return n.filter(i=>(i=>{for(let o in i)if(null!=i[o]&&-1!==i[o].toString().toUpperCase().indexOf(s.toString().toUpperCase()))return!0})(i))}let P=(()=>{class n{constructor(t){this.http=t,this.apiUrl=C.N.API_URL+"chats"}getChatList(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatDetail(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatOne(t,i){return this.http.get(`${this.apiUrl}/${t}/${i}/getchat`)}updateConversation(t,i,o){return this.http.post(`${this.apiUrl}/conversation`,{data:{id:i,avatar:t.avatar,from:o,msgtype:t.msg_type,text:t.text,time:t.time,user:o}})}addChat(t){return this.http.post(`${this.apiUrl}/post`,t)}addChatMessage(t){return this.http.post(`${this.apiUrl}/msg`,t)}getstudentbyteacher(t){return this.http.get(`${this.apiUrl}/${t}/getstudents`)}getteacherbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getteachers`)}getstudentsbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getstudentsbystudent`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(w.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var U=r(3301),D=r(2),W=r(1452),$=r(2655),Q=r(1383),H=r(7871);const qe=["chatPS"];function Se(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.chat.name)}}function Me(n,s){if(1&n&&e._UZ(0,"avatar",28),2&n){const t=e.oxw(2).$implicit;e.Q6J("icon","feather icon-user")("src",t.avatar)}}function we(n,s){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,Me,1,2,"avatar",27),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.avatar.length>1)}}function Ee(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.text)}}function ye(n,s){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.text,e.LSH)("alt",t.text)}}function ke(n,s){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"span",32),e.TgZ(3,"u"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.text)}}function Je(n,s){if(1&n&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.time," ")}}const Oe=function(n,s,t){return{"msg-recipient":n,"msg-sent":s,"justify-content-center":t}},Ne=function(n){return{"no-avatar":n}},Ue=function(n){return{"p-3":n}};function Fe(n,s){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,we,2,1,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"div",22),e.YNc(4,Ee,2,1,"span",5),e.YNc(5,ye,1,2,"img",23),e.YNc(6,ke,5,1,"div",24),e.qZA(),e.qZA(),e.YNc(7,Je,2,1,"div",25),e.qZA()),2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.kEZ(8,Oe,t.fromuser!==i.currentuser.id,t.fromuser==i.currentuser.id,"date"==t.msg_type)),e.xp6(1),e.Q6J("ngIf",t.avatar),e.xp6(1),e.Q6J("ngClass",e.VKq(12,Ne,0==t.avatar.length)),e.xp6(1),e.Q6J("ngClass",e.VKq(14,Ue,"image"==t.msg_type)),e.xp6(1),e.Q6J("ngIf","text"==t.msg_type),e.xp6(1),e.Q6J("ngIf","image"==t.msg_type),e.xp6(1),e.Q6J("ngIf","file"==t.msg_type),e.xp6(1),e.Q6J("ngIf",t.time.length>1)}}function Qe(n,s){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,Fe,8,16,"div",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chat.msg)}}let K=(()=>{class n{constructor(t,i){this.chatSvc=t,this.cdr=i,this.updateChat=new e.vpe,this.openMobilePanel=new e.vpe,this.currentuser=JSON.parse(localStorage.getItem("auth"))}set chatId(t){this._id=t,this.fetchChatDetail(t)}get chatId(){return this._id}ngOnInit(){}ngAfterViewChecked(){this.scrollToBottom()}fetchChatDetail(t){this.chatSvc.getChatOne(t,this.currentuser.id).subscribe(i=>{this.chat=i.data,this.chatPS.directiveRef.scrollToBottom(),this.cdr.detectChanges()})}sendMessage(){const t={avatar:"",text:this.message,fromuser:this.currentuser.id,time:"",msg_type:"text"};this.message&&(this.chat.msg.push(t),this.chatSvc.updateConversation(t,this.chat.id,this.currentuser.id).subscribe(),this.updateChat.emit(this.currentuser.id),this.cdr.detectChanges()),this.message=""}scrollToBottom(){this.chatPS.directiveRef.scrollToBottom()}onMobilePanelOpen(){this.openMobilePanel.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["conversation"]],viewQuery:function(t,i){if(1&t&&e.Gf(qe,5),2&t){let o;e.iGM(o=e.CRH())&&(i.chatPS=o.first)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("conversation",!0)},inputs:{chatId:"chatId"},outputs:{updateChat:"updateChat",openMobilePanel:"openMobilePanel"},decls:20,vars:3,consts:[[1,"conversation-header"],[1,"d-flex","align-items-center"],[1,"d-block","d-lg-none","cursor-pointer","me-2","font-size-lg",3,"click"],[1,"feather","icon-menu"],[1,"mb-0"],[4,"ngIf"],[1,"conversation-body"],["chatPS",""],["class","p-4",4,"ngIf"],[1,"conversation-footer"],["type","text","placeholder","Enter your message here",1,"form-control","ms-2",3,"ngModel","ngModelChange","keydown.enter"],[1,"conversation-footer-icon","d-flex"],["href","javascript:void(0)",1,"mx-2"],[1,"las","la-paperclip"],[1,"las","la-smile"],[1,"btn","btn-primary","ms-2",3,"click"],[1,"feather","icon-send"],[1,"p-4"],["class","msg",3,"ngClass",4,"ngFor","ngForOf"],[1,"msg",3,"ngClass"],["class","ms-2",4,"ngIf"],[1,"bubble",3,"ngClass"],[1,"bubble-wrapper",3,"ngClass"],[3,"src","alt",4,"ngIf"],["class","d-flex align-items-center msg-file",4,"ngIf"],["class","fw-bold font-size-sm",4,"ngIf"],[1,"ms-2"],[3,"icon","src",4,"ngIf"],[3,"icon","src"],[3,"src","alt"],[1,"d-flex","align-items-center","msg-file"],[1,"feather","icon-file"],[1,"ms-2","fw-bold","text-link","cursor-pointer"],[1,"fw-bold","font-size-sm"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.NdJ("click",function(){return i.onMobilePanelOpen()}),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"h5",4),e.YNc(5,Se,2,1,"span",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"perfect-scrollbar",6,7),e.YNc(8,Qe,2,1,"div",8),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(a){return i.message=a})("keydown.enter",function(a){return i.sendMessage(),a.preventDefault()}),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"a",12),e._UZ(13,"i",13),e.qZA(),e.TgZ(14,"a",12),e._UZ(15,"i",14),e.qZA(),e.qZA(),e.TgZ(16,"button",15),e.NdJ("click",function(){return i.sendMessage()}),e.TgZ(17,"span"),e._uU(18,"Send"),e.qZA(),e._UZ(19,"i",16),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",i.chat),e.xp6(3),e.Q6J("ngIf",i.chat),e.xp6(2),e.Q6J("ngModel",i.message))},directives:[d.O5,Q.Vv,h.Fj,S.oH,h.JJ,h.On,d.sg,d.mk,H.A],encapsulation:2}),n})();var F=r(5690);const He=["openchateModal"];function Re(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function Ye(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Re,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const Le=function(n){return{active:n}};function Ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectChat(a.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,Ye,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(6,Le,t.id===i.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function Pe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function $e(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function je(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Ge(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Ve(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function ze(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function De(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function We(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Ke(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Xe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function et(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function tt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const nt=function(){return{backdrop:"static"}};let it=(()=>{class n{constructor(t,i,o,a,l,f,T,u,_){this.toaster=t,this.translateservice=i,this.chatSvc=o,this.modalService=a,this.cdr=l,this.route=f,this.router=T,this.professorService=u,this.personnelService=_,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth")),this.currentuser.roles[0]===y.W.STUDENT&&this.router.navigate(["/communication/chat-student"]),this.currentuser.roles[0]===y.W.TEACHER&&this.router.navigate(["/communication/chat-professor"]),this.currentuser.roles[0]===y.W.PARENT&&this.router.navigate(["/communication/chat-parent"])}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(i=>{this.chatList=i.data,this.temp=i.data,this.chatList.length&&this.chatList.forEach(o=>{3===o.id&&(this.selectedId=o.id)}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const i=t.target.value;this.chatList=i?B(this.temp,i):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.selectedId=o.data.id,this.openchateModal.hide(),this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(i=>{this.personnels=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(i=>{this.professors=i.data,this.cdr.markForCheck()},i=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(i)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(i=>{this.students=i.data,this.cdr.markForCheck()},i=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(i)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A._W),e.Y36(x.sK),e.Y36(P),e.Y36(U.tT),e.Y36(e.sBO),e.Y36(N.gz),e.Y36(N.F0),e.Y36(D.c),e.Y36(W.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,i){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(He,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.tableteacher=o.first),e.iGM(o=e.CRH())&&(i.openchateModal=o.first)}},features:[e._Bn([A._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(a){return i.serach(a)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,Ie,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(a){return i.updateChat(a)})("openMobilePanel",function(){return i.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(a){return i.onSelectTabS(a)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectStudent(a)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,Pe,2,1,"ng-template",25),e.YNc(28,$e,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,je,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Ge,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Ve,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(a){return i.onSelectTabT(a)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,ze,2,1,"ng-template",25),e.YNc(43,Be,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,De,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,We,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(a){return i.onSelectTabP(a)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,Ke,2,1,"ng-template",25),e.YNc(55,Xe,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,et,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,tt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return i.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",i.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",i.chatList),e.xp6(1),e.Q6J("chatId",i.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,nt)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",i.students)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.professors)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.personnels)("selected",i.selectedpersonnel)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[$.n,S.oH,Q.Vv,d.sg,K,U.oB,F.AH,F.wW,p.nE,p.UC,p.tk,p.vq,d.mk,H.A,d.O5],pipes:[x.X$],styles:[""]}),n})();var ee=r(2331);const ot=["openchateModal"];function st(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function at(n,s){if(1&n&&(e.ynx(0),e.YNc(1,st,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const lt=function(n){return{active:n}};function rt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectChat(a.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,at,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(6,lt,t.id===i.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function ct(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function dt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ht(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function pt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function mt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function gt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function _t(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function ft(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Ct(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matiere," ")}function Zt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Tt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function bt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function vt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const At=function(){return{backdrop:"static"}};let xt=(()=>{class n{constructor(t,i,o,a,l,f,T,u,_,m){this.toaster=t,this.translateservice=i,this.chatSvc=o,this.modalService=a,this.cdr=l,this.route=f,this.router=T,this.professorService=u,this.personnelService=_,this.studentService=m,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(i=>{this.chatList=i.data,this.temp=i.data,this.chatList.length&&this.chatList.forEach(o=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const i=t.target.value;this.chatList=i?B(this.temp,i):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(i=>{this.personnels=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabT(t){this.chatSvc.getteacherbystudent(this.currentuser.id).subscribe(i=>{this.professors=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabS(t){this.chatSvc.getstudentsbystudent(this.currentuser.id).subscribe(i=>{this.students=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A._W),e.Y36(x.sK),e.Y36(P),e.Y36(U.tT),e.Y36(e.sBO),e.Y36(N.gz),e.Y36(N.F0),e.Y36(D.c),e.Y36(W.G),e.Y36(ee.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatstudent"]],viewQuery:function(t,i){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(ot,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.tableteacher=o.first),e.iGM(o=e.CRH())&&(i.openchateModal=o.first)}},features:[e._Bn([A._W])],decls:68,vars:81,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(a){return i.serach(a)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,rt,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(a){return i.updateChat(a)})("openMobilePanel",function(){return i.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(a){return i.onSelectTabS(a)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectStudent(a)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,ct,2,1,"ng-template",25),e.YNc(28,dt,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,ht,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,pt,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,mt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(a){return i.onSelectTabT(a)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectStudent(a)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,ut,2,1,"ng-template",25),e.YNc(43,gt,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,_t,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,ft,1,1,"ng-template",26),e.qZA(),e.TgZ(50,"ngx-datatable-column",27),e.ALo(51,"translate"),e.YNc(52,Ct,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"tab",29),e.NdJ("selectTab",function(a){return i.onSelectTabP(a)}),e.TgZ(54,"ngx-datatable",22,30),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(56,"ngx-datatable-column",24),e.YNc(57,Zt,2,1,"ng-template",25),e.YNc(58,Tt,2,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,bt,1,1,"ng-template",26),e.qZA(),e.TgZ(62,"ngx-datatable-column",27),e.ALo(63,"translate"),e.YNc(64,vt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",31),e.TgZ(66,"button",32),e.NdJ("click",function(){return i.cancel()}),e._uU(67,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",i.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",i.chatList),e.xp6(1),e.Q6J("chatId",i.selectedId),e.xp6(1),e.Q6J("config",e.DdM(80,At)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",i.students)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,64,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,66,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,68,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.professors)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,70,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,72,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(51,74,"fields.matiere")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.personnels)("selected",i.selectedpersonnel)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(60,76,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(63,78,"fields.matricule")),e.Q6J("width",240))},directives:[$.n,S.oH,Q.Vv,d.sg,K,U.oB,F.AH,F.wW,p.nE,p.UC,p.tk,p.vq,d.mk,H.A,d.O5],pipes:[x.X$],styles:[""]}),n})();const qt=["openchateModal"];function St(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function Mt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,St,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const wt=function(n){return{active:n}};function Et(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectChat(a.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,Mt,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(6,wt,t.id===i.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function yt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function kt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Jt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Ot(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Nt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function Ut(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Ft(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Qt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Ht(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Rt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Yt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Lt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function It(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const Pt=function(){return{backdrop:"static"}};let $t=(()=>{class n{constructor(t,i,o,a,l,f,T,u,_,m){this.toaster=t,this.translateservice=i,this.chatSvc=o,this.modalService=a,this.cdr=l,this.route=f,this.router=T,this.professorService=u,this.personnelService=_,this.studentService=m,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(i=>{this.chatList=i.data,this.temp=i.data,this.chatList.length&&this.chatList.forEach(o=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const i=t.target.value;this.chatList=i?B(this.temp,i):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(i=>{this.personnels=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(i=>{this.professors=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(i=>{this.students=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A._W),e.Y36(x.sK),e.Y36(P),e.Y36(U.tT),e.Y36(e.sBO),e.Y36(N.gz),e.Y36(N.F0),e.Y36(D.c),e.Y36(W.G),e.Y36(ee.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatprofessor"]],viewQuery:function(t,i){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(qt,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.tableteacher=o.first),e.iGM(o=e.CRH())&&(i.openchateModal=o.first)}},features:[e._Bn([A._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(a){return i.serach(a)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,Et,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(a){return i.updateChat(a)})("openMobilePanel",function(){return i.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(a){return i.onSelectTabS(a)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectStudent(a)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,yt,2,1,"ng-template",25),e.YNc(28,kt,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,Jt,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Ot,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Nt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(a){return i.onSelectTabT(a)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,Ut,2,1,"ng-template",25),e.YNc(43,Ft,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,Qt,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,Ht,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(a){return i.onSelectTabP(a)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,Rt,2,1,"ng-template",25),e.YNc(55,Yt,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,Lt,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,It,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return i.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",i.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",i.chatList),e.xp6(1),e.Q6J("chatId",i.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,Pt)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",i.students)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.professors)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.personnels)("selected",i.selectedpersonnel)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[$.n,S.oH,Q.Vv,d.sg,K,U.oB,F.AH,F.wW,p.nE,p.UC,p.tk,p.vq,d.mk,H.A,d.O5],pipes:[x.X$],styles:[""]}),n})();const jt=["openchateModal"];function Gt(n,s){if(1&n&&(e.TgZ(0,"p",40),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function Vt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Gt,2,1,"p",39),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const zt=function(n){return{active:n}};function Bt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectChat(a.id)}),e._UZ(1,"avatar",33),e.TgZ(2,"div",34),e.TgZ(3,"h6",35),e._uU(4),e.qZA(),e.YNc(5,Vt,2,1,"ng-container",36),e.qZA(),e.TgZ(6,"div",37),e.TgZ(7,"span",38),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(6,zt,t.id===i.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function Dt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"input",42),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Wt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"input",42),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Kt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Xt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function en(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"input",42),e.NdJ("change",function(){const o=e.CHM(t);return o.selectFn(!o.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function tn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.TgZ(1,"input",42),e.NdJ("change",function(o){return e.CHM(t).onCheckboxChangeFn(o)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function nn(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function on(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const sn=function(){return{backdrop:"static"}},ln=[{path:"mail",data:{title:"Envoyer un message",hidePageHeader:!1},component:oe},{path:"chat",data:{title:"Chat",hidePageHeader:!1,authorities:[y.W.ADMIN,y.W.TEACHER,y.W.STUDENT,y.W.ECONOME,y.W.PARENT]},component:it},{path:"chat-student",data:{title:"Chat",hidePageHeader:!1,authorities:[y.W.STUDENT]},component:xt},{path:"chat-parent",data:{title:"Chat",hidePageHeader:!1,authorities:[y.W.PARENT]},component:(()=>{class n{constructor(t,i,o,a,l,f,T,u,_,m){this.toaster=t,this.translateservice=i,this.chatSvc=o,this.modalService=a,this.cdr=l,this.route=f,this.router=T,this.professorService=u,this.personnelService=_,this.studentService=m,this.columnMode=p.hq.force,this.SelectionType=p.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){console.log(t),this.chatSvc.getChatList(t).subscribe(i=>{this.chatList=i.data,this.temp=i.data,this.chatList.length&&this.chatList.forEach(o=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const i=t.target.value;this.chatList=i?B(this.temp,i):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(i=>{this.personnels=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(i=>{this.professors=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(i=>{this.students=i.data,this.cdr.markForCheck()},i=>{console.log(i)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(o=>{this.openchateModal.hide(),this.selectedId=o.data.id,this.cdr.markForCheck()},o=>{console.log(o)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A._W),e.Y36(x.sK),e.Y36(P),e.Y36(U.tT),e.Y36(e.sBO),e.Y36(N.gz),e.Y36(N.F0),e.Y36(D.c),e.Y36(W.G),e.Y36(ee.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatparent"]],viewQuery:function(t,i){if(1&t&&(e.Gf(p.nE,5),e.Gf(p.nE,5),e.Gf(jt,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.table=o.first),e.iGM(o=e.CRH())&&(i.tableteacher=o.first),e.iGM(o=e.CRH())&&(i.openchateModal=o.first)}},features:[e._Bn([A._W])],decls:50,vars:51,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","TEACHERS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return i.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(a){return i.serach(a)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,Bt,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(a){return i.updateChat(a)})("openMobilePanel",function(){return i.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(a){return i.onSelectTabT(a)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,Dt,2,1,"ng-template",25),e.YNc(28,Wt,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,Kt,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Xt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"tab",28),e.NdJ("selectTab",function(a){return i.onSelectTabP(a)}),e.TgZ(36,"ngx-datatable",22,29),e.NdJ("select",function(a){return i.onSelectPersonnel(a)}),e.TgZ(38,"ngx-datatable-column",24),e.YNc(39,en,2,1,"ng-template",25),e.YNc(40,tn,2,1,"ng-template",26),e.qZA(),e.TgZ(41,"ngx-datatable-column",27),e.ALo(42,"translate"),e.YNc(43,nn,1,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,on,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(47,"div",30),e.TgZ(48,"button",31),e.NdJ("click",function(){return i.cancel()}),e._uU(49,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",i.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",i.chatList),e.xp6(1),e.Q6J("chatId",i.selectedId),e.xp6(1),e.Q6J("config",e.DdM(50,sn)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",i.professors)("selected",i.selectedteacher)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,42,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,44,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",i.personnels)("selected",i.selectedpersonnel)("selectionType",i.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",i.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(42,46,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(45,48,"fields.matricule")),e.Q6J("width",240))},directives:[$.n,S.oH,Q.Vv,d.sg,K,U.oB,F.AH,F.wW,p.nE,p.UC,p.tk,p.vq,d.mk,H.A,d.O5],pipes:[x.X$],styles:[""]}),n})()},{path:"chat-professor",data:{title:"Chat",hidePageHeader:!1,authorities:[y.W.TEACHER]},component:$t},{path:"historique",data:{title:"Historique",hidePageHeader:!1},component:xe},{path:"modelsms",data:{title:"Model sms",hidePageHeader:!1},component:fe},{path:"sendmasse",data:{title:"Envoyer les sms en masse",hidePageHeader:!1},component:ue},{path:"sendone",data:{title:"Envoyer un sms",hidePageHeader:!1},component:de}];let rn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[N.Bz.forChild(ln)],N.Bz]}),n})();var cn=r(4079),dn=r(902),hn=r(8900),pn=r(2563),mn=r(743),un=r(8090),gn=r(7587),_n=r(4466),fn=r(7535),te=r(4762),X=r(9075);const Cn=[[["","quill-editor-toolbar",""]]],Zn=["[quill-editor-toolbar]"],ae={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},j=(n,s)=>n||s||"html",ne=new e.OlP("config");let G=(()=>{class n{constructor(t){this.config=t,this.count=0,this.config||(this.config={modules:ae})}getQuill(){return this.count++,!this.Quill&&1===this.count&&(this.$importPromise=new Promise(t=>(0,te.mG)(this,void 0,void 0,function*(){var i,o;const a=yield r.e(161).then(r.t.bind(r,2161,23));this.Quill=a.default?a.default:a,null===(i=this.config.customOptions)||void 0===i||i.forEach(l=>{const f=this.Quill.import(l.import);f.whitelist=l.whitelist,this.Quill.register(f,!0,this.config.suppressGlobalRegisterWarning)}),null===(o=this.config.customModules)||void 0===o||o.forEach(({implementation:l,path:f})=>{this.Quill.register(f,l,this.config.suppressGlobalRegisterWarning)}),t(this.Quill)}))),this.$importPromise}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ne))},n.\u0275prov=(0,e.Yz7)({factory:function(){return new n((0,e.LFG)(ne))},token:n,providedIn:"root"}),n})(),Tn=(()=>{class n{constructor(t,i,o,a,l,f,T){this.elementRef=t,this.domSanitizer=i,this.doc=o,this.platformId=a,this.renderer=l,this.zone=f,this.service=T,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.onEditorCreated=new e.vpe,this.onEditorChanged=new e.vpe,this.onContentChanged=new e.vpe,this.onSelectionChanged=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.disabled=!1,this.valueGetter=(u,_)=>{let m=_.querySelector(".ql-editor").innerHTML;("<p><br></p>"===m||"<div><br></div>"===m)&&(m=null);let b=m;const R=j(this.format,this.service.config.format);if("text"===R)b=u.getText();else if("object"===R)b=u.getContents();else if("json"===R)try{b=JSON.stringify(u.getContents())}catch(Y){b=u.getText()}return b},this.valueSetter=(u,_)=>{const m=j(this.format,this.service.config.format);if("html"===m)return this.sanitize&&(_=this.domSanitizer.sanitize(e.q3G.HTML,_)),u.clipboard.convert(_);if("json"===m)try{return JSON.parse(_)}catch(b){return[{insert:_}]}return _},this.selectionChangeHandler=(u,_,m)=>{const b=!u&&!!this.onModelTouched;!this.onBlur.observers.length&&!this.onFocus.observers.length&&!this.onSelectionChanged.observers.length&&!b||this.zone.run(()=>{null===u?this.onBlur.emit({editor:this.quillEditor,source:m}):null===_&&this.onFocus.emit({editor:this.quillEditor,source:m}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:_,range:u,source:m}),b&&this.onModelTouched()})},this.textChangeHandler=(u,_,m)=>{const b=this.quillEditor.getText(),R=this.quillEditor.getContents();let Y=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===Y||"<div><br></div>"===Y)&&(Y=null);const L=this.trackChanges||this.service.config.trackChanges,re=("user"===m||L&&"all"===L)&&!!this.onModelChange;!this.onContentChanged.observers.length&&!re||this.zone.run(()=>{re&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:R,delta:u,editor:this.quillEditor,html:Y,oldDelta:_,source:m,text:b})})},this.editorChangeHandler=(u,_,m,b)=>{if(this.onEditorChanged.observers.length)if("text-change"===u){const R=this.quillEditor.getText(),Y=this.quillEditor.getContents();let L=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===L||"<div><br></div>"===L)&&(L=null),this.zone.run(()=>{this.onEditorChanged.emit({content:Y,delta:_,editor:this.quillEditor,event:u,html:L,oldDelta:m,source:b,text:R})})}else this.onEditorChanged.emit({editor:this.quillEditor,event:u,oldRange:m,range:_,source:b})}}static normalizeClassNames(t){return t.trim().split(" ").reduce((o,a)=>{const l=a.trim();return l&&o.push(l),o},[])}ngAfterViewInit(){return(0,te.mG)(this,void 0,void 0,function*(){if((0,d.PM)(this.platformId))return;const t=yield this.service.getQuill();this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const i=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),o=Object.assign({},this.modules||this.service.config.modules);i?o.toolbar=i:void 0===o.toolbar&&(o.toolbar=ae.toolbar);let a=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===a&&(a="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(m=>{this.renderer.setStyle(this.editorElem,m,this.styles[m])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(m=>{const b=t.import(m.import);b.whitelist=m.whitelist,t.register(b,!0)}),this.customModules.forEach(({implementation:m,path:b})=>{t.register(b,m)});let l=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;l||(l=this.service.config.bounds?this.service.config.bounds:this.doc.body);let f=this.debug;!f&&!1!==f&&this.service.config.debug&&(f=this.service.config.debug);let T=this.readOnly;!T&&!1!==this.readOnly&&(T=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let u=this.scrollingContainer;!u&&null!==this.scrollingContainer&&(u=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let _=this.formats;if(!_&&void 0===_&&(_=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{this.quillEditor=new t(this.editorElem,{bounds:l,debug:f,formats:_,modules:o,placeholder:a,readOnly:T,scrollingContainer:u,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")})}),this.content){const m=j(this.format,this.service.config.format);if("object"===m)this.quillEditor.setContents(this.content,"silent");else if("text"===m)this.quillEditor.setText(this.content,"silent");else if("json"===m)try{this.quillEditor.setContents(JSON.parse(this.content),"silent")}catch(b){this.quillEditor.setText(this.content,"silent")}else{this.sanitize&&(this.content=this.domSanitizer.sanitize(e.q3G.HTML,this.content));const b=this.quillEditor.clipboard.convert(this.content);this.quillEditor.setContents(b,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.quillEditor.on("editor-change",this.editorChangeHandler),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.quillEditor.on("text-change",this.textChangeHandler),setTimeout(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})})}ngOnDestroy(){this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandler),this.quillEditor.off("editor-change",this.editorChangeHandler))}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.styles){const i=t.styles.currentValue,o=t.styles.previousValue;o&&Object.keys(o).forEach(a=>{this.renderer.removeStyle(this.editorElem,a)}),i&&Object.keys(i).forEach(a=>{this.renderer.setStyle(this.editorElem,a,this.styles[a])})}if(t.classes){const i=t.classes.currentValue,o=t.classes.previousValue;o&&this.removeClasses(o),i&&this.addClasses(i)}}}addClasses(t){n.normalizeClassNames(t).forEach(i=>{this.renderer.addClass(this.editorElem,i)})}removeClasses(t){n.normalizeClassNames(t).forEach(i=>{this.renderer.removeClass(this.editorElem,i)})}writeValue(t){this.content=t;const i=j(this.format,this.service.config.format);if(this.quillEditor){if(t)return void("text"===i?this.quillEditor.setText(t):this.quillEditor.setContents(this.valueSetter(this.quillEditor,this.content)));this.quillEditor.setText("")}}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let i=!0;const o=this.quillEditor.getText(),a=this.trimOnValidation?o.trim().length:1===o.length&&0===o.trim().length?0:o.length-1;return this.minLength&&a&&a<this.minLength&&(t.minLengthError={given:a,minLength:this.minLength},i=!1),this.maxLength&&a>this.maxLength&&(t.maxLengthError={given:a,maxLength:this.maxLength},i=!1),this.required&&!a&&(t.requiredError={empty:!0},i=!1),i?null:t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(X.H7),e.Y36(d.K0),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(G))},n.\u0275dir=e.lG2({type:n,inputs:{required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",customOptions:"customOptions",customModules:"customModules",preserveWhitespace:"preserveWhitespace",trimOnValidation:"trimOnValidation",valueGetter:"valueGetter",valueSetter:"valueSetter",format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges",classes:"classes"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[e.TTD]}),n})(),le=(()=>{class n extends Tn{constructor(t,i,o,a,l,f,T){super(t,i,o,a,l,f,T)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(X.H7),e.Y36(d.K0),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["quill-editor"]],features:[e._Bn([{multi:!0,provide:h.JU,useExisting:(0,e.Gpc)(()=>n)},{multi:!0,provide:h.Cf,useExisting:(0,e.Gpc)(()=>n)}]),e.qOj],ngContentSelectors:Zn,decls:1,vars:0,template:function(t,i){1&t&&(e.F$t(Cn),e.Hsn(0))},encapsulation:2}),n})(),bn=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:ne,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[G],imports:[[d.ez]]}),n})();function vn(n,s){1&n&&(e.TgZ(0,"option",18),e._uU(1,"Etudiants"),e.qZA())}function An(n,s){1&n&&(e.TgZ(0,"option",19),e._uU(1,"Parents"),e.qZA())}function xn(n,s){if(1&n&&(e.TgZ(0,"ng-option",26),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function qn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"label",20),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"ng-select",21),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().mclasse=o})("change",function(){return e.CHM(t),e.oxw().changeClasse()}),e.YNc(6,xn,2,2,"ng-option",22),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"div",23),e.TgZ(9,"input",24),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().msendall=o}),e.qZA(),e.TgZ(10,"label",25),e._uU(11," Send all "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"fields.classe")),e.xp6(3),e.Q6J("ngModel",t.mclasse),e.xp6(1),e.Q6J("ngForOf",t.classes),e.xp6(3),e.Q6J("ngModel",t.msendall)}}function Sn(n,s){if(1&n&&(e.TgZ(0,"ng-option",26),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Mn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"label",2),e._uU(2,"To:"),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"ng-select",27),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().mto=o})("change",function(){return e.CHM(t),e.oxw().changeClasse()}),e.YNc(5,Sn,2,2,"ng-option",22),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.mto),e.xp6(1),e.Q6J("ngForOf",t.rows)}}const wn=function(){return{height:"100px"}};let En=(()=>{class n{constructor(t,i,o,a,l){this.classeService=t,this.translateService=i,this.cdr=o,this.toaster=a,this.mailService=l,this.classes=[],this.users=[],this.mclasse=null,this.rows=[],this.editorConfig={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{align:[]}],["link","image"]]},this.currentuser=JSON.parse(localStorage.getItem("auth")),console.log(this.currentuser.roles[0]),this.currentuser.roles[0]==["ROLE_PARENT"]&&(this.isuserparent=!0)}ngOnInit(){}changeClasse(){this.mailService.getuserbyname(this.mclasse).subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}changeRole(){switch("student"==this.mrole&&this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}),this.mrole){case"student":this.classeService.getClasses().subscribe(t=>{this.classes=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")});break;case"professor":this.mclasse=null,this.mailService.getuserbyname("professor").subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")});break;case"personnel":this.mclasse=null,this.mailService.getuserbyname("personnel").subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")});break;case"parent":this.mclasse=null,this.mailService.getuserbyname("parent").subscribe(t=>{this.rows=t.data},t=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}sendmessage(){const t={data:{subject:this.msubjet,message:this.mmessage,classe:this.mclasse,receiver:this.mto,sender:this.currentuser.id}};console.log(t),this.mailService.addMail(t).subscribe(i=>{this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(se.U),e.Y36(x.sK),e.Y36(e.sBO),e.Y36(A._W),e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mail-compose"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("mail-compose",!0)},features:[e._Bn([A._W])],decls:29,vars:14,consts:[[1,"p-4"],[1,"row","mb-3"],["for","sentTo",1,"col","col-form-label",2,"max-width","90px"],[1,"col"],["id","inputState",1,"form-select",3,"ngModel","ngModelChange","change"],["selected",""],["value","student",4,"ngIf"],["value","parent",4,"ngIf"],["value","professor"],["value","personnel"],["class","row mb-3",4,"ngIf"],["for","subject",1,"col","col-form-label",2,"max-width","90px"],["type","text","id","subject",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],["placeholder","",1,"w-100","d-block",3,"ngModel","modules","ngModelChange"],[1,"mt-6","pt-3","text-end"],["type","submit",1,"btn","btn-secondary","me-2"],["type","submit",1,"btn","btn-primary",3,"click"],["value","student"],["value","parent"],[1,"col","col-form-label",2,"max-width","90px"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","id","gridCheck",1,"form-check-input",3,"ngModel","ngModelChange"],["for","gridCheck",1,"form-check-label"],[3,"value"],["id","sentTo",3,"ngModel","ngModelChange","change"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"label",2),e._uU(3,"Role:"),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"select",4),e.NdJ("ngModelChange",function(a){return i.mrole=a})("change",function(){return i.changeRole()}),e.TgZ(6,"option",5),e._uU(7,"Choose..."),e.qZA(),e.YNc(8,vn,2,0,"option",6),e.YNc(9,An,2,0,"option",7),e.TgZ(10,"option",8),e._uU(11,"Enseignants"),e.qZA(),e.TgZ(12,"option",9),e._uU(13,"Personnels"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(14,qn,12,6,"div",10),e.YNc(15,Mn,6,2,"div",10),e.TgZ(16,"div",1),e.TgZ(17,"label",11),e._uU(18,"Subject:"),e.qZA(),e.TgZ(19,"div",3),e.TgZ(20,"input",12),e.NdJ("ngModelChange",function(a){return i.msubjet=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",13),e.TgZ(22,"quill-editor",14),e.NdJ("ngModelChange",function(a){return i.mmessage=a}),e.qZA(),e.qZA(),e.TgZ(23,"div",15),e.TgZ(24,"button",16),e._uU(25,"Annuler"),e.qZA(),e.TgZ(26,"button",17),e.NdJ("click",function(){return i.sendmessage()}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngModel",i.mrole),e.xp6(3),e.Q6J("ngIf",!i.isuserparent),e.xp6(1),e.Q6J("ngIf",!i.isuserparent),e.xp6(5),e.Q6J("ngIf","student"==i.mrole),e.xp6(1),e.Q6J("ngIf",!i.msendall),e.xp6(5),e.Q6J("ngModel",i.msubjet),e.xp6(2),e.Akn(e.DdM(13,wn)),e.Q6J("ngModel",i.mmessage)("modules",i.editorConfig),e.xp6(5),e.Oqu(e.lcZ(28,11,"action.send")))},directives:[h.EJ,h.JJ,h.On,h.YN,h.Kr,d.O5,h.Fj,S.oH,le,I.w9,d.sg,h.Wl,I.xv],pipes:[x.X$],encapsulation:2}),n})();function yn(n,s){if(1&n&&(e.TgZ(0,"a",24),e.TgZ(1,"div",3),e.TgZ(2,"div",25),e._UZ(3,"i",26),e.qZA(),e.TgZ(4,"div"),e.TgZ(5,"h6",8),e._uU(6),e.qZA(),e.TgZ(7,"span",27),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=s.$implicit;e.xp6(6),e.Oqu(t.file),e.xp6(2),e.Oqu(t.size)}}function kn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showInput()}),e._uU(1," Start typing to reply... "),e.qZA()}}const Jn=function(){return{height:"100px"}};function On(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"quill-editor",29),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw(2).mmessage=o}),e.qZA(),e.TgZ(2,"div",30),e.TgZ(3,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideInput()}),e._uU(4,"Discard"),e.qZA(),e.TgZ(5,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.reply(o.mail)}),e._uU(6,"Reply"),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Akn(e.DdM(4,Jn)),e.Q6J("ngModel",t.mmessage)("modules",t.editorConfig)}}function Nn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"perfect-scrollbar",1),e.TgZ(1,"div"),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().onMobileContentToggleClick()}),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"avatar",6),e.TgZ(8,"div",7),e.TgZ(9,"div",3),e.TgZ(10,"h6",8),e._uU(11),e.qZA(),e.TgZ(12,"span",9),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"span",10),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"a",12),e._UZ(18,"i",13),e.qZA(),e.TgZ(19,"a",12),e._UZ(20,"i",14),e.qZA(),e.TgZ(21,"a",12),e._UZ(22,"i",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"h5",17),e._uU(25),e.qZA(),e._UZ(26,"p",18),e.TgZ(27,"div",19),e.YNc(28,yn,9,2,"a",20),e.qZA(),e.TgZ(29,"div",21),e.YNc(30,kn,2,0,"div",22),e.YNc(31,On,7,5,"div",23),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("size",35)("src",t.mail.avatar),e.xp6(4),e.Oqu(t.mail.name),e.xp6(2),e.hij("<",t.mail.mail,">"),e.xp6(2),e.Oqu(t.mail.date),e.xp6(10),e.Oqu(t.mail.title),e.xp6(1),e.Q6J("innerHTML",t.mail.content,e.oJD),e.xp6(2),e.Q6J("ngForOf",t.mail.attachment),e.xp6(2),e.Q6J("ngIf",!t.replyInput),e.xp6(1),e.Q6J("ngIf",t.replyInput)}}let Un=(()=>{class n{constructor(t,i,o,a,l){this.mailSvc=t,this.translateService=i,this.cdr=o,this.toaster=a,this.mailService=l,this.onMobileContentClose=new e.vpe,this.loading=!1,this.replyInput=!1,this.editorConfig={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{align:[]}],["link","image"]]},this.currentuser=JSON.parse(localStorage.getItem("auth"))}set mailId(t){this._id=t,this.getMailDetail(t)}get mailId(){return this._id}ngOnInit(){}getMailDetail(t){this.loading=!0,this.mailSvc.getMailContent(t).subscribe(i=>{this.mail=i.data,this.loading=!1,this.cdr.detectChanges()})}showInput(){this.replyInput=!0}hideInput(){this.replyInput=!1}onMobileContentToggleClick(){this.onMobileContentClose.emit()}reply(t){const i={data:{subject:this.mail.title,message:this.mmessage,classe:null,receiver:t.sent,sender:this.currentuser.id}};console.log(i),this.mailService.addMail(i).subscribe(o=>{this.toaster.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},o=>{this.toaster.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(x.sK),e.Y36(e.sBO),e.Y36(A._W),e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mail-content"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("mail-content",!0)},inputs:{mailId:"mailId"},outputs:{onMobileContentClose:"onMobileContentClose"},features:[e._Bn([A._W])],decls:1,vars:1,consts:[["class","mail-content-wrapper",4,"ngIf"],[1,"mail-content-wrapper"],[1,"mail-content-header"],[1,"d-flex","align-items-center"],[1,"me-2","d-block","d-lg-none","cursor-pointer",3,"click"],[1,"feather","icon-arrow-left","font-size-lg"],[3,"size","src"],[1,"ms-2"],[1,"mb-0"],[1,"d-none","d-md-block"],[1,"text-muted"],[1,"mail-content-action"],["href","javascript:void(0)",1,"ms-2"],[1,"las","la-reply"],[1,"las","la-reply-all"],[1,"lar","la-trash-alt"],[1,"mail-content-body","mt-5"],[1,"mb-4"],[3,"innerHTML"],[1,"d-md-flex","mt-4"],["class","mail-content-file","style","min-width: 200px",4,"ngFor","ngForOf"],[1,"mt-5"],["class","mail-content-reply",3,"click",4,"ngIf"],[4,"ngIf"],[1,"mail-content-file",2,"min-width","200px"],[1,"me-2"],[1,"las","la-file-download","font-size-lg"],[1,"font-size-13","text-muted"],[1,"mail-content-reply",3,"click"],["placeholder","",1,"w-100","d-block",3,"ngModel","modules","ngModelChange"],[1,"mt-5","pt-3","text-end"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&e.YNc(0,Nn,32,10,"perfect-scrollbar",0),2&t&&e.Q6J("ngIf",i.mail)},directives:[d.O5,Q.Vv,H.A,d.sg,le,h.JJ,h.On],encapsulation:2}),n})();var Fn=r(1875),Qn=r(519),Hn=r(2201);function Rn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"input",10),e.NdJ("change",function(o){return e.CHM(t),e.oxw().selectAll(o)}),e.qZA(),e.qZA()}}function Yn(n,s){if(1&n&&(e.TgZ(0,"a",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function Ln(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"i",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteSelectedMail()}),e.qZA(),e.qZA(),e.TgZ(3,"dropdown",14),e.NdJ("click",function(o){return e.CHM(t),e.MAs(7).toggle(o)}),e.TgZ(4,"div",15),e._UZ(5,"i",16),e.qZA(),e.TgZ(6,"dropdown-menu",17,18),e.TgZ(8,"div",19),e.TgZ(9,"span",20),e._uU(10,"Move to..."),e.qZA(),e.qZA(),e.YNc(11,Yn,2,1,"a",21),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.catogories)}}function In(n,s){1&n&&(e.TgZ(0,"div",23),e._UZ(1,"i",24),e.TgZ(2,"span"),e._uU(3,"No mail in list"),e.qZA(),e.qZA())}function Pn(n,s){1&n&&(e.TgZ(0,"div",40),e._UZ(1,"i",41),e.qZA())}const $n=function(n){return{active:n}};function jn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(o){const l=e.CHM(t).$implicit;return e.oxw().onRowClick(l.id,o)}),e.TgZ(1,"div",1),e.TgZ(2,"div",26),e.TgZ(3,"input",27),e.NdJ("change",function(o){const l=e.CHM(t).$implicit;return e.oxw().onCheckboxChangeFn(l.id,o)}),e.qZA(),e.qZA(),e.TgZ(4,"div",28),e.TgZ(5,"div",1),e._UZ(6,"avatar",29),e.TgZ(7,"div",30),e.TgZ(8,"span",31),e._uU(9),e.qZA(),e.TgZ(10,"h6",32),e._uU(11),e.ALo(12,"slice"),e.qZA(),e.TgZ(13,"p",33),e._uU(14),e.ALo(15,"slice"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",34),e.TgZ(17,"div",35),e._uU(18),e.qZA(),e.TgZ(19,"div",36),e.YNc(20,Pn,2,0,"div",37),e.TgZ(21,"div",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().onMark(a.id,a.marked)}),e._UZ(22,"i",39),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(20,$n,t.id===i.selectedMail)),e.xp6(3),e.Q6J("checked",t.checked),e.xp6(3),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.AsE(" ",e.Dn7(12,12,t.title,0,20)," ",t.title.length>20?"...":""," "),e.xp6(3),e.AsE(" ",e.Dn7(15,16,i.formatBody(t.content),0,50)," ",i.formatBody(t.content).length>50?"...":""," "),e.xp6(4),e.Oqu(t.date),e.xp6(2),e.Q6J("ngIf",t.attachment.length>0),e.xp6(2),e.Q6J("ngClass",1===t.marked?"lar":"las text-warning")}}let Gn=(()=>{class n{constructor(t,i){this.mailSvc=t,this.cdr=i,this.data=[],this.loading=!1,this.showMailContent=!1,this.rowClick=new e.vpe,this.onMobilePanelOpen=new e.vpe,this.selected=[],this.displayNoMailMessage=!1,this.ColumnMode=p.hq,this.SelectionType=p.RT,this.catogories=ie}ngOnInit(){}onMark(t,i){let o;0===i&&(o=1),1===i&&(o=0);const a=this.data.map(l=>(l.id===t&&(l.marked=o),l));this.data=a,this.mailSvc.updateMark(t,o).subscribe()}onRowClick(t,i){this.rowClick.emit(t),i.stopPropagation()}formatBody(t){return t.replace(/<(?:.|\n)*?>/gm," ")}onCheckboxChangeFn(t,i){i.stopPropagation(),i.target.checked&&!this.selected.includes(t)?this.selected.push(t):this.selected=this.selected.filter(o=>o!==t)}deleteSelectedMail(){this.selected.length>0&&this.mailSvc.deleteMail(this.selected).subscribe(t=>{this.data=t,this.selected=[],0===this.data.length&&(this.displayNoMailMessage=!0),this.cdr.detectChanges()})}selectAll(t){const i=t.target.checked;this.data=this.data.map(o=>(i?this.selected.push(o.id):this.selected=[],o.checked=i,o))}onMobilePanelToggleClick(){this.onMobilePanelOpen.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mail-list"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("mail-list",!0)},inputs:{data:"data",loading:"loading",showMailContent:"showMailContent",selectedMail:"selectedMail"},outputs:{rowClick:"rowClick",onMobilePanelOpen:"onMobilePanelOpen"},decls:9,vars:4,consts:[[1,"mail-list-header"],[1,"d-flex"],["class","form-check mb-0",4,"ngIf"],[1,"d-block","d-lg-none","cursor-pointer","ms-2",3,"click"],[1,"feather","icon-menu"],["class","d-flex align-items-center",4,"ngIf"],[1,"mail-list-body"],["class","text-center mt-4",4,"ngIf"],["class","mail-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"change"],[1,"d-flex","align-items-center"],[1,"mail-list-icon-delete","me-2"],[1,"feather","icon-trash","me-1",3,"click"],["dropdownClass","mail-list-icon-folder",3,"click"],[1,"toggle-wrapper"],[1,"feather","icon-folder","me-1"],["alignment","right"],["moveTo",""],[1,"dropdown-header"],[1,"fw-bold","text-dark"],["dropdownItem","",4,"ngFor","ngForOf"],["dropdownItem",""],[1,"text-center","mt-4"],[1,"feather","icon-alert-circle","ms-2"],[1,"mail-list-row",3,"ngClass","click"],[1,"form-check",2,"margin-top","10px"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"mail-list-row-detail","ms-2"],[1,"mt-1",2,"min-width","35px",3,"size","src"],[1,"ms-2"],[1,"text-muted","fw-bold","font-size-sm"],[1,""],[1,"mb-0"],[1,"me-2","d-flex","flex-column","justify-content-between",2,"min-width","55px"],[1,"font-size-sm","mt-1","text-end"],[1,"d-flex","justify-content-end"],["class","mail-list-clip me-2",4,"ngIf"],[1,"mail-list-star",3,"click"],[1,"la-star",3,"ngClass"],[1,"mail-list-clip","me-2"],[1,"las","la-paperclip"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,Rn,2,0,"div",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return i.onMobilePanelToggleClick()}),e._UZ(4,"i",4),e.qZA(),e.qZA(),e.YNc(5,Ln,12,1,"div",5),e.qZA(),e.TgZ(6,"perfect-scrollbar",6),e.YNc(7,In,4,0,"div",7),e.YNc(8,jn,23,22,"div",8),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!i.displayNoMailMessage),e.xp6(3),e.Q6J("ngIf",i.selected.length>0),e.xp6(2),e.Q6J("ngIf",i.displayNoMailMessage),e.xp6(1),e.Q6J("ngForOf",i.data))},directives:[d.O5,Q.Vv,d.sg,S.oH,Fn.L,Qn.h,Hn.h,d.mk,H.A],pipes:[d.OU],encapsulation:2}),n})(),Vn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,rn,_n.m,cn.h,U.zk,I.A0,dn.n,p.xD,hn.F,fn.A,Q.Xd,bn.forRoot(),pn.k,S.VN,S.VN.forRoot(),mn.mr,F.P4.forRoot(),A.Rh.forRoot(),un.d,gn.HC]]}),n})();e.B6R(oe,[$.n,d.sg,d.mk,d.PC,d.O5,Gn,Un,En],[])},2331:(V,k,r)=>{r.d(k,{V:()=>M});var d=r(1841),e=r(2340),w=r(5917),C=r(3342),v=r(5304),q=r(3018);let M=(()=>{class J{constructor(Z){this.http=Z,this.apiUrl=e.N.API_URL+"students",this.apiUrlfile=e.N.API_URL+"upload",this.apiUrlchangepassword=e.N.API_URL+"changepassword",this.httpOptions={headers:new d.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getStudents(){return this.http.get(this.apiUrl).pipe((0,C.b)(Z=>console.log("fetched getStudents")),(0,v.K)(this.handleError("getStudents",[])))}getStudentsPDF(){return this.http.get(this.apiUrl+"/listpdf")}getStudent(Z){return this.http.get(`${this.apiUrl}/${Z}`).pipe((0,C.b)(g=>console.log(`fetched product id=${Z}`)),(0,v.K)(this.handleError(`getProduct id=${Z}`)))}addStudent(Z){return this.http.post(this.apiUrl,Z,this.httpOptions)}upload(Z){return this.http.post(this.apiUrlfile,Z,this.httpOptions)}changepassword(Z){return this.http.post(this.apiUrlchangepassword,Z,this.httpOptions)}editStudent(Z,c){return this.http.put(`${this.apiUrl}/${c}`,Z,this.httpOptions)}deleteStudent(Z){return this.http.delete(`${this.apiUrl}/${Z}`,this.httpOptions)}studentcompte(Z){return this.http.get(`${this.apiUrl}/${Z}/compte`,this.httpOptions)}importStudent(Z){return this.http.post(this.apiUrl+"/import",Z,this.httpOptions).pipe((0,C.b)(c=>console.log(`import student w/ id=${Z.id}`)),(0,v.K)(this.handleError("import student")))}importRegisterStudent(Z){return this.http.post(this.apiUrl+"/importregister",Z,this.httpOptions).pipe((0,C.b)(c=>console.log(`import student w/ id=${Z.id}`)),(0,v.K)(this.handleError("import student")))}handleError(Z="operation",c){return g=>(console.error(g),(0,w.of)(c))}}return J.\u0275fac=function(Z){return new(Z||J)(q.LFG(d.eN))},J.\u0275prov=q.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()}}]);