"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[671],{5671:(Y,J,l)=>{l.r(J),l.d(J,{CommunicationModule:()=>Nt});var h=l(8583),g=l(8932),r=l(3679),e=l(3018),m=l(7552),u=l(9790);let y=(()=>{class n{constructor(t){this.formBuilder=t}ngOnInit(){this.formGroup=this.formBuilder.group({phone:["",[r.kI.required]],message:["",[r.kI.maxLength(160),r.kI.minLength(1)]]})}onSubmit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendone"]],decls:26,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-center"],[1,"mb-2","fw-bolder"],[1,"row","justify-content-center"],[1,"col-md-8"],[3,"formGroup","validSubmit"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","formControlName","phone","id","exampleFormControlInput1","placeholder","+237",1,"form-control"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"label",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",13),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",14),e.TgZ(23,"button",15),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,5,"fields.phone")),e.xp6(5),e.Oqu(e.lcZ(18,7,"fields.message")),e.xp6(4),e.hij("",160-o.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,9,"actions.send")))},directives:[r._Y,r.JL,r.sg,m.MU,r.Fj,m.oH,r.JJ,r.u],pipes:[u.X$],styles:[""]}),n})();var f=l(6640);function M(n,s){if(1&n&&(e.TgZ(0,"ng-option",21),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function d(n,s){if(1&n&&(e.TgZ(0,"ng-option",21),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function _(n,s){if(1&n&&(e.TgZ(0,"li",22),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE("",t.name," - ",t.phonesms,"")}}let v=(()=>{class n{constructor(t){this.formBuilder=t,this.models=[],this.classes=[],this.rows=[]}ngOnInit(){this.formGroup=this.formBuilder.group({model:["",[r.kI.required]],message:["",[r.kI.maxLength(160),r.kI.minLength(1)]]})}onSubmit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sendmasse"]],decls:36,vars:17,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-8"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","model"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],[1,"col-4"],[1,"list-group","list-group-flush"],["class","list-group-item",3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"list-group-item",3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer sms en masse"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"ng-select",11),e.YNc(15,M,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"label",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"textarea",15),e.TgZ(21,"p"),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"button",17),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"div",9),e.TgZ(29,"label",10),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"ng-select"),e.YNc(33,d,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(34,"ul",19),e.YNc(35,_,2,3,"li",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,9,"fields.model")),e.xp6(3),e.Q6J("ngForOf",o.models),e.xp6(3),e.Oqu(e.lcZ(19,11,"fields.message")),e.xp6(4),e.hij("",160-o.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(26,13,"action.send")),e.xp6(5),e.Oqu(e.lcZ(31,15,"fields.classe")),e.xp6(3),e.Q6J("ngForOf",o.classes),e.xp6(2),e.Q6J("ngForOf",o.rows))},directives:[r._Y,r.JL,r.sg,m.MU,m.HK,f.w9,r.JJ,r.u,h.sg,r.Fj,m.oH,f.xv],pipes:[u.X$],styles:[""]}),n})(),L=(()=>{class n{constructor(t){this.formBuilder=t,this.models=[],this.classes=[]}ngOnInit(){this.formGroup=this.formBuilder.group({libelle:["",[r.kI.required]],message:["",[r.kI.maxLength(160),r.kI.minLength(1)]]})}onSubmit(){}addmodel(t){this.formGroup.patchValue({message:this.formGroup.value.message+t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-modelsms"]],decls:63,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"row"],[1,"col-8"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","libelle","id","exampleFormControlInput1","placeholder","",1,"form-control"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["formControlName","message","id","exampleFormControlTextarea1","rows","4",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-warning"],[1,"col-4"],[1,"badge","bg-dark",3,"click"],[1,"badge","bg-primary",3,"click"],[1,"badge","bg-success",3,"click"],[1,"badge","bg-danger",3,"click"],[1,"badge","bg-warning",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Model sms"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("validSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",11),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"label",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"textarea",14),e.TgZ(20,"p"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"button",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"button",17),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",18),e.TgZ(30,"h4"),e._uU(31,"Mots cl\xe9s"),e.qZA(),e.TgZ(32,"div"),e.TgZ(33,"span",19),e.NdJ("click",function(){return o.addmodel("#name")}),e._uU(34,"Name"),e.qZA(),e.TgZ(35,"span",20),e.NdJ("click",function(){return o.addmodel("#classe")}),e._uU(36,"Classe"),e.qZA(),e.TgZ(37,"span",21),e.NdJ("click",function(){return o.addmodel("#rang")}),e._uU(38,"Rang"),e.qZA(),e.TgZ(39,"span",20),e.NdJ("click",function(){return o.addmodel("#moyenne")}),e._uU(40,"Moyenne"),e.qZA(),e.TgZ(41,"span",19),e.NdJ("click",function(){return o.addmodel("#moyclasse")}),e._uU(42,"Moyenne Classe"),e.qZA(),e.TgZ(43,"span",22),e.NdJ("click",function(){return o.addmodel("#moyfirst")}),e._uU(44,"Moyenne du Premier"),e.qZA(),e.TgZ(45,"span",21),e.NdJ("click",function(){return o.addmodel("#moylast")}),e._uU(46,"Moyenne du Denier"),e.qZA(),e.TgZ(47,"span",23),e.NdJ("click",function(){return o.addmodel("#matricule")}),e._uU(48,"Matricule"),e.qZA(),e.TgZ(49,"span",23),e.NdJ("click",function(){return o.addmodel("#evaluation")}),e._uU(50,"Evaluation"),e.qZA(),e.TgZ(51,"span",21),e.NdJ("click",function(){return o.addmodel("#trimestre")}),e._uU(52,"Trimestre"),e.qZA(),e.TgZ(53,"span",20),e.NdJ("click",function(){return o.addmodel("#yearschool")}),e._uU(54,"Annee scolaire"),e.qZA(),e.TgZ(55,"span",23),e.NdJ("click",function(){return o.addmodel("#amountremaing")}),e._uU(56,"Montant Restant"),e.qZA(),e.TgZ(57,"span",22),e.NdJ("click",function(){return o.addmodel("#amount")}),e._uU(58,"Montant pay\xe9"),e.qZA(),e.TgZ(59,"span",20),e.NdJ("click",function(){return o.addmodel("#datepaid")}),e._uU(60,"Date paiement"),e.qZA(),e.TgZ(61,"span",21),e.NdJ("click",function(){return o.addmodel("#amountscolarity")}),e._uU(62,"Montant Scolarite"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.formGroup),e.xp6(3),e.Oqu(e.lcZ(13,6,"fields.libelle")),e.xp6(5),e.Oqu(e.lcZ(18,8,"fields.message")),e.xp6(4),e.hij("",160-o.formGroup.value.message.length," restant"),e.xp6(3),e.Oqu(e.lcZ(25,10,"action.save")),e.xp6(3),e.Oqu(e.lcZ(28,12,"action.cancel")))},directives:[r._Y,r.JL,r.sg,m.MU,m.HK,r.Fj,m.oH,r.JJ,r.u],pipes:[u.X$],styles:["span[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var c=l(8550);function I(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.student.name," ")}function P(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.categorie.libelle," ")}function j(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.categorie.montant," ")}function $(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.operateur," ")}function G(n,s){1&n&&(e._uU(0),e.ALo(1,"date")),2&n&&e.hij(" ",e.xi3(1,1,s.row.created_at,"dd/MM/yyyy")," ")}function z(n,s){if(1&n&&(e.TgZ(0,"div",13),e._UZ(1,"span",14),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.qZA()),2&n){const t=s.row;e.Q6J("ngClass","active"===t.is_enabled?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass","active"===t.is_enabled?"bg-success":"bg-danger"),e.xp6(2),e.Oqu(t.is_enabled)}}let V=(()=>{class n{constructor(){this.columnMode=c.hq.force,this.rows=[]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-historique"]],viewQuery:function(t,o){if(1&t&&e.Gf(c.nE,5),2&t){let a;e.iGM(a=e.CRH())&&(o.table=a.first)}},decls:30,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],[1,"text-capitalize"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Historique sms"),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"input",7),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"ngx-datatable",9,10),e.TgZ(12,"ngx-datatable-column",11),e.ALo(13,"translate"),e.YNc(14,I,1,1,"ng-template",12),e.qZA(),e.TgZ(15,"ngx-datatable-column",11),e.ALo(16,"translate"),e.YNc(17,P,1,1,"ng-template",12),e.qZA(),e.TgZ(18,"ngx-datatable-column",11),e.ALo(19,"translate"),e.YNc(20,j,1,1,"ng-template",12),e.qZA(),e.TgZ(21,"ngx-datatable-column",11),e.ALo(22,"translate"),e.YNc(23,$,1,1,"ng-template",12),e.qZA(),e.TgZ(24,"ngx-datatable-column",11),e.ALo(25,"translate"),e.YNc(26,G,2,4,"ng-template",12),e.qZA(),e.TgZ(27,"ngx-datatable-column",11),e.ALo(28,"translate"),e.YNc(29,z,4,3,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("rows",o.rows)("columnMode",o.columnMode)("headerHeight",50)("footerHeight",50)("limit",10),e.xp6(2),e.s9C("name",e.lcZ(13,17,"fields.etablissement")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(16,19,"fields.campaign")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(19,21,"fields.phone")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(22,23,"fields.message")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(25,25,"fields.datecreation")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(28,27,"fields.status")),e.Q6J("width",70))},directives:[m.oH,c.nE,c.UC,c.vq,h.mk],pipes:[u.X$,h.uU],styles:[""]}),n})(),B=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mail"]],decls:7,vars:0,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6,"Envoyer un mail"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),n})();var Z=l(2471);function U(n,s){return n.filter(o=>(o=>{for(let a in o)if(null!=o[a]&&-1!==o[a].toString().toUpperCase().indexOf(s.toString().toUpperCase()))return!0})(o))}var C=l(9344),W=l(2340),D=l(1841);let N=(()=>{class n{constructor(t){this.http=t,this.apiUrl=W.N.API_URL+"chats"}getChatList(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatDetail(t){return this.http.get(`${this.apiUrl}/${t}`)}getChatOne(t,o){return this.http.get(`${this.apiUrl}/${t}/${o}/getchat`)}updateConversation(t,o,a){return this.http.post(`${this.apiUrl}/conversation`,{data:{id:o,avatar:t.avatar,from:a,msgtype:t.msg_type,text:t.text,time:t.time,user:a}})}addChat(t){return this.http.post(`${this.apiUrl}/post`,t)}addChatMessage(t){return this.http.post(`${this.apiUrl}/msg`,t)}getstudentbyteacher(t){return this.http.get(`${this.apiUrl}/${t}/getstudents`)}getteacherbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getteachers`)}getstudentsbystudent(t){return this.http.get(`${this.apiUrl}/${t}/getstudentsbystudent`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(D.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=l(3301),F=l(2),H=l(1452),Q=l(2655),A=l(1383),k=l(7871);const K=["chatPS"];function X(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.chat.name)}}function ee(n,s){if(1&n&&e._UZ(0,"avatar",28),2&n){const t=e.oxw(2).$implicit;e.Q6J("icon","feather icon-user")("src",t.avatar)}}function te(n,s){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,ee,1,2,"avatar",27),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.avatar.length>1)}}function ne(n,s){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.text)}}function oe(n,s){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw().$implicit;e.Q6J("src",t.text,e.LSH)("alt",t.text)}}function ae(n,s){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"i",31),e.TgZ(2,"span",32),e.TgZ(3,"u"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.text)}}function se(n,s){if(1&n&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.time," ")}}const ie=function(n,s,t){return{"msg-recipient":n,"msg-sent":s,"justify-content-center":t}},le=function(n){return{"no-avatar":n}},re=function(n){return{"p-3":n}};function ce(n,s){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,te,2,1,"div",20),e.TgZ(2,"div",21),e.TgZ(3,"div",22),e.YNc(4,ne,2,1,"span",5),e.YNc(5,oe,1,2,"img",23),e.YNc(6,ae,5,1,"div",24),e.qZA(),e.qZA(),e.YNc(7,se,2,1,"div",25),e.qZA()),2&n){const t=s.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.kEZ(8,ie,t.fromuser!==o.currentuser.id,t.fromuser==o.currentuser.id,"date"==t.msg_type)),e.xp6(1),e.Q6J("ngIf",t.avatar),e.xp6(1),e.Q6J("ngClass",e.VKq(12,le,0==t.avatar.length)),e.xp6(1),e.Q6J("ngClass",e.VKq(14,re,"image"==t.msg_type)),e.xp6(1),e.Q6J("ngIf","text"==t.msg_type),e.xp6(1),e.Q6J("ngIf","image"==t.msg_type),e.xp6(1),e.Q6J("ngIf","file"==t.msg_type),e.xp6(1),e.Q6J("ngIf",t.time.length>1)}}function de(n,s){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,ce,8,16,"div",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chat.msg)}}let O=(()=>{class n{constructor(t,o){this.chatSvc=t,this.cdr=o,this.updateChat=new e.vpe,this.openMobilePanel=new e.vpe,this.currentuser=JSON.parse(localStorage.getItem("auth"))}set chatId(t){this._id=t,this.fetchChatDetail(t)}get chatId(){return this._id}ngOnInit(){}ngAfterViewChecked(){this.scrollToBottom()}fetchChatDetail(t){this.chatSvc.getChatOne(t,this.currentuser.id).subscribe(o=>{this.chat=o.data,this.chatPS.directiveRef.scrollToBottom(),this.cdr.detectChanges()})}sendMessage(){const t={avatar:"",text:this.message,fromuser:this.currentuser.id,time:"",msg_type:"text"};this.message&&(this.chat.msg.push(t),this.chatSvc.updateConversation(t,this.chat.id,this.currentuser.id).subscribe(),this.updateChat.emit(this.currentuser.id),this.cdr.detectChanges()),this.message=""}scrollToBottom(){this.chatPS.directiveRef.scrollToBottom()}onMobilePanelOpen(){this.openMobilePanel.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(N),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["conversation"]],viewQuery:function(t,o){if(1&t&&e.Gf(K,5),2&t){let a;e.iGM(a=e.CRH())&&(o.chatPS=a.first)}},hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("conversation",!0)},inputs:{chatId:"chatId"},outputs:{updateChat:"updateChat",openMobilePanel:"openMobilePanel"},decls:20,vars:3,consts:[[1,"conversation-header"],[1,"d-flex","align-items-center"],[1,"d-block","d-lg-none","cursor-pointer","me-2","font-size-lg",3,"click"],[1,"feather","icon-menu"],[1,"mb-0"],[4,"ngIf"],[1,"conversation-body"],["chatPS",""],["class","p-4",4,"ngIf"],[1,"conversation-footer"],["type","text","placeholder","Enter your message here",1,"form-control","ms-2",3,"ngModel","ngModelChange","keydown.enter"],[1,"conversation-footer-icon","d-flex"],["href","javascript:void(0)",1,"mx-2"],[1,"las","la-paperclip"],[1,"las","la-smile"],[1,"btn","btn-primary","ms-2",3,"click"],[1,"feather","icon-send"],[1,"p-4"],["class","msg",3,"ngClass",4,"ngFor","ngForOf"],[1,"msg",3,"ngClass"],["class","ms-2",4,"ngIf"],[1,"bubble",3,"ngClass"],[1,"bubble-wrapper",3,"ngClass"],[3,"src","alt",4,"ngIf"],["class","d-flex align-items-center msg-file",4,"ngIf"],["class","fw-bold font-size-sm",4,"ngIf"],[1,"ms-2"],[3,"icon","src",4,"ngIf"],[3,"icon","src"],[3,"src","alt"],[1,"d-flex","align-items-center","msg-file"],[1,"feather","icon-file"],[1,"ms-2","fw-bold","text-link","cursor-pointer"],[1,"fw-bold","font-size-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.NdJ("click",function(){return o.onMobilePanelOpen()}),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"h5",4),e.YNc(5,X,2,1,"span",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"perfect-scrollbar",6,7),e.YNc(8,de,2,1,"div",8),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(i){return o.message=i})("keydown.enter",function(i){return o.sendMessage(),i.preventDefault()}),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"a",12),e._UZ(13,"i",13),e.qZA(),e.TgZ(14,"a",12),e._UZ(15,"i",14),e.qZA(),e.qZA(),e.TgZ(16,"button",15),e.NdJ("click",function(){return o.sendMessage()}),e.TgZ(17,"span"),e._uU(18,"Send"),e.qZA(),e._UZ(19,"i",16),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.chat),e.xp6(3),e.Q6J("ngIf",o.chat),e.xp6(2),e.Q6J("ngModel",o.message))},directives:[h.O5,A.Vv,r.Fj,m.oH,r.JJ,r.On,h.sg,h.mk,k.A],encapsulation:2}),n})();var b=l(5690);const pe=["openchateModal"];function me(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function he(n,s){if(1&n&&(e.ynx(0),e.YNc(1,me,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const ue=function(n){return{active:n}};function _e(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,he,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.VKq(6,ue,t.id===o.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function ge(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function fe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ze(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Ce(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Te(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function be(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function ve(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ae(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function xe(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Se(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function we(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Je(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const Ne=function(){return{backdrop:"static"}};let ke=(()=>{class n{constructor(t,o,a,i,p,x,q,S,w){this.toaster=t,this.translateservice=o,this.chatSvc=a,this.modalService=i,this.cdr=p,this.route=x,this.router=q,this.professorService=S,this.personnelService=w,this.columnMode=c.hq.force,this.SelectionType=c.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth")),this.currentuser.roles[0]===Z.W.STUDENT&&this.router.navigate(["/communication/chat-student"]),this.currentuser.roles[0]===Z.W.TEACHER&&this.router.navigate(["/communication/chat-professor"])}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(o=>{this.chatList=o.data,this.temp=o.data,this.chatList.length&&this.chatList.forEach(a=>{3===a.id&&(this.selectedId=a.id)}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const o=t.target.value;this.chatList=o?U(this.temp,o):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(a=>{this.selectedId=a.data.id,this.openchateModal.hide(),this.cdr.markForCheck()},a=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(a)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(o=>{this.personnels=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(o=>{this.professors=o.data,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(o=>{this.students=o.data,this.cdr.markForCheck()},o=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(o)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(a=>{this.openchateModal.hide(),this.selectedId=a.data.id,this.cdr.markForCheck()},a=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(a)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C._W),e.Y36(u.sK),e.Y36(N),e.Y36(T.tT),e.Y36(e.sBO),e.Y36(g.gz),e.Y36(g.F0),e.Y36(F.c),e.Y36(H.G))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(t,o){if(1&t&&(e.Gf(c.nE,5),e.Gf(c.nE,5),e.Gf(pe,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.table=a.first),e.iGM(a=e.CRH())&&(o.tableteacher=a.first),e.iGM(a=e.CRH())&&(o.openchateModal=a.first)}},features:[e._Bn([C._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return o.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,_e,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return o.updateChat(i)})("openMobilePanel",function(){return o.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return o.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,ge,2,1,"ng-template",25),e.YNc(28,fe,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,Ze,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Ce,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Te,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return o.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectPersonnel(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,be,2,1,"ng-template",25),e.YNc(43,ve,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,Ae,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,xe,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(i){return o.onSelectTabP(i)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(i){return o.onSelectPersonnel(i)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,qe,2,1,"ng-template",25),e.YNc(55,Se,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,we,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,Je,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return o.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",o.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",o.chatList),e.xp6(1),e.Q6J("chatId",o.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,Ne)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",o.students)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.professors)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.personnels)("selected",o.selectedpersonnel)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[Q.n,m.oH,A.Vv,h.sg,O,T.oB,b.AH,b.wW,c.nE,c.UC,c.tk,c.vq,h.mk,k.A,h.O5],pipes:[u.X$],styles:[""]}),n})();var R=l(2331);const ye=["openchateModal"];function Me(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function Ue(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Me,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const Fe=function(n){return{active:n}};function He(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,Ue,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.VKq(6,Fe,t.id===o.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function Qe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ee(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Re(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function Ye(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function Le(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function Ie(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Pe(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function je(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function $e(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matiere," ")}function Ge(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function ze(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function Ve(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function Be(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const We=function(){return{backdrop:"static"}},Ke=["openchateModal"];function Xe(n,s){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text," ")}}function et(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Xe,2,1,"p",40),e.BQk()),2&n){const t=s.last;e.xp6(1),e.Q6J("ngIf",t)}}const tt=function(n){return{active:n}};function nt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().selectChat(i.id)}),e._UZ(1,"avatar",34),e.TgZ(2,"div",35),e.TgZ(3,"h6",36),e._uU(4),e.qZA(),e.YNc(5,et,2,1,"ng-container",37),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"span",39),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.VKq(6,tt,t.id===o.selectedId)),e.xp6(1),e.Q6J("size",35)("src",t.avatar),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.msg),e.xp6(3),e.Oqu(t.time)}}function ot(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function at(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function st(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function it(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function lt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.classe," ")}function rt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function ct(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function dt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function pt(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}function mt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(){const a=e.CHM(t);return a.selectFn(!a.allRowsSelected)}),e.qZA(),e.qZA()}if(2&n){const t=s.allRowsSelected;e.xp6(1),e.Q6J("checked",t)}}function ht(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"input",43),e.NdJ("change",function(a){return e.CHM(t).onCheckboxChangeFn(a)}),e.qZA(),e.qZA()}if(2&n){const t=s.isSelected;e.xp6(1),e.Q6J("checked",t)}}function ut(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.name," ")}function _t(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.row.matricule," ")}const gt=function(){return{backdrop:"static"}},Zt=[{path:"mail",data:{title:"Envoyer un mail",hidePageHeader:!1},component:B},{path:"chat",data:{title:"Chat",hidePageHeader:!1,authorities:[Z.W.ADMIN,Z.W.TEACHER,Z.W.STUDENT,Z.W.ECONOME]},component:ke},{path:"chat-student",data:{title:"Chat",hidePageHeader:!1,authorities:[Z.W.STUDENT]},component:(()=>{class n{constructor(t,o,a,i,p,x,q,S,w,E){this.toaster=t,this.translateservice=o,this.chatSvc=a,this.modalService=i,this.cdr=p,this.route=x,this.router=q,this.professorService=S,this.personnelService=w,this.studentService=E,this.columnMode=c.hq.force,this.SelectionType=c.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(o=>{this.chatList=o.data,this.temp=o.data,this.chatList.length&&this.chatList.forEach(a=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const o=t.target.value;this.chatList=o?U(this.temp,o):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(a=>{this.openchateModal.hide(),this.selectedId=a.data.id,this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK"),this.cdr.markForCheck()},a=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(a)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(o=>{this.personnels=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTabT(t){this.chatSvc.getteacherbystudent(this.currentuser.id).subscribe(o=>{this.professors=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTabS(t){this.chatSvc.getstudentsbystudent(this.currentuser.id).subscribe(o=>{this.students=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(a=>{this.openchateModal.hide(),this.selectedId=a.data.id,this.cdr.markForCheck()},a=>{console.log(a)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C._W),e.Y36(u.sK),e.Y36(N),e.Y36(T.tT),e.Y36(e.sBO),e.Y36(g.gz),e.Y36(g.F0),e.Y36(F.c),e.Y36(H.G),e.Y36(R.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatstudent"]],viewQuery:function(t,o){if(1&t&&(e.Gf(c.nE,5),e.Gf(c.nE,5),e.Gf(ye,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.table=a.first),e.iGM(a=e.CRH())&&(o.tableteacher=a.first),e.iGM(a=e.CRH())&&(o.openchateModal=a.first)}},features:[e._Bn([C._W])],decls:68,vars:81,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return o.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,He,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return o.updateChat(i)})("openMobilePanel",function(){return o.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return o.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,Qe,2,1,"ng-template",25),e.YNc(28,Oe,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,Ee,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,Re,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,Ye,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return o.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectStudent(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,Le,2,1,"ng-template",25),e.YNc(43,Ie,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,Pe,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,je,1,1,"ng-template",26),e.qZA(),e.TgZ(50,"ngx-datatable-column",27),e.ALo(51,"translate"),e.YNc(52,$e,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"tab",29),e.NdJ("selectTab",function(i){return o.onSelectTabP(i)}),e.TgZ(54,"ngx-datatable",22,30),e.NdJ("select",function(i){return o.onSelectPersonnel(i)}),e.TgZ(56,"ngx-datatable-column",24),e.YNc(57,Ge,2,1,"ng-template",25),e.YNc(58,ze,2,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,Ve,1,1,"ng-template",26),e.qZA(),e.TgZ(62,"ngx-datatable-column",27),e.ALo(63,"translate"),e.YNc(64,Be,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",31),e.TgZ(66,"button",32),e.NdJ("click",function(){return o.cancel()}),e._uU(67,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",o.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",o.chatList),e.xp6(1),e.Q6J("chatId",o.selectedId),e.xp6(1),e.Q6J("config",e.DdM(80,We)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",o.students)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,64,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,66,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,68,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.professors)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,70,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,72,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(51,74,"fields.matiere")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.personnels)("selected",o.selectedpersonnel)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(60,76,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(63,78,"fields.matricule")),e.Q6J("width",240))},directives:[Q.n,m.oH,A.Vv,h.sg,O,T.oB,b.AH,b.wW,c.nE,c.UC,c.tk,c.vq,h.mk,k.A,h.O5],pipes:[u.X$],styles:[""]}),n})()},{path:"chat-professor",data:{title:"Chat",hidePageHeader:!1,authorities:[Z.W.TEACHER]},component:(()=>{class n{constructor(t,o,a,i,p,x,q,S,w,E){this.toaster=t,this.translateservice=o,this.chatSvc=a,this.modalService=i,this.cdr=p,this.route=x,this.router=q,this.professorService=S,this.personnelService=w,this.studentService=E,this.columnMode=c.hq.force,this.SelectionType=c.RT,this.rowHeight="auto",this.scrollbarH=!1,this.rows=[],this.personnels=[],this.selectedpersonnel=[],this.selectedteacher=[],this.professors=[],this.students=[],this.currentuser=JSON.parse(localStorage.getItem("auth"))}ngOnInit(){this.init(this.currentuser.id)}init(t){this.chatSvc.getChatList(t).subscribe(o=>{this.chatList=o.data,this.temp=o.data,this.chatList.length&&this.chatList.forEach(a=>{}),this.cdr.detectChanges()})}selectChat(t){this.selectedId=t,this.mobilePanelOpen=!1}updateChat(t){this.init(t)}serach(t){const o=t.target.value;this.chatList=o?U(this.temp,o):this.temp}onMobilePanelToggleOpen(){this.mobilePanelOpen=!0}cancel(){this.openchateModal.hide()}openmodal(){this.openchateModal.show()}onSelectPersonnel(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].compte.id}}).subscribe(a=>{this.openchateModal.hide(),this.selectedId=a.data.id,this.cdr.markForCheck()},a=>{this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK"),console.log(a)})}onSelectTabP(t){this.personnelService.getPersonnels().subscribe(o=>{this.personnels=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTabT(t){this.professorService.getProfessors().subscribe(o=>{this.professors=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTabS(t){this.chatSvc.getstudentbyteacher(this.currentuser.id).subscribe(o=>{this.students=o.data,this.cdr.markForCheck()},o=>{console.log(o)})}onSelectTeacher(t){}onSelectStudent(t){console.log(t),this.chatSvc.addChat({data:{user:this.currentuser.id,userfinal:t.selected[0].id}}).subscribe(a=>{this.openchateModal.hide(),this.selectedId=a.data.id,this.cdr.markForCheck()},a=>{console.log(a)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C._W),e.Y36(u.sK),e.Y36(N),e.Y36(T.tT),e.Y36(e.sBO),e.Y36(g.gz),e.Y36(g.F0),e.Y36(F.c),e.Y36(H.G),e.Y36(R.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chatprofessor"]],viewQuery:function(t,o){if(1&t&&(e.Gf(c.nE,5),e.Gf(c.nE,5),e.Gf(Ke,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.table=a.first),e.iGM(a=e.CRH())&&(o.tableteacher=a.first),e.iGM(a=e.CRH())&&(o.openchateModal=a.first)}},features:[e._Bn([C._W])],decls:65,vars:77,consts:[[1,"chat","card","mb-0"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","mt-2","mr-2"],[1,"btn","btn-dark",3,"click"],[1,"d-flex","content-min-height","content-max-height"],["borderRight","true",1,"p-0",3,"panelWidth","isMobileActive"],[1,"chat-panel"],[1,"chat-panel-header"],[1,"input-affix"],[1,"prefix-icon","feather","icon-search"],["type","text","placeholder","Search",1,"form-control",3,"keyup"],[1,"chat-panel-body"],["class","chat-list-row",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"chatId","updateChat","openMobilePanel"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["openchateModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"mb-2","fw-bolder"],[1,"modal-body","table-responsive"],[3,"justified"],["heading","STUDENTS",3,"selectTab"],[3,"rows","selected","selectionType","headerHeight","footerHeight","limit","rowHeight","scrollbarH","scrollbarV","select"],["tableteacher",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"width","name"],["heading","TEACHERS",3,"selectTab"],["heading","PERSONNALS",3,"selectTab"],["table",""],[1,"modal-footer"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],[1,"chat-list-row",3,"ngClass","click"],[2,"min-width","35px",3,"size","src"],[1,"ms-2","col-8"],[1,"mb-0"],[4,"ngFor","ngForOf"],[1,"ms-3","chat-list-row-detai"],[1,"text-muted","font-size-sm"],["class","chat-list-row-msg mb-0 text-muted",4,"ngIf"],[1,"chat-list-row-msg","mb-0","text-muted"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.openmodal()}),e._uU(3,"Nouvelle"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"column-panel",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.TgZ(10,"input",9),e.NdJ("keyup",function(i){return o.serach(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"perfect-scrollbar",10),e.YNc(12,nt,9,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"conversation",12),e.NdJ("updateChat",function(i){return o.updateChat(i)})("openMobilePanel",function(){return o.onMobilePanelToggleOpen()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",13,14),e.TgZ(16,"div",15),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e.TgZ(19,"h4",18),e._uU(20,"Nouvelle discution "),e.qZA(),e.qZA(),e.TgZ(21,"div",19),e.TgZ(22,"tabset",20),e.TgZ(23,"tab",21),e.NdJ("selectTab",function(i){return o.onSelectTabS(i)}),e.TgZ(24,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectStudent(i)}),e.TgZ(26,"ngx-datatable-column",24),e.YNc(27,ot,2,1,"ng-template",25),e.YNc(28,at,2,1,"ng-template",26),e.qZA(),e.TgZ(29,"ngx-datatable-column",27),e.ALo(30,"translate"),e.YNc(31,st,1,1,"ng-template",26),e.qZA(),e.TgZ(32,"ngx-datatable-column",27),e.ALo(33,"translate"),e.YNc(34,it,1,1,"ng-template",26),e.qZA(),e.TgZ(35,"ngx-datatable-column",27),e.ALo(36,"translate"),e.YNc(37,lt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tab",28),e.NdJ("selectTab",function(i){return o.onSelectTabT(i)}),e.TgZ(39,"ngx-datatable",22,23),e.NdJ("select",function(i){return o.onSelectPersonnel(i)}),e.TgZ(41,"ngx-datatable-column",24),e.YNc(42,rt,2,1,"ng-template",25),e.YNc(43,ct,2,1,"ng-template",26),e.qZA(),e.TgZ(44,"ngx-datatable-column",27),e.ALo(45,"translate"),e.YNc(46,dt,1,1,"ng-template",26),e.qZA(),e.TgZ(47,"ngx-datatable-column",27),e.ALo(48,"translate"),e.YNc(49,pt,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tab",29),e.NdJ("selectTab",function(i){return o.onSelectTabP(i)}),e.TgZ(51,"ngx-datatable",22,30),e.NdJ("select",function(i){return o.onSelectPersonnel(i)}),e.TgZ(53,"ngx-datatable-column",24),e.YNc(54,mt,2,1,"ng-template",25),e.YNc(55,ht,2,1,"ng-template",26),e.qZA(),e.TgZ(56,"ngx-datatable-column",27),e.ALo(57,"translate"),e.YNc(58,ut,1,1,"ng-template",26),e.qZA(),e.TgZ(59,"ngx-datatable-column",27),e.ALo(60,"translate"),e.YNc(61,_t,1,1,"ng-template",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",31),e.TgZ(63,"button",32),e.NdJ("click",function(){return o.cancel()}),e._uU(64,"Fermer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("panelWidth",350)("isMobileActive",o.mobilePanelOpen),e.xp6(7),e.Q6J("ngForOf",o.chatList),e.xp6(1),e.Q6J("chatId",o.selectedId),e.xp6(1),e.Q6J("config",e.DdM(76,gt)),e.xp6(8),e.Q6J("justified",!0),e.xp6(2),e.Q6J("rows",o.students)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(30,62,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(33,64,"fields.matricule")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(36,66,"fields.classe")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.professors)("selected",o.selectedteacher)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(45,68,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(48,70,"fields.matricule")),e.Q6J("width",240),e.xp6(4),e.Q6J("rows",o.personnels)("selected",o.selectedpersonnel)("selectionType",o.SelectionType)("headerHeight",50)("footerHeight",50)("limit",50)("rowHeight",40)("scrollbarH",o.scrollbarH)("scrollbarV",!0),e.xp6(2),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(3),e.s9C("name",e.lcZ(57,72,"fields.name")),e.Q6J("width",240),e.xp6(3),e.s9C("name",e.lcZ(60,74,"fields.matricule")),e.Q6J("width",240))},directives:[Q.n,m.oH,A.Vv,h.sg,O,T.oB,b.AH,b.wW,c.nE,c.UC,c.tk,c.vq,h.mk,k.A,h.O5],pipes:[u.X$],styles:[""]}),n})()},{path:"historique",data:{title:"Historique",hidePageHeader:!1},component:V},{path:"modelsms",data:{title:"Model sms",hidePageHeader:!1},component:L},{path:"sendmasse",data:{title:"Envoyer les sms en masse",hidePageHeader:!1},component:v},{path:"sendone",data:{title:"Envoyer un sms",hidePageHeader:!1},component:y}];let Ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(Zt)],g.Bz]}),n})();var Tt=l(4079),bt=l(902),vt=l(8900),At=l(2563),xt=l(743),qt=l(8090),St=l(7587),wt=l(4466),Jt=l(7535);let Nt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,Ct,wt.m,Tt.h,T.zk,f.A0,bt.n,c.xD,vt.F,Jt.A,A.Xd,At.k,m.VN,m.VN.forRoot(),xt.mr,b.P4.forRoot(),C.Rh.forRoot(),qt.d,St.HC,A.Xd]]}),n})()},2331:(Y,J,l)=>{l.d(J,{V:()=>y});var h=l(1841),g=l(2340),r=l(5917),e=l(3342),m=l(5304),u=l(3018);let y=(()=>{class f{constructor(d){this.http=d,this.apiUrl=g.N.API_URL+"students",this.apiUrlfile=g.N.API_URL+"upload",this.apiUrlchangepassword=g.N.API_URL+"changepassword",this.httpOptions={headers:new h.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getData(){}getStudents(){return this.http.get(this.apiUrl).pipe((0,e.b)(d=>console.log("fetched getStudents")),(0,m.K)(this.handleError("getStudents",[])))}getStudent(d){return this.http.get(`${this.apiUrl}/${d}`).pipe((0,e.b)(v=>console.log(`fetched product id=${d}`)),(0,m.K)(this.handleError(`getProduct id=${d}`)))}addStudent(d){return this.http.post(this.apiUrl,d,this.httpOptions)}upload(d){return this.http.post(this.apiUrlfile,d,this.httpOptions)}changepassword(d){return this.http.post(this.apiUrlchangepassword,d,this.httpOptions)}editStudent(d,_){return this.http.put(`${this.apiUrl}/${_}`,d,this.httpOptions)}deleteStudent(d){return this.http.delete(`${this.apiUrl}/${d}`,this.httpOptions)}studentcompte(d){return this.http.get(`${this.apiUrl}/${d}/compte`,this.httpOptions)}importStudent(d){return this.http.post(this.apiUrl+"/import",d,this.httpOptions).pipe((0,e.b)(_=>console.log(`import student w/ id=${d.id}`)),(0,m.K)(this.handleError("import student")))}importRegisterStudent(d){return this.http.post(this.apiUrl+"/importregister",d,this.httpOptions).pipe((0,e.b)(_=>console.log(`import student w/ id=${d.id}`)),(0,m.K)(this.handleError("import student")))}handleError(d="operation",_){return v=>(console.error(v),(0,r.of)(_))}}return f.\u0275fac=function(d){return new(d||f)(u.LFG(h.eN))},f.\u0275prov=u.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);