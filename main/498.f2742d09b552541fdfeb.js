"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[498],{6498:(Vo,ue,p)=>{p.r(ue),p.d(ue,{ComptabiliteModule:()=>Go});var d=p(8583),U=p(7525),N=p(4762),a=p(3679),h=p(1541),r=p(8550),y=p(1289),f=p(9344),J=p(8645),L=p(5124),pe=p(5452),me=p(7620),e=p(3018),V=p(2340),ie=p(5917),O=p(8002),C=p(3342),w=p(5304),P=p(1841);let Q=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.API_URL+"journeecomptable",this.httpOptions={}}getData(){}getRegisterStudents(){return this.http.get(this.apiUrl)}getBydateAndCaisse(t,i){return this.http.get(`${this.apiUrl}/${i}/${t}`,this.httpOptions).pipe((0,O.U)(l=>l.data),(0,C.b)(l=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}cloture(t,i){return this.http.get(`${this.apiUrl}/${i}/${t}/cloture`,this.httpOptions).pipe((0,O.U)(l=>l.data),(0,C.b)(l=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}decloture(t,i){return this.http.get(`${this.apiUrl}/${i}/${t}/decloture`,this.httpOptions).pipe((0,O.U)(l=>l.data),(0,C.b)(l=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}open(t,i){return this.http.get(`${this.apiUrl}/${i}/${t}/open`,this.httpOptions).pipe((0,O.U)(l=>l.data),(0,C.b)(l=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}verifydate(t){return this.http.get(`${this.apiUrl}/${t}`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}addPaiement(t){return this.http.post(this.apiUrl,t,this.httpOptions)}handleError(t="operation",i){return s=>(console.error(s),(0,ie.of)(i))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var S=p(3301),j=p(2331),he=p(6209),I=p(2852),k=p(5583),ge=p(965),R=p(1452),A=p(5836),m=p(7552),Z=p(6640),oe=p(5994),q=p(9790);const ve=["childModal"],Ae=["opencaisseModal"];function qe(o,n){if(1&o&&(e.TgZ(0,"ng-option",65),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ce(o,n){if(1&o&&(e.TgZ(0,"ng-option",65),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function we(o,n){if(1&o&&(e.TgZ(0,"div",11),e.TgZ(1,"label",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",66),e.YNc(5,Ce,2,2,"ng-option",14),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"fields.classe")),e.xp6(3),e.Q6J("ngForOf",t.classes)}}function Ue(o,n){1&o&&(e.TgZ(0,"div",11),e.TgZ(1,"checkbox",67),e._uU(2,"Redoublant"),e.qZA(),e.qZA())}function ye(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Se(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function xe(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montantverse," ")}function Me(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montantrestant," ")}function Je(o,n){1&o&&(e.TgZ(0,"span",68),e._uU(1,"ouverte"),e.qZA())}function ke(o,n){1&o&&(e.TgZ(0,"span",69),e._uU(1,"non ouverte"),e.qZA())}function He(o,n){if(1&o&&(e.TgZ(0,"ul"),e.TgZ(1,"li"),e._uU(2),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&o){const t=n.$implicit;e.xp6(2),e.hij("",t.libelle," "),e.xp6(2),e.Oqu(t.montant)}}function Ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){return e.CHM(t),e.oxw().printrecu()}),e._uU(1,"Imprimer la facture"),e.qZA()}}const _e=function(){return{backdrop:"static"}};class F{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y,v,G){this.datePipe=n,this.journeecomptableService=t,this.router=i,this.toastr=s,this.modalService=l,this.formBuilder=u,this.studentSvc=g,this.documentpdfService=_,this.store=b,this.tableSvc=x,this.servStudent=M,this.authService=T,this.serClasse=H,this.cdr=Y,this.personnelService=v,this.screenSizeSvc=G,this.temp=[],this.validate=!1,this.printfacture=!1,this.paiements=[],this.rows=[],this.students=[],this.classes=[],this.selected=[],this.personnel=null,this.titlesession="",this.datesession="",this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(de=>{de.includes(h.y.XXL)||de.includes(h.y.XL)||de.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}openModalWithComponent(){this.bsModalRef=this.modalService.show(Oe,{backdrop:!0,animated:!0,ignoreBackdropClick:!0,title:"Open caisse"}),this.bsModalRef.content.closeBtnName="Close"}windowResize(n){this.getScreenWidth(n.target.innerWidth)}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.formGroup=this.formBuilder.group({student:["",[a.kI.required]],classe:["",[a.kI.nullValidator]],montant:[,a.kI.nullValidator],redoublant:[!1,a.kI.nullValidator]}),this.formGroupStudent=this.formBuilder.group({email:["",[a.kI.required,a.kI.pattern(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)]],name:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(220)]],sexe:[null,a.kI.required],dateborn:[null,a.kI.nullValidator],smsphone:[null,a.kI.nullValidator],whatsapp:[null,a.kI.nullValidator],fatherphone:[null,a.kI.nullValidator],fathername:[null,a.kI.nullValidator],mothername:[null,a.kI.nullValidator],motherphone:[null,a.kI.nullValidator],professionfather:[null,a.kI.nullValidator],professionmother:[null,a.kI.nullValidator],photo:[null,a.kI.nullValidator],lieunaissance:[null,a.kI.nullValidator],adresse:[null,a.kI.nullValidator]}),this.initValues(),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.caissier=n.data.name,this.verifydate(),this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,t.status||this.openCaisse(),this.cdr.detectChanges()},t=>{}),this.cdr.detectChanges()},n=>{this.router.navigate(["/"])})}openCaisse(){this.opencaisseModal.show()}verifydate(){this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(n=>{console.log(n)},n=>{console.log(n)})}onChange(n){this.printfacture=!1,this.tableSvc.getInformationtudent(n).subscribe(t=>{this.studentname=t.data.name,this.matricule=t.data.matricule,this.isInscrire=t.data.inscription,this.total_payement=t.data.totalscolarite,this.regime=t.data.regime,this.classe=t.data.classe,this.restant=t.data.totalrestant,this.paiements=t.data.tranches,this.bourses=t.data.bourses,this.cdr.markForCheck()},t=>{})}toasterClickedHandler(){console.log("Toastr clicked")}initValues(){this.serClasse.getClasses().subscribe(n=>{this.classes=n.data},n=>{console.log(n)}),this.store.dispatch(new pe.RR),this.studentInfo$.subscribe(n=>{this.students=n.data,this.temp=n.data})}onSaveStudent(){const n={data:this.formGroupStudent.value};console.log(n),this.studentSvc.addStudent(n).subscribe(t=>{this.initValues(),this.hideChildModal()},t=>{console.log(t)})}onSubmit(){const n={data:{classe:this.formGroup.value.classe,student:this.formGroup.value.student,redoublant:this.formGroup.value.redoublant,addpaiement:!0,montant:this.formGroup.value.montant,validate:this.validate,caisse:this.personnel.caisse.id}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{null!==t?this.tableSvc.addPaiement(n).subscribe(i=>{this.paiementid=i.data.id,this.toastr.success(i.data.student.name,"Success paiement",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"}),this.printfacture=!0,this.tableSvc.getInformationtudent(i.data.student.id).subscribe(s=>{this.studentname=s.data.name,this.matricule=s.data.matricule,this.isInscrire=s.data.inscription,this.total_payement=s.data.totalscolarite,this.regime=s.data.regime,this.classe=s.data.classe,this.restant=s.data.totalrestant,this.paiements=[...s.data.tranches],this.bourses=s.data.bourses,this.cdr.markForCheck()},s=>{}),this.journeecomptableService.getBydateAndCaisse(this.personnel.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(s=>{this.soldeouverture=s.soldeouverture,this.retrait=s.retrait,this.versement=s.versement,this.solde=s.caisse.solde,this.caissestatus=s.status,this.cdr.detectChanges()},s=>{})},i=>{console.log(i.error),this.toastr.error(i.error.details,"Echec paiement",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"})}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onReset(){this.formGroup.reset()}onActivate(n){}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}hideCaisseModal(){}getScreenWidth(n){this.screenSizeSvc.onResize(n)}openCash(){this.journeecomptableService.open(this.personnel.caisse.id,this.datecomptable).subscribe(n=>{this.soldeouverture=n.soldeouverture,this.retrait=n.retrait,this.versement=n.versement,this.caissestatus=n.status,this.opencaisseModal.hide(),this.cdr.detectChanges()},n=>{console.log(n)})}printrecu(){this.tableSvc.getRecuscolaritepdf(this.paiementid).subscribe(n=>{console.log(n.data),window.open(n.data.link,"_blank")},n=>{})}}F.\u0275fac=function(n){return new(n||F)(e.Y36(d.uU),e.Y36(Q),e.Y36(U.F0),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(j.V),e.Y36(he.J),e.Y36(J.yh),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(ge.U),e.Y36(e.sBO),e.Y36(R.G),e.Y36(A.O))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-caisse"]],viewQuery:function(n,t){if(1&n&&(e.Gf(r.nE,5),e.Gf(ve,5),e.Gf(Ae,5)),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first),e.iGM(i=e.CRH())&&(t.childModal=i.first),e.iGM(i=e.CRH())&&(t.opencaisseModal=i.first)}},hostBindings:function(n,t){1&n&&e.NdJ("resize",function(s){return t.windowResize(s)},!1,e.Jf7)},inputs:{studentname:"studentname"},outputs:{isInscrire:"isInscrire",matricule:"matricule",classe:"classe",paiements:"paiements",bourses:"bourses",total_payement:"total_payement",regime:"regime",restant:"restant",caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable",caissier:"caissier"},features:[e._Bn([f._W,d.uU])],decls:242,vars:105,consts:[[1,"row"],[1,"col-md-8","col-md-offset-1"],[1,"card"],[1,"card-header"],[1,"card-title","mb-2","fw-bolder"],[1,"h5"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"la","la-plus"],[1,"card-body"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","student",3,"change"],[3,"value",4,"ngFor","ngForOf"],["class","form-group mb-3",4,"ngIf"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["rowHeight","auto","columnMode","force",3,"rows"],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],["single","true",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-8"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],[1,"form-group","col-md-3","mb-3"],["type","file","formControlName","photo",1,"form-control"],[1,"form-group","mb-3","col-md-4"],["type","text","formControlName","sexe",1,"form-control"],["type","date","formControlName","dateborn",1,"form-control"],["type","text","formControlName","lieunaissance",1,"form-control"],["type","text","formControlName","mothername",1,"form-control"],["type","text","formControlName","professionmother",1,"form-control"],["type","text","formControlName","motherphone",1,"form-control"],["type","text","formControlName","fathername",1,"form-control"],["type","text","formControlName","professionfather",1,"form-control"],["type","text","formControlName","fatherphone",1,"form-control"],[1,"form-group","mb-3","col-md-6"],["type","text","formControlName","smsphone",1,"form-control"],["type","text","formControlName","whatsapp",1,"form-control"],["type","submit",1,"btn","btn-primary"],["opencaisseModal","bs-modal"],[1,"modal-dialog","modal-md"],["id","dialog-open-caisse",1,"modal-title","pull-left"],[1,"h4"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","routerLink","/",1,"btn","btn-default"],[3,"value"],["formControlName","classe"],["formControlName","redoublant","single","true"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h4",4),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"span",5),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"button",7),e.NdJ("click",function(){return t.showChildModal()}),e._UZ(12,"i",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"form",10),e.NdJ("validSubmit",function(){return t.onSubmit()}),e.TgZ(17,"div",11),e.TgZ(18,"label",12),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"ng-select",13),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(22,qe,2,2,"ng-option",14),e.qZA(),e.qZA(),e.YNc(23,we,6,4,"div",15),e.TgZ(24,"div",11),e.TgZ(25,"label",12),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",16),e.qZA(),e.YNc(29,Ue,3,0,"div",15),e.TgZ(30,"button",17),e.NdJ("click",function(){return t.onReset()}),e._uU(31,"Reset"),e.qZA(),e.TgZ(32,"button",18),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",0),e.TgZ(36,"div",2),e.TgZ(37,"div",9),e.TgZ(38,"ngx-datatable",19),e.TgZ(39,"ngx-datatable-column",20),e.ALo(40,"translate"),e.YNc(41,ye,1,1,"ng-template",21),e.qZA(),e.TgZ(42,"ngx-datatable-column",20),e.ALo(43,"translate"),e.YNc(44,Se,1,1,"ng-template",21),e.qZA(),e.TgZ(45,"ngx-datatable-column",20),e.ALo(46,"translate"),e.YNc(47,xe,1,1,"ng-template",21),e.qZA(),e.TgZ(48,"ngx-datatable-column",20),e.ALo(49,"translate"),e.YNc(50,Me,1,1,"ng-template",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",22),e.TgZ(52,"div",2),e.TgZ(53,"div",3),e.TgZ(54,"h5"),e._uU(55),e.qZA(),e.qZA(),e.TgZ(56,"div",9),e.TgZ(57,"p"),e.TgZ(58,"span",23),e._uU(59,"Date: "),e.qZA(),e.TgZ(60,"span"),e._uU(61),e.qZA(),e.qZA(),e.TgZ(62,"p"),e.TgZ(63,"span",23),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.YNc(66,Je,2,0,"span",24),e.YNc(67,ke,2,0,"span",25),e.qZA(),e.TgZ(68,"div",0),e.TgZ(69,"div",26),e.TgZ(70,"p"),e.TgZ(71,"span",23),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"span"),e._uU(75),e.qZA(),e.qZA(),e.TgZ(76,"p"),e.TgZ(77,"span",23),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"span"),e._uU(81),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"div",26),e.TgZ(83,"p"),e.TgZ(84,"span",23),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"span"),e._uU(88),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(89,"h4"),e.TgZ(90,"span",23),e._uU(91,"Solde:"),e.qZA(),e.TgZ(92,"span"),e._uU(93),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"div",2),e.TgZ(95,"div",3),e.TgZ(96,"h5"),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.qZA(),e.TgZ(99,"div",9),e.TgZ(100,"div"),e.TgZ(101,"p"),e._uU(102),e.ALo(103,"translate"),e.TgZ(104,"span"),e._uU(105),e.qZA(),e.qZA(),e.TgZ(106,"p"),e._uU(107),e.ALo(108,"translate"),e.TgZ(109,"span"),e._uU(110),e.qZA(),e.qZA(),e.TgZ(111,"p"),e._uU(112),e.ALo(113,"translate"),e.TgZ(114,"span"),e._uU(115),e.qZA(),e.qZA(),e.TgZ(116,"p"),e._uU(117),e.ALo(118,"translate"),e.TgZ(119,"span"),e._uU(120),e.qZA(),e.qZA(),e._UZ(121,"hr"),e.TgZ(122,"p"),e._uU(123),e.ALo(124,"translate"),e.TgZ(125,"span"),e._uU(126),e.qZA(),e.qZA(),e.TgZ(127,"p"),e._uU(128),e.ALo(129,"translate"),e.TgZ(130,"span"),e._uU(131),e.qZA(),e.qZA(),e._UZ(132,"hr"),e.TgZ(133,"div",11),e.TgZ(134,"checkbox",27),e.NdJ("ngModelChange",function(s){return t.validate=s}),e._uU(135),e.ALo(136,"translate"),e.qZA(),e.YNc(137,He,5,2,"ul",28),e.qZA(),e._UZ(138,"hr"),e.YNc(139,Ne,2,0,"button",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"div",30,31),e.TgZ(142,"div",32),e.TgZ(143,"div",33),e.TgZ(144,"div",34),e.TgZ(145,"h4",35),e._uU(146,"Ajouter un \xe9l\xe8ve"),e.qZA(),e.TgZ(147,"button",36),e.NdJ("click",function(){return t.hideChildModal()}),e.TgZ(148,"span",37),e._uU(149,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(150,"div",38),e.TgZ(151,"form",10),e.NdJ("validSubmit",function(){return t.onSaveStudent()}),e.TgZ(152,"div",0),e.TgZ(153,"div",39),e.TgZ(154,"div",11),e.TgZ(155,"label",12),e._uU(156,"Nom complet"),e.qZA(),e._UZ(157,"input",40),e.qZA(),e.TgZ(158,"div",11),e.TgZ(159,"label",12),e._uU(160,"Adresse mail"),e.qZA(),e._UZ(161,"input",41),e.qZA(),e.qZA(),e.TgZ(162,"div",42),e.TgZ(163,"label",12),e._uU(164,"Image"),e.qZA(),e._UZ(165,"input",43),e.qZA(),e.TgZ(166,"div",0),e.TgZ(167,"div",44),e.TgZ(168,"label",12),e._uU(169,"Sexe"),e.qZA(),e._UZ(170,"input",45),e.qZA(),e.TgZ(171,"div",44),e.TgZ(172,"label",12),e._uU(173,"dateborn"),e.qZA(),e._UZ(174,"input",46),e.qZA(),e.TgZ(175,"div",44),e.TgZ(176,"label",12),e._uU(177,"lieunaissance"),e.qZA(),e._UZ(178,"input",47),e.qZA(),e._UZ(179,"hr"),e.TgZ(180,"div",44),e.TgZ(181,"label",12),e._uU(182,"motherName"),e.qZA(),e._UZ(183,"input",48),e.qZA(),e.TgZ(184,"div",44),e.TgZ(185,"label",12),e._uU(186,"professionMother"),e.qZA(),e._UZ(187,"input",49),e.qZA(),e.TgZ(188,"div",44),e.TgZ(189,"label",12),e._uU(190,"motherphone"),e.qZA(),e._UZ(191,"input",50),e.qZA(),e.TgZ(192,"div",44),e.TgZ(193,"label",12),e._uU(194,"fatherName"),e.qZA(),e._UZ(195,"input",51),e.qZA(),e.TgZ(196,"div",44),e.TgZ(197,"label",12),e._uU(198,"professionFather"),e.qZA(),e._UZ(199,"input",52),e.qZA(),e.TgZ(200,"div",44),e.TgZ(201,"label",12),e._uU(202,"fatherPhone"),e.qZA(),e._UZ(203,"input",53),e.qZA(),e._UZ(204,"hr"),e.TgZ(205,"div",54),e.TgZ(206,"label",12),e._uU(207,"smsPhone"),e.qZA(),e._UZ(208,"input",55),e.qZA(),e.TgZ(209,"div",54),e.TgZ(210,"label",12),e._uU(211,"watsappPhone"),e.qZA(),e._UZ(212,"input",56),e.qZA(),e.qZA(),e.TgZ(213,"button",17),e.NdJ("click",function(){return t.onReset()}),e._uU(214,"Reset"),e.qZA(),e.TgZ(215,"button",57),e._uU(216,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(217,"div",30,58),e.TgZ(219,"div",59),e.TgZ(220,"div",33),e.TgZ(221,"div",34),e.TgZ(222,"h4",60),e._uU(223),e.qZA(),e.qZA(),e.TgZ(224,"div",38),e.TgZ(225,"p"),e.TgZ(226,"span",61),e._uU(227,"Caisse:"),e.qZA(),e._uU(228),e.qZA(),e.TgZ(229,"p"),e.TgZ(230,"span",61),e._uU(231,"Agent caisse:"),e.qZA(),e._uU(232),e.qZA(),e.TgZ(233,"p"),e.TgZ(234,"span",61),e._uU(235,"Montant en caisse:"),e.qZA(),e._uU(236),e.qZA(),e.qZA(),e.TgZ(237,"div",62),e.TgZ(238,"button",63),e.NdJ("click",function(){return t.openCash()}),e._uU(239,"Ouvrir"),e.qZA(),e.TgZ(240,"button",64),e._uU(241,"Annuler"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("",e.lcZ(6,58,"title.caisse")," "),e.xp6(3),e.AsE("- ",t.titlesession," ",e.xi3(9,60,t.datesession,"Y-M-dd"),""),e.xp6(5),e.Oqu(e.lcZ(14,63,"action.addStudent")),e.xp6(3),e.Q6J("formGroup",t.formGroup),e.xp6(3),e.Oqu(e.lcZ(20,65,"fields.student")),e.xp6(3),e.Q6J("ngForOf",t.students),e.xp6(1),e.Q6J("ngIf",!t.isInscrire),e.xp6(3),e.Oqu(e.lcZ(27,67,"fields.montant")),e.xp6(2),e.Q6J("min",0),e.xp6(1),e.Q6J("ngIf",!t.isInscrire),e.xp6(3),e.Q6J("disabled",!t.caissestatus||!t.formGroup.valid),e.xp6(1),e.Oqu(e.lcZ(34,69,"action.save")),e.xp6(5),e.Q6J("rows",t.paiements),e.xp6(1),e.s9C("name",e.lcZ(40,71,"fields.scolarite")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(43,73,"fields.montantattendu")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(46,75,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(49,77,"fields.montantrestant")),e.Q6J("width",70),e.xp6(7),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(3),e.hij(" ",e.lcZ(65,79,"fields.journeecomptable"),":"),e.xp6(2),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(5),e.hij("",e.lcZ(73,81,"fields.soldeouverture"),":"),e.xp6(3),e.Oqu(t.soldeouverture),e.xp6(3),e.hij("",e.lcZ(79,83,"fields.versement"),":"),e.xp6(3),e.Oqu(t.versement),e.xp6(4),e.hij("",e.lcZ(86,85,"fields.retrait"),":"),e.xp6(3),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(4),e.Oqu(e.lcZ(98,87,"title.informationstudent")),e.xp6(5),e.hij("",e.lcZ(103,89,"fields.name"),": "),e.xp6(3),e.Oqu(t.studentname),e.xp6(2),e.hij("",e.lcZ(108,91,"fields.matricule"),": "),e.xp6(3),e.Oqu(t.matricule),e.xp6(2),e.hij("",e.lcZ(113,93,"fields.classe"),": "),e.xp6(3),e.Oqu(t.classe),e.xp6(2),e.hij("",e.lcZ(118,95,"fields.regime"),": "),e.xp6(3),e.Oqu(t.regime),e.xp6(3),e.hij("",e.lcZ(124,97,"fields.totalscolarite"),":"),e.xp6(3),e.Oqu(t.total_payement),e.xp6(2),e.hij("",e.lcZ(129,99,"fields.totalrestant"),":"),e.xp6(3),e.Oqu(t.restant),e.xp6(3),e.Q6J("ngModel",t.validate),e.xp6(1),e.Oqu(e.lcZ(136,101,"fields.deduirebourse")),e.xp6(2),e.Q6J("ngForOf",t.bourses),e.xp6(2),e.Q6J("ngIf",t.printfacture),e.xp6(1),e.Q6J("config",e.DdM(103,_e)),e.xp6(11),e.Q6J("formGroup",t.formGroupStudent),e.xp6(66),e.Q6J("config",e.DdM(104,_e)),e.xp6(6),e.hij("Ouvrir Journ\xe9e comptable ",t.datecomptable,""),e.xp6(5),e.hij(" ",t.caisse,""),e.xp6(4),e.hij(" ",t.caissier,""),e.xp6(4),e.hij(" ",t.soldeouverture,""))},directives:[a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,d.O5,a.wV,a.qQ,a.Fj,m.oH,r.nE,r.UC,r.vq,oe.b,a.On,S.oB,U.rH,Z.xv],pipes:[q.X$,d.uU],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],F.prototype,"user1$",void 0),(0,N.gn)([(0,J.Ph)(me.N.selectStateData)],F.prototype,"studentInfo$",void 0);let Oe=(()=>{class o{constructor(t,i,s,l){this.bsModalRef=t,this.router=i,this.auth=s,this.caisseService=l,this.list=[]}openCash(){console.log("open ...."),this.caisseService.openSessioncaisse({data:{restecaisse:2e3,user:this.auth.currentUserValue.id}}).subscribe(i=>{const s=i.data;localStorage.setItem("sessioncaisse",JSON.stringify(s)),localStorage.setItem("sessioncaisseid",s.id),this.bsModalRef.hide(),location.reload()},i=>{console.log(i)})}ngOnInit(){JSON.parse(localStorage.getItem("sessioncaisse"))}closeCash(){this.bsModalRef.hide(),this.router.navigate(["/"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(S.UZ),e.Y36(U.F0),e.Y36(k.$),e.Y36(I.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["modal-content"]],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2,"Ouvertutre caisse"),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"p"),e._uU(5,"Agent caisse: Mbah julio"),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Session 00254778 clotur\xe9 le 12/01/2022"),e.qZA(),e.TgZ(8,"p"),e._uU(9,"Montant en caisse: 25000"),e.qZA(),e.qZA(),e.TgZ(10,"div",3),e.TgZ(11,"button",4),e.NdJ("click",function(){return i.openCash()}),e._uU(12,"Ouvrir session"),e.qZA(),e.TgZ(13,"button",5),e.NdJ("click",function(){return i.closeCash()}),e._uU(14),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Oqu(i.closeBtnName))},encapsulation:2}),o})();var se=p(9368),ae=p(7871);function Ye(o,n){if(1&o&&(e.TgZ(0,"div",16),e._UZ(1,"avatar",17),e.TgZ(2,"div",18),e.TgZ(3,"div",19),e._uU(4),e.qZA(),e.TgZ(5,"div",20),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=n.row;e.xp6(1),e.Q6J("size",38)("src",t.img),e.xp6(3),e.Oqu(t.student.name),e.xp6(2),e.Oqu(t.student.adresseMail)}}function Qe(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.totalscolarite," ")}function Ie(o,n){if(1&o&&e._uU(0),2&o){const t=n.row;e.hij(" ",t.totalscolarite-t.totalrestant," ")}}function Re(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.totalrestant," ")}let Le=(()=>{class o{constructor(t,i,s,l){this.formBuilder=t,this.tableSvc=i,this.cdr=s,this.screenSizeSvc=l,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(u=>{u.includes(h.y.XXL)||u.includes(h.y.XL)||u.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch()}fetch(){this.tableSvc.getScolarites().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}getScreenWidth(t){this.screenSizeSvc.onResize(t)}exportToPDF(){this.tableSvc.getScolaritepdf().subscribe(t=>{console.log(t.data),window.open(t.data.link,"_blank")},t=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(se.h),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-scolarite"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},features:[e._Bn([f._W])],decls:28,vars:30,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"la","la-file-pdf"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[1,"material","expandable",3,"rows","columnMode","headerHeight","footerHeight","summaryRow","summaryPosition","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],["name","Montant verse",3,"width"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],[1,"text-muted"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.exportToPDF()}),e._UZ(4,"i",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"h4",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"input",9),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"ngx-datatable",11,12),e.NdJ("activate",function(l){return i.onActivate(l)})("select",function(l){return i.onSelect(l)}),e.TgZ(17,"ngx-datatable-column",13),e.ALo(18,"translate"),e.YNc(19,Ye,7,4,"ng-template",14),e.qZA(),e.TgZ(20,"ngx-datatable-column",13),e.ALo(21,"translate"),e.YNc(22,Qe,1,1,"ng-template",14),e.qZA(),e.TgZ(23,"ngx-datatable-column",15),e.YNc(24,Ie,1,1,"ng-template",14),e.qZA(),e.TgZ(25,"ngx-datatable-column",13),e.ALo(26,"translate"),e.YNc(27,Re,1,1,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij("",e.lcZ(6,20,"action.print")," "),e.xp6(5),e.Oqu(e.lcZ(11,22,"title.paiementscolarite")),e.xp6(5),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",150)("summaryRow",!0)("summaryPosition","bottom")("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(18,24,"fields.student")),e.Q6J("width",350),e.xp6(3),e.s9C("name",e.lcZ(21,26,"fields.totalscolarite")),e.Q6J("width",70),e.xp6(3),e.Q6J("width",70),e.xp6(2),e.s9C("name",e.lcZ(26,28,"fields.totalrestant")),e.Q6J("width",70))},directives:[m.oH,r.nE,r.UC,r.vq,ae.A],pipes:[q.X$],styles:[""]}),o})();function je(o,n){if(1&o&&(e.TgZ(0,"ng-option",20),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function Fe(o,n){if(1&o&&(e.TgZ(0,"div",21),e._UZ(1,"avatar",22),e.TgZ(2,"div",23),e.TgZ(3,"div",24),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&o){const t=n.row;e.xp6(1),e.Q6J("size",38)("src",t.img),e.xp6(3),e.Oqu(t.student)}}function Ee(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.classe," ")}function Ge(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.paiementverse," ")}function Ve(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.cumulmontant," ")}let Pe=(()=>{class o{constructor(t,i,s,l){this.formBuilder=t,this.tableSvc=i,this.cdr=s,this.screenSizeSvc=l,this.temp=[],this.rows=[],this.tranches=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(u=>{u.includes(h.y.XXL)||u.includes(h.y.XL)||u.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch()}fetch(){this.tableSvc.getTranche().subscribe(t=>{this.tranches=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}getScreenWidth(t){this.screenSizeSvc.onResize(t)}onChange(t){this.tableSvc.getInsolvble(t).subscribe(i=>{this.temp=[...i.data],this.rows=i.data,this.cdr.markForCheck(),console.log(this.temp)},i=>{console.log(i)})}exportToPDF(){this.tableSvc.getInsolvablepdf(this.selectedTranche).subscribe(t=>{console.log(t.data),window.open(t.data.link,"_blank")},t=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(se.h),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-insolvable"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},features:[e._Bn([f._W])],decls:33,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"la","la-file-pdf"],[1,"col-md-6"],[1,"visually-hidden"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selectionType","rowHeight","scrollbarH"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],["name","Montant vers\xe9",3,"width"],[3,"value"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.exportToPDF()}),e._UZ(4,"i",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Tranches"),e.qZA(),e.TgZ(10,"ng-select",7),e.NdJ("ngModelChange",function(l){return i.selectedTranche=l})("change",function(l){return i.onChange(l)}),e.YNc(11,je,2,2,"ng-option",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"h4",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",12),e._UZ(18,"input",13),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"ngx-datatable",15,16),e.TgZ(22,"ngx-datatable-column",17),e.ALo(23,"translate"),e.YNc(24,Fe,5,3,"ng-template",18),e.qZA(),e.TgZ(25,"ngx-datatable-column",17),e.ALo(26,"translate"),e.YNc(27,Ee,1,1,"ng-template",18),e.qZA(),e.TgZ(28,"ngx-datatable-column",19),e.YNc(29,Ge,1,1,"ng-template",18),e.qZA(),e.TgZ(30,"ngx-datatable-column",17),e.ALo(31,"translate"),e.YNc(32,Ve,1,1,"ng-template",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij("",e.lcZ(6,19,"action.print")," "),e.xp6(5),e.Q6J("ngModel",i.selectedTranche),e.xp6(1),e.Q6J("ngForOf",i.tranches),e.xp6(4),e.Oqu(e.lcZ(16,21,"title.insolvable")),e.xp6(5),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(23,23,"fields.student")),e.Q6J("width",350),e.xp6(3),e.s9C("name",e.lcZ(26,25,"fields.classe")),e.Q6J("width",70),e.xp6(3),e.Q6J("width",70),e.xp6(2),e.s9C("name",e.lcZ(31,27,"fields.montantattendu")),e.Q6J("width",70))},directives:[Z.w9,a.JJ,a.On,d.sg,m.oH,r.nE,r.UC,r.vq,Z.xv,ae.A],pipes:[q.X$],styles:[""]}),o})();function ze(o,n){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.classe.libelle),e.xp6(2),e.Oqu(t.effectif),e.xp6(2),e.Oqu(t.totalverse),e.xp6(2),e.Oqu(t.totalrestant),e.xp6(2),e.Oqu(t.total)}}let Be=(()=>{class o{constructor(t,i,s,l){this.formBuilder=t,this.tableSvc=i,this.cdr=s,this.screenSizeSvc=l,this.temp=[],this.types=[],this.rows=[],this.sumrow=0,this.effectif=0,this.sumrestantrow=0,this.sumtotalrow=0,this.selected=[]}ngOnInit(){this.fetch()}fetch(){this.tableSvc.getBilan().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.calculSom(this.rows),this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}calculSom(t){for(let i=0;i<t.length;i++)this.sumrow+=t[i].totalverse,this.sumtotalrow+=t[i].total,this.sumrestantrow+=t[i].totalrestant,this.effectif+=t[i].effectif}getScreenWidth(t){this.screenSizeSvc.onResize(t)}exportToPDF(){this.tableSvc.getBilanpdf().subscribe(t=>{console.log(t.data),window.open(t.data.link,"_blank")},t=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(se.h),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bilan"]],features:[e._Bn([f._W])],decls:45,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"la","la-file-pdf"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"bg-primary","text-default",2,"font-weight","bold","color","#fff0ff"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.exportToPDF()}),e._UZ(4,"i",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"h4",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",9),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"table",11),e.TgZ(16,"thead"),e.TgZ(17,"tr"),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Effectif"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Total encaiss\xe9"),e.qZA(),e.TgZ(25,"th"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,ze,11,5,"tr",12),e.qZA(),e.TgZ(33,"tfoot"),e.TgZ(34,"tr",13),e.TgZ(35,"td"),e._uU(36,"TOTAL"),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.TgZ(43,"td"),e._uU(44),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij("",e.lcZ(6,10,"action.print")," "),e.xp6(5),e.Oqu(e.lcZ(11,12,"title.bilan")),e.xp6(9),e.Oqu(e.lcZ(20,14,"fields.classe")),e.xp6(7),e.Oqu(e.lcZ(27,16,"fields.totalrestant")),e.xp6(3),e.Oqu(e.lcZ(30,18,"fields.totalscolarite")),e.xp6(3),e.Q6J("ngForOf",i.rows),e.xp6(6),e.Oqu(i.effectif),e.xp6(2),e.Oqu(i.sumrow),e.xp6(2),e.Oqu(i.sumrestantrow),e.xp6(2),e.Oqu(i.sumtotalrow))},directives:[m.oH,d.sg],pipes:[q.X$],styles:[""]}),o})(),le=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.API_URL+"depenses",this.apiUrlrecette=V.N.API_URL+"recettes",this.httpOptions={headers:new P.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"})}}getDepenses(){return this.http.get(this.apiUrl).pipe((0,C.b)(t=>console.log("fetched getDepenses")),(0,w.K)(this.handleError("getDepenses",[])))}getDepense(t){return this.http.get(`${this.apiUrl}/${t}`).pipe((0,C.b)(s=>console.log(`fetched depense id=${t}`)),(0,w.K)(this.handleError(`getDepense id=${t}`)))}addDepense(t){return this.http.post(this.apiUrl,t,this.httpOptions).pipe((0,C.b)(i=>console.log(`added depense w/ id=${t.id}`)),(0,w.K)(this.handleError("addDepense")))}getRecettes(){return this.http.get(this.apiUrlrecette).pipe((0,C.b)(t=>console.log("fetched getRecettes")),(0,w.K)(this.handleError("getRecettes",[])))}getRecette(t){return this.http.get(`${this.apiUrlrecette}/${t}`).pipe((0,C.b)(s=>console.log(`fetched Recette id=${t}`)),(0,w.K)(this.handleError(`getRecette id=${t}`)))}addRecette(t){return this.http.post(this.apiUrlrecette,t,this.httpOptions).pipe((0,C.b)(i=>console.log(`added Recette w/ id=${t.id}`)),(0,w.K)(this.handleError("addRecette")))}handleError(t="operation",i){return s=>(console.error(s),(0,ie.of)(i))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const De=["childModal"];function We(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student.name," ")}function $e(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function Xe(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant_scolarite," ")}function Ke(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.operateur," ")}function et(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.created," ")}function tt(o,n){if(1&o&&(e.TgZ(0,"ng-option",40),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const nt=function(){return{backdrop:"static"}};let ot=(()=>{class o{constructor(t,i,s,l,u,g){this.route=t,this.router=i,this.formBuilder=s,this.tableSvc=l,this.cdr=u,this.screenSizeSvc=g,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(_=>{_.includes(h.y.XXL)||_.includes(h.y.XL)||_.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({name:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(220)]],sexe:[null,a.kI.required],dateborn:[null,a.kI.nullValidator],smsphone:[null,a.kI.nullValidator],whatsapp:[null,a.kI.nullValidator],fatherphone:[null,a.kI.nullValidator],fathername:[null,a.kI.nullValidator],mothername:[null,a.kI.nullValidator],motherphone:[null,a.kI.nullValidator],professionfather:[null,a.kI.nullValidator],professionmother:[null,a.kI.nullValidator],photo:[null,a.kI.nullValidator],lieunaissance:[null,a.kI.nullValidator],adresse:[null,a.kI.nullValidator]})}fetch(){this.tableSvc.getDepenses().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}onSubmit(){const t={data:this.formGroup.value};console.log(t),this.tableSvc.addDepense(t).subscribe(i=>{this.fetch()},i=>{console.log(i)})}onReset(){this.formGroup.reset()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}goToTypeDepense(){this.router.navigate(["/comptabilite/typedepense"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.gz),e.Y36(U.F0),e.Y36(a.qu),e.Y36(le),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-depense"]],viewQuery:function(t,i){if(1&t&&(e.Gf(r.nE,5),e.Gf(De,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first),e.iGM(s=e.CRH())&&(i.childModal=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},features:[e._Bn([f._W])],decls:57,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary","btn-sm","me-md-2",3,"click"],[1,"la","la-plus"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[1,"la","la-users"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH"],["table",""],["name","Type depense",3,"width"],["ngx-datatable-cell-template",""],["name","Montant",3,"width"],["name","Date d'operation",3,"width"],["name","Operateur",3,"width"],["name","Cr\xe9er le",3,"width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","student"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","montant",1,"form-control"],["formControlName","redoublant","single","true"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.showChildModal()}),e._UZ(4,"i",4),e._uU(5,"Ajouter une depense"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.goToTypeDepense()}),e._UZ(7,"i",6),e._uU(8,"Types de depenses"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"h4",9),e._uU(12,"Depenses"),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"input",11),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"ngx-datatable",13,14),e.TgZ(18,"ngx-datatable-column",15),e.YNc(19,We,1,1,"ng-template",16),e.qZA(),e.TgZ(20,"ngx-datatable-column",17),e.YNc(21,$e,1,1,"ng-template",16),e.qZA(),e.TgZ(22,"ngx-datatable-column",18),e.YNc(23,Xe,1,1,"ng-template",16),e.qZA(),e.TgZ(24,"ngx-datatable-column",19),e.YNc(25,Ke,1,1,"ng-template",16),e.qZA(),e.TgZ(26,"ngx-datatable-column",20),e.YNc(27,et,1,1,"ng-template",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",21,22),e.TgZ(30,"div",23),e.TgZ(31,"div",24),e.TgZ(32,"div",25),e.TgZ(33,"h4",26),e._uU(34,"Nouvelle inscription"),e.qZA(),e.TgZ(35,"button",27),e.NdJ("click",function(){return i.hideChildModal()}),e.TgZ(36,"span",28),e._uU(37,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",29),e.TgZ(39,"form",30),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(40,"div",31),e.TgZ(41,"div",32),e.TgZ(42,"label",33),e._uU(43,"Student"),e.qZA(),e.TgZ(44,"ng-select",34),e.YNc(45,tt,2,2,"ng-option",35),e.qZA(),e.qZA(),e.TgZ(46,"div",32),e.TgZ(47,"label",33),e._uU(48,"Montant"),e.qZA(),e._UZ(49,"input",36),e.qZA(),e.TgZ(50,"div",32),e.TgZ(51,"checkbox",37),e._uU(52,"Redoublant"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"button",38),e.NdJ("click",function(){return i.onReset()}),e._uU(54,"Reset"),e.qZA(),e.TgZ(55,"button",39),e._uU(56,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(16),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("config",e.DdM(17,nt)),e.xp6(11),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("ngForOf",i.rows))},directives:[m.oH,r.nE,r.UC,r.vq,S.oB,a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,oe.b,Z.xv],styles:[""]}),o})();const it=["childModal"];function st(o,n){if(1&o&&(e.TgZ(0,"div",40),e._UZ(1,"avatar",41),e.TgZ(2,"div",42),e.TgZ(3,"div",43),e._uU(4),e.qZA(),e.TgZ(5,"div",44),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=n.row;e.xp6(1),e.Q6J("size",38)("src",t.img),e.xp6(3),e.Oqu(t.student.name),e.xp6(2),e.Oqu(t.student.adresseMail)}}function at(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.classe," ")}function lt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant_scolarite," ")}function rt(o,n){if(1&o&&e._uU(0),2&o){const t=n.row;e.hij(" ",t.montant_scolarite-t.montant_restant," ")}}function ct(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant_restant," ")}function dt(o,n){if(1&o&&(e.TgZ(0,"ng-option",45),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const ut=function(){return{backdrop:"static"}};let pt=(()=>{class o{constructor(t,i,s,l,u,g){this.route=t,this.router=i,this.formBuilder=s,this.tableSvc=l,this.cdr=u,this.screenSizeSvc=g,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(_=>{_.includes(h.y.XXL)||_.includes(h.y.XL)||_.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({name:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(220)]],sexe:[null,a.kI.required],dateborn:[null,a.kI.nullValidator],smsphone:[null,a.kI.nullValidator],whatsapp:[null,a.kI.nullValidator],fatherphone:[null,a.kI.nullValidator],fathername:[null,a.kI.nullValidator],mothername:[null,a.kI.nullValidator],motherphone:[null,a.kI.nullValidator],professionfather:[null,a.kI.nullValidator],professionmother:[null,a.kI.nullValidator],photo:[null,a.kI.nullValidator],lieunaissance:[null,a.kI.nullValidator],adresse:[null,a.kI.nullValidator]})}fetch(){this.tableSvc.getDepenses().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}onSubmit(){const t={data:this.formGroup.value};console.log(t),this.tableSvc.addDepense(t).subscribe(i=>{this.fetch()},i=>{console.log(i)})}onReset(){this.formGroup.reset()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}goToTypeRecette(){this.router.navigate(["/comptabilite/typerecette"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.gz),e.Y36(U.F0),e.Y36(a.qu),e.Y36(le),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-recette"]],viewQuery:function(t,i){if(1&t&&(e.Gf(r.nE,5),e.Gf(it,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first),e.iGM(s=e.CRH())&&(i.childModal=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},features:[e._Bn([f._W])],decls:57,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary","btn-sm","me-md-2",3,"click"],[1,"la","la-plus"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[1,"la","la-users"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH"],["table",""],["name","Student",3,"width"],["ngx-datatable-cell-template",""],["name","Classe",3,"width"],["name","Montant scolarite",3,"width"],["name","Montant verse",3,"width"],["name","Montant restant",3,"width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","student"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","montant",1,"form-control"],["formControlName","redoublant","single","true"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],[1,"text-muted"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.showChildModal()}),e._UZ(4,"i",4),e._uU(5,"Ajouter une recette"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.goToTypeRecette()}),e._UZ(7,"i",6),e._uU(8,"Type de recette"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"h4",9),e._uU(12,"Recettes"),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"input",11),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"ngx-datatable",13,14),e.TgZ(18,"ngx-datatable-column",15),e.YNc(19,st,7,4,"ng-template",16),e.qZA(),e.TgZ(20,"ngx-datatable-column",17),e.YNc(21,at,1,1,"ng-template",16),e.qZA(),e.TgZ(22,"ngx-datatable-column",18),e.YNc(23,lt,1,1,"ng-template",16),e.qZA(),e.TgZ(24,"ngx-datatable-column",19),e.YNc(25,rt,1,1,"ng-template",16),e.qZA(),e.TgZ(26,"ngx-datatable-column",20),e.YNc(27,ct,1,1,"ng-template",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",21,22),e.TgZ(30,"div",23),e.TgZ(31,"div",24),e.TgZ(32,"div",25),e.TgZ(33,"h4",26),e._uU(34,"Nouvelle inscription"),e.qZA(),e.TgZ(35,"button",27),e.NdJ("click",function(){return i.hideChildModal()}),e.TgZ(36,"span",28),e._uU(37,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",29),e.TgZ(39,"form",30),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(40,"div",31),e.TgZ(41,"div",32),e.TgZ(42,"label",33),e._uU(43,"Type de recette"),e.qZA(),e.TgZ(44,"ng-select",34),e.YNc(45,dt,2,2,"ng-option",35),e.qZA(),e.qZA(),e.TgZ(46,"div",32),e.TgZ(47,"label",33),e._uU(48,"Montant"),e.qZA(),e._UZ(49,"input",36),e.qZA(),e.TgZ(50,"div",32),e.TgZ(51,"checkbox",37),e._uU(52,"Redoublant"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"button",38),e.NdJ("click",function(){return i.onReset()}),e._uU(54,"Reset"),e.qZA(),e.TgZ(55,"button",39),e._uU(56,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(16),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("config",e.DdM(17,ut)),e.xp6(11),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("ngForOf",i.rows))},directives:[m.oH,r.nE,r.UC,r.vq,S.oB,a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,oe.b,ae.A,Z.xv],styles:[""]}),o})();const mt=["childModal"];function ht(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student.name," ")}function gt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function _t(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant_scolarite," ")}function Zt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.operateur," ")}function ft(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.created," ")}function bt(o,n){if(1&o&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const Tt=function(){return{backdrop:"static"}};let vt=(()=>{class o{constructor(t,i,s,l,u,g){this.route=t,this.router=i,this.formBuilder=s,this.tableSvc=l,this.cdr=u,this.screenSizeSvc=g,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(_=>{_.includes(h.y.XXL)||_.includes(h.y.XL)||_.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({name:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(220)]],sexe:[null,a.kI.required],dateborn:[null,a.kI.nullValidator],smsphone:[null,a.kI.nullValidator],whatsapp:[null,a.kI.nullValidator],fatherphone:[null,a.kI.nullValidator],fathername:[null,a.kI.nullValidator],mothername:[null,a.kI.nullValidator],motherphone:[null,a.kI.nullValidator],professionfather:[null,a.kI.nullValidator],professionmother:[null,a.kI.nullValidator],photo:[null,a.kI.nullValidator],lieunaissance:[null,a.kI.nullValidator],adresse:[null,a.kI.nullValidator]})}fetch(){this.tableSvc.getDepenses().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}onSubmit(){const t={data:this.formGroup.value};console.log(t),this.tableSvc.addDepense(t).subscribe(i=>{this.fetch()},i=>{console.log(i)})}onReset(){this.formGroup.reset()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.gz),e.Y36(U.F0),e.Y36(a.qu),e.Y36(le),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-typerecette"]],viewQuery:function(t,i){if(1&t&&(e.Gf(r.nE,5),e.Gf(mt,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first),e.iGM(s=e.CRH())&&(i.childModal=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},decls:54,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary","btn-sm","me-md-2",3,"click"],[1,"la","la-plus"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH"],["table",""],["name","Type depense",3,"width"],["ngx-datatable-cell-template",""],["name","Montant",3,"width"],["name","Date d'operation",3,"width"],["name","Operateur",3,"width"],["name","Cr\xe9er le",3,"width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","student"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","montant",1,"form-control"],["formControlName","redoublant","single","true"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.showChildModal()}),e._UZ(4,"i",4),e._uU(5,"Ajouter un type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"h4",7),e._uU(9,"Type de recette"),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"ngx-datatable",11,12),e.TgZ(15,"ngx-datatable-column",13),e.YNc(16,ht,1,1,"ng-template",14),e.qZA(),e.TgZ(17,"ngx-datatable-column",15),e.YNc(18,gt,1,1,"ng-template",14),e.qZA(),e.TgZ(19,"ngx-datatable-column",16),e.YNc(20,_t,1,1,"ng-template",14),e.qZA(),e.TgZ(21,"ngx-datatable-column",17),e.YNc(22,Zt,1,1,"ng-template",14),e.qZA(),e.TgZ(23,"ngx-datatable-column",18),e.YNc(24,ft,1,1,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",19,20),e.TgZ(27,"div",21),e.TgZ(28,"div",22),e.TgZ(29,"div",23),e.TgZ(30,"h4",24),e._uU(31,"Nouveau type de recette"),e.qZA(),e.TgZ(32,"button",25),e.NdJ("click",function(){return i.hideChildModal()}),e.TgZ(33,"span",26),e._uU(34,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",27),e.TgZ(36,"form",28),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(37,"div",29),e.TgZ(38,"div",30),e.TgZ(39,"label",31),e._uU(40,"Student"),e.qZA(),e.TgZ(41,"ng-select",32),e.YNc(42,bt,2,2,"ng-option",33),e.qZA(),e.qZA(),e.TgZ(43,"div",30),e.TgZ(44,"label",31),e._uU(45,"Montant"),e.qZA(),e._UZ(46,"input",34),e.qZA(),e.TgZ(47,"div",30),e.TgZ(48,"checkbox",35),e._uU(49,"Redoublant"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"button",36),e.NdJ("click",function(){return i.onReset()}),e._uU(51,"Reset"),e.qZA(),e.TgZ(52,"button",37),e._uU(53,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("config",e.DdM(17,Tt)),e.xp6(11),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("ngForOf",i.rows))},directives:[m.oH,r.nE,r.UC,r.vq,S.oB,a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,oe.b,Z.xv],styles:[""]}),o})();const At=["childModal"];function qt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student.name," ")}function Ct(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function wt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant_scolarite," ")}function Ut(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.operateur," ")}function yt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.created," ")}function St(o,n){if(1&o&&(e.TgZ(0,"ng-option",38),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}const xt=function(){return{backdrop:"static"}};let Mt=(()=>{class o{constructor(t,i,s,l,u,g){this.route=t,this.router=i,this.formBuilder=s,this.tableSvc=l,this.cdr=u,this.screenSizeSvc=g,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(_=>{_.includes(h.y.XXL)||_.includes(h.y.XL)||_.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch(),this.formGroup=this.formBuilder.group({name:["",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(220)]],sexe:[null,a.kI.required],dateborn:[null,a.kI.nullValidator],smsphone:[null,a.kI.nullValidator],whatsapp:[null,a.kI.nullValidator],fatherphone:[null,a.kI.nullValidator],fathername:[null,a.kI.nullValidator],mothername:[null,a.kI.nullValidator],motherphone:[null,a.kI.nullValidator],professionfather:[null,a.kI.nullValidator],professionmother:[null,a.kI.nullValidator],photo:[null,a.kI.nullValidator],lieunaissance:[null,a.kI.nullValidator],adresse:[null,a.kI.nullValidator]})}fetch(){this.tableSvc.getDepenses().subscribe(t=>{this.temp=[...t.data],this.rows=t.data,this.cdr.markForCheck(),console.log(this.temp)},t=>{console.log(t)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}onSubmit(){const t={data:this.formGroup.value};console.log(t),this.tableSvc.addDepense(t).subscribe(i=>{this.fetch()},i=>{console.log(i)})}onReset(){this.formGroup.reset()}getScreenWidth(t){this.screenSizeSvc.onResize(t)}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U.gz),e.Y36(U.F0),e.Y36(a.qu),e.Y36(le),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-typedepense"]],viewQuery:function(t,i){if(1&t&&(e.Gf(r.nE,5),e.Gf(At,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first),e.iGM(s=e.CRH())&&(i.childModal=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},decls:54,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-primary","btn-sm","me-md-2",3,"click"],[1,"la","la-plus"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH"],["table",""],["name","Type depense",3,"width"],["ngx-datatable-cell-template",""],["name","Montant",3,"width"],["name","Date d'operation",3,"width"],["name","Operateur",3,"width"],["name","Cr\xe9er le",3,"width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","student"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","montant",1,"form-control"],["formControlName","redoublant","single","true"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.showChildModal()}),e._UZ(4,"i",4),e._uU(5,"Ajouter un type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"h4",7),e._uU(9,"Type depenses"),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",9),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"ngx-datatable",11,12),e.TgZ(15,"ngx-datatable-column",13),e.YNc(16,qt,1,1,"ng-template",14),e.qZA(),e.TgZ(17,"ngx-datatable-column",15),e.YNc(18,Ct,1,1,"ng-template",14),e.qZA(),e.TgZ(19,"ngx-datatable-column",16),e.YNc(20,wt,1,1,"ng-template",14),e.qZA(),e.TgZ(21,"ngx-datatable-column",17),e.YNc(22,Ut,1,1,"ng-template",14),e.qZA(),e.TgZ(23,"ngx-datatable-column",18),e.YNc(24,yt,1,1,"ng-template",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",19,20),e.TgZ(27,"div",21),e.TgZ(28,"div",22),e.TgZ(29,"div",23),e.TgZ(30,"h4",24),e._uU(31,"Nouvelle inscription"),e.qZA(),e.TgZ(32,"button",25),e.NdJ("click",function(){return i.hideChildModal()}),e.TgZ(33,"span",26),e._uU(34,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",27),e.TgZ(36,"form",28),e.NdJ("validSubmit",function(){return i.onSubmit()}),e.TgZ(37,"div",29),e.TgZ(38,"div",30),e.TgZ(39,"label",31),e._uU(40,"Student"),e.qZA(),e.TgZ(41,"ng-select",32),e.YNc(42,St,2,2,"ng-option",33),e.qZA(),e.qZA(),e.TgZ(43,"div",30),e.TgZ(44,"label",31),e._uU(45,"Montant"),e.qZA(),e._UZ(46,"input",34),e.qZA(),e.TgZ(47,"div",30),e.TgZ(48,"checkbox",35),e._uU(49,"Redoublant"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"button",36),e.NdJ("click",function(){return i.onReset()}),e._uU(51,"Reset"),e.qZA(),e.TgZ(52,"button",37),e._uU(53,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",350),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("config",e.DdM(17,xt)),e.xp6(11),e.Q6J("formGroup",i.formGroup),e.xp6(6),e.Q6J("ngForOf",i.rows))},directives:[m.oH,r.nE,r.UC,r.vq,S.oB,a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,oe.b,Z.xv],styles:[""]}),o})();function Jt(o,n){if(1&o&&(e.TgZ(0,"div",13),e._UZ(1,"avatar",14),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e._uU(4),e.qZA(),e.TgZ(5,"div",17),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=n.row;e.xp6(1),e.Q6J("size",38)("src",t.img),e.xp6(3),e.Oqu(t.student.name),e.xp6(2),e.Oqu(t.student.adresseMail)}}function kt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function Ht(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montantrestant," ")}function Nt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.created_at," ")}let Ot=(()=>{class o{constructor(t,i,s,l,u){this.formBuilder=t,this.scolariteService=i,this.auth=s,this.cdr=l,this.screenSizeSvc=u,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(g=>{g.includes(h.y.XXL)||g.includes(h.y.XL)||g.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch()}onPage(t){}pageLimit(t){console.log(this.ipp),this.rows&&(this.table.pageSize=50)}fetch(){localStorage.getItem("currentUser"),this.scolariteService.getMouventcaisse(this.auth.currentUserValue.id).subscribe(i=>{this.temp=[...i.data],this.rows=i.data,this.cdr.markForCheck(),console.log(this.temp)},i=>{console.log(i)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.name.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}getScreenWidth(t){this.screenSizeSvc.onResize(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(se.h),e.Y36(k.$),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mouvement"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},decls:26,vars:28,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],[1,"text-muted"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",6),e.TgZ(9,"div",6),e.TgZ(10,"input",7),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"ngx-datatable",9,10),e.NdJ("activate",function(l){return i.onActivate(l)})("select",function(l){return i.onSelect(l)}),e.TgZ(14,"ngx-datatable-column",11),e.ALo(15,"translate"),e.YNc(16,Jt,7,4,"ng-template",12),e.qZA(),e.TgZ(17,"ngx-datatable-column",11),e.ALo(18,"translate"),e.YNc(19,kt,1,1,"ng-template",12),e.qZA(),e.TgZ(20,"ngx-datatable-column",11),e.ALo(21,"translate"),e.YNc(22,Ht,1,1,"ng-template",12),e.qZA(),e.TgZ(23,"ngx-datatable-column",11),e.ALo(24,"translate"),e.YNc(25,Nt,1,1,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,18,"title.mouvementcaisse")),e.xp6(6),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(15,20,"fields.student")),e.Q6J("width",350),e.xp6(3),e.s9C("name",e.lcZ(18,22,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(21,24,"fields.montantrestant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(24,26,"fields.datecreation")),e.Q6J("width",70))},directives:[m.oH,r.nE,r.UC,r.vq,ae.A],pipes:[q.X$],styles:[""]}),o})();var c=p(2471);const Yt=["childModal"];function Qt(o,n){1&o&&(e.TgZ(0,"span",34),e._uU(1,"journ\xe9e comptable clotur\xe9e"),e.qZA())}function It(o,n){1&o&&(e.TgZ(0,"span",35),e._uU(1,"journ\xe9e comptable ouverte"),e.qZA())}const Rt=function(o){return{"foreign-color":o}};class z{constructor(n,t,i,s,l,u){this.datePipe=n,this.modalService=t,this.cdr=i,this.authenticationService=s,this.personnelService=l,this.journeecomptableService=u,this.config={backdrop:!0,ignoreBackdropClick:!1},this.billet10000=0,this.piece50=0,this.piece100=0,this.piece500=0,this.billet500=0,this.billet1000=0,this.billet2000=0,this.billet5000=0,this.totalbilletage=0,this.billetv5000=0,this.billetv10000=0,this.billetv2000=0,this.billetv1000=0,this.billetv500=0,this.piecev500=0,this.piecev100=0,this.piecev50=0,this.totalstaus=!1}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.personnel=n.data,this.caisse=n.data.caisse.libelle,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.solde=t.soldetheorique,this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),t.status?(this.cloturedisabled=!1,this.uncloturedisabled=!0,this.conrfimdisabled=!1):(this.cloturedisabled=!0,this.uncloturedisabled=!1,this.conrfimdisabled=!0),this.cloturedisabled=!t.status,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{})},n=>{}),console.log(this.datecomptable),this.cdr.detectChanges()}openModal(n){this.modalRef=this.modalService.show(n,this.config)}hideChildModal(){}onChange(n){this.journeecomptableService.getBydateAndCaisse(this.personnel.caisse.id,this.datecomptable).subscribe(t=>{this.solde=t.soldetheorique,this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,t.status?(this.cloturedisabled=!1,this.uncloturedisabled=!0,this.conrfimdisabled=!1):(this.cloturedisabled=!0,this.uncloturedisabled=!1,this.conrfimdisabled=!0),this.cdr.detectChanges()},t=>{})}billetageChange(n,t){5e3==t?this.billetv5000=n*t:1e4==t?this.billetv10000=n*t:2e3==t?this.billetv2000=n*t:1e3==t?this.billetv1000=n*t:500==t&&(this.billetv500=n*t),this.totalbilletage=this.billetv10000+this.billetv5000+this.billetv2000+this.billetv1000+this.billetv500+this.piecev500+ +this.piecev100+this.piecev50,this.totalstaus=this.totalbilletage>=this.solde}pieceChange(n,t){500==t?this.piecev500=n*t:100==t?this.piecev100=n*t:50==t&&(this.piecev50=n*t),this.totalbilletage=this.billetv10000+this.billetv5000+this.billetv2000+this.billetv1000+this.billetv500+this.piecev500+ +this.piecev100+this.piecev50,this.totalstaus=this.totalbilletage>=this.solde}cloture(){this.journeecomptableService.cloture(this.personnel.caisse.id,this.datecomptable).subscribe(n=>{n.status?(this.cloturedisabled=!1,this.uncloturedisabled=!0,this.conrfimdisabled=!1):(this.cloturedisabled=!0,this.uncloturedisabled=!1,this.conrfimdisabled=!0),this.caissestatus=n.status,this.cdr.detectChanges()},n=>{})}decloture(){this.journeecomptableService.decloture(this.personnel.caisse.id,this.datecomptable).subscribe(n=>{n.status?(this.cloturedisabled=!1,this.uncloturedisabled=!0,this.conrfimdisabled=!1):(this.cloturedisabled=!0,this.uncloturedisabled=!1,this.conrfimdisabled=!0),this.caissestatus=n.status,this.cdr.detectChanges()},n=>{})}confirmSolde(){this.conrfimdisabled=!0,this.cloturedisabled=!1}calcul(){this.totalbilletage=0,this.billet10000=0,this.billet5000=0,this.billet1000=0,this.billet2000=0,this.billet500=0,this.piece500=0,this.piece100=0,this.piece50=0}}z.\u0275fac=function(n){return new(n||z)(e.Y36(d.uU),e.Y36(S.tT),e.Y36(e.sBO),e.Y36(k.$),e.Y36(R.G),e.Y36(Q))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-journeecomptable"]],viewQuery:function(n,t){if(1&n&&e.Gf(Yt,5),2&n){let i;e.iGM(i=e.CRH())&&(t.childModal=i.first)}},outputs:{datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:104,vars:54,consts:[[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"input-group","mb-3"],["id","basic-addon10000",1,"input-group-text"],["type","number","placeholder","0","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"min","ngModel","change","ngModelChange"],["type","text","placeholder","0.0","aria-label","Server",1,"form-control",3,"ngModel","ngModelChange"],["id","basic-addon5000",1,"input-group-text"],["id","basic-addon2000",1,"input-group-text"],["id","basic-addon1000",1,"input-group-text"],["id","basic-addon500",1,"input-group-text"],["id","basic-addonp500",1,"input-group-text"],["id","basic-addon100",1,"input-group-text"],["id","basic-addon50",1,"input-group-text"],[1,"card-footer"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"input-group","mb-3",3,"ngClass"],["disabled","","type","number","placeholder","0","aria-label","Username","aria-describedby","basic-addon1",1,"form-control","solde",3,"ngModel","ngModelChange"],[1,"col-md-8"],["class","btn btn-danger btn-sm",4,"ngIf"],["class","btn btn-success btn-sm",4,"ngIf"],[1,"form-group","mb-3"],[1,"form-label"],["type","date",1,"form-control",3,"ngModel","change","ngModelChange"],[1,"form-group","mb-3","col-md-6"],["type","number","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-6"],["readonly","","type","number","disabled","",1,"form-control","solde",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-outline-primary","btn-lg","col-md-8","mb-2",3,"disabled","click"],[1,"col-md-6","d-grid","gap-2"],["type","button",1,"btn","btn-success","col-md-6",3,"disabled","click"],["type","button",1,"btn","btn-danger","col-md-6",3,"disabled","click"],[1,"btn","btn-danger","btn-sm"],[1,"btn","btn-success","btn-sm"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",0),e.TgZ(5,"div",1),e.TgZ(6,"div",2),e.TgZ(7,"div",3),e.TgZ(8,"h4"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"div",5),e.TgZ(13,"span",6),e._uU(14,"10000"),e.qZA(),e.TgZ(15,"input",7),e.NdJ("change",function(){return t.billetageChange(t.billet10000,1e4)})("ngModelChange",function(s){return t.billet10000=s}),e.qZA(),e.TgZ(16,"input",8),e.NdJ("ngModelChange",function(s){return t.billetv10000=s}),e.qZA(),e.qZA(),e.TgZ(17,"div",5),e.TgZ(18,"span",9),e._uU(19,"5000"),e.qZA(),e.TgZ(20,"input",7),e.NdJ("change",function(){return t.billetageChange(t.billet5000,5e3)})("ngModelChange",function(s){return t.billet5000=s}),e.qZA(),e.TgZ(21,"input",8),e.NdJ("ngModelChange",function(s){return t.billetv5000=s}),e.qZA(),e.qZA(),e.TgZ(22,"div",5),e.TgZ(23,"span",10),e._uU(24,"2000"),e.qZA(),e.TgZ(25,"input",7),e.NdJ("change",function(){return t.billetageChange(t.billet2000,2e3)})("ngModelChange",function(s){return t.billet2000=s}),e.qZA(),e.TgZ(26,"input",8),e.NdJ("ngModelChange",function(s){return t.billetv2000=s}),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"span",11),e._uU(29,"1000"),e.qZA(),e.TgZ(30,"input",7),e.NdJ("change",function(){return t.billetageChange(t.billet1000,1e3)})("ngModelChange",function(s){return t.billet1000=s}),e.qZA(),e.TgZ(31,"input",8),e.NdJ("ngModelChange",function(s){return t.billetv1000=s}),e.qZA(),e.qZA(),e.TgZ(32,"div",5),e.TgZ(33,"span",12),e._uU(34,"500"),e.qZA(),e.TgZ(35,"input",7),e.NdJ("change",function(){return t.billetageChange(t.billet500,500)})("ngModelChange",function(s){return t.billet500=s}),e.qZA(),e.TgZ(36,"input",8),e.NdJ("ngModelChange",function(s){return t.billetv500=s}),e.qZA(),e.qZA(),e.TgZ(37,"h5"),e._uU(38,"Pi\xe9ces"),e.qZA(),e.TgZ(39,"div",5),e.TgZ(40,"span",13),e._uU(41,"500"),e.qZA(),e.TgZ(42,"input",7),e.NdJ("change",function(){return t.pieceChange(t.piece500,500)})("ngModelChange",function(s){return t.piece500=s}),e.qZA(),e.TgZ(43,"input",8),e.NdJ("ngModelChange",function(s){return t.piecev500=s}),e.qZA(),e.qZA(),e.TgZ(44,"div",5),e.TgZ(45,"span",14),e._uU(46,"100"),e.qZA(),e.TgZ(47,"input",7),e.NdJ("change",function(){return t.pieceChange(t.piece100,100)})("ngModelChange",function(s){return t.piece100=s}),e.qZA(),e.TgZ(48,"input",8),e.NdJ("ngModelChange",function(s){return t.piecev100=s}),e.qZA(),e.qZA(),e.TgZ(49,"div",5),e.TgZ(50,"span",15),e._uU(51,"50"),e.qZA(),e.TgZ(52,"input",7),e.NdJ("change",function(){return t.pieceChange(t.piece50,50)})("ngModelChange",function(s){return t.piece50=s}),e.qZA(),e.TgZ(53,"input",8),e.NdJ("ngModelChange",function(s){return t.piecev50=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(54,"div",16),e.TgZ(55,"button",17),e.NdJ("click",function(){return t.calcul()}),e._uU(56,"Reset"),e.qZA(),e.TgZ(57,"h4"),e._uU(58,"Total:"),e.qZA(),e.TgZ(59,"div",18),e.TgZ(60,"input",19),e.NdJ("ngModelChange",function(s){return t.totalbilletage=s}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",20),e.TgZ(62,"div",2),e.TgZ(63,"div",3),e.TgZ(64,"h5"),e._uU(65),e.YNc(66,Qt,2,0,"span",21),e.YNc(67,It,2,0,"span",22),e.qZA(),e.qZA(),e.TgZ(68,"div",4),e.TgZ(69,"div",23),e.TgZ(70,"label",24),e._uU(71,"Date"),e.qZA(),e.TgZ(72,"input",25),e.NdJ("change",function(s){return t.onChange(s)})("ngModelChange",function(s){return t.datecomptable=s}),e.qZA(),e.qZA(),e.TgZ(73,"div",26),e.TgZ(74,"label",24),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"input",27),e.NdJ("ngModelChange",function(s){return t.soldeouverture=s}),e.qZA(),e.qZA(),e.TgZ(78,"div",0),e.TgZ(79,"div",28),e.TgZ(80,"div",23),e.TgZ(81,"label",24),e._uU(82),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"input",27),e.NdJ("ngModelChange",function(s){return t.versement=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",28),e.TgZ(86,"div",23),e.TgZ(87,"label",24),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"input",27),e.NdJ("ngModelChange",function(s){return t.retrait=s}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(91,"div",23),e.TgZ(92,"label",24),e._uU(93,"Solde"),e.qZA(),e.TgZ(94,"input",29),e.NdJ("ngModelChange",function(s){return t.solde=s}),e.qZA(),e.qZA(),e.TgZ(95,"button",30),e.NdJ("click",function(){return t.confirmSolde()}),e._uU(96,"Confirmer le solde"),e.qZA(),e.TgZ(97,"div",0),e.TgZ(98,"div",31),e.TgZ(99,"button",32),e.NdJ("click",function(){return t.cloture()}),e._uU(100,"Clotur\xe9"),e.qZA(),e.qZA(),e.TgZ(101,"div",31),e.TgZ(102,"button",33),e.NdJ("click",function(){return t.decloture()}),e._uU(103,"D\xe9clotur\xe9"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,42,"title.journeecomptable")),e.xp6(7),e.Oqu(e.lcZ(10,44,"title.billetage")),e.xp6(6),e.Q6J("min",0)("ngModel",t.billet10000),e.xp6(1),e.Q6J("ngModel",t.billetv10000),e.xp6(4),e.Q6J("min",0)("ngModel",t.billet5000),e.xp6(1),e.Q6J("ngModel",t.billetv5000),e.xp6(4),e.Q6J("min",0)("ngModel",t.billet2000),e.xp6(1),e.Q6J("ngModel",t.billetv2000),e.xp6(4),e.Q6J("min",0)("ngModel",t.billet1000),e.xp6(1),e.Q6J("ngModel",t.billetv1000),e.xp6(4),e.Q6J("min",0)("ngModel",t.billet500),e.xp6(1),e.Q6J("ngModel",t.billetv500),e.xp6(6),e.Q6J("min",0)("ngModel",t.piece500),e.xp6(1),e.Q6J("ngModel",t.piecev500),e.xp6(4),e.Q6J("min",0)("ngModel",t.piece100),e.xp6(1),e.Q6J("ngModel",t.piecev100),e.xp6(4),e.Q6J("min",0)("ngModel",t.piece50),e.xp6(1),e.Q6J("ngModel",t.piecev50),e.xp6(6),e.Q6J("ngClass",e.VKq(52,Rt,t.totalstaus)),e.xp6(1),e.Q6J("ngModel",t.totalbilletage),e.xp6(5),e.hij("",t.caisse,"- "),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(1),e.Q6J("ngIf",t.caissestatus),e.xp6(5),e.Q6J("ngModel",t.datecomptable),e.xp6(3),e.Oqu(e.lcZ(76,46,"fields.soldeouverture")),e.xp6(2),e.Q6J("ngModel",t.soldeouverture),e.xp6(5),e.Oqu(e.lcZ(83,48,"fields.versement")),e.xp6(2),e.Q6J("ngModel",t.versement),e.xp6(4),e.Oqu(e.lcZ(89,50,"fields.retrait")),e.xp6(2),e.Q6J("ngModel",t.retrait),e.xp6(4),e.Q6J("ngModel",t.solde),e.xp6(1),e.Q6J("disabled",t.conrfimdisabled),e.xp6(4),e.Q6J("disabled",t.cloturedisabled),e.xp6(3),e.Q6J("disabled",t.uncloturedisabled))},directives:[a.qQ,a.wV,a.Fj,m.oH,a.JJ,a.On,d.mk,d.O5,m.HK],pipes:[q.X$],styles:[".solde[_ngcontent-%COMP%]{font-size:30px;color:#00e}.foreign-color[_ngcontent-%COMP%]{border-color:#99069a;color:#99069a}"]}),(0,N.gn)([(0,J.Ph)(L.j)],z.prototype,"user1$",void 0);var ce=p(735);function Lt(o,n){if(1&o&&(e.TgZ(0,"ng-option",25),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.libelle)}}function jt(o,n){1&o&&(e.TgZ(0,"span",26),e._uU(1,"ouverte"),e.qZA())}function Ft(o,n){1&o&&(e.TgZ(0,"span",27),e._uU(1,"non ouverte"),e.qZA())}function Et(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Gt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function Vt(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.caissefinal.libelle," ")}function Pt(o,n){1&o&&(e.TgZ(0,"span",30),e._uU(1,"encours"),e.qZA())}function zt(o,n){1&o&&(e.TgZ(0,"span",31),e._uU(1,"valide"),e.qZA())}function Bt(o,n){if(1&o&&(e.YNc(0,Pt,2,0,"span",28),e.YNc(1,zt,2,0,"span",29)),2&o){const t=n.row;e.Q6J("ngIf",!t.status),e.xp6(1),e.Q6J("ngIf",t.status)}}function Dt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().row;return e.oxw().validate(s)}),e._uU(1,"valide"),e.qZA()}}function Wt(o,n){if(1&o&&e.YNc(0,Dt,2,0,"button",32),2&o){const t=n.row,i=e.oxw();e.Q6J("ngIf",t.caissefinal.libelle==i.caisse&&!t.status)}}class B{constructor(n,t,i,s,l,u,g,_,b){this.caisseService=n,this.configurationService=t,this.datePipe=i,this.formBuilder=s,this.authService=l,this.cdr=u,this.personnelService=g,this.journeecomptableService=_,this.toastr=b,this.caisses=[],this.transferts=[],this.personnel=null}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.formGroup=this.formBuilder.group({caissefinal:["",[a.kI.required]],caisseinit:["",[a.kI.nullValidator]],montant:["",[a.kI.nullValidator]],libelle:["",a.kI.nullValidator]}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{}),this.configurationService.getCaissesparam(this.personnel.caisse.id).subscribe(t=>{this.caisses=t.data},t=>{console.log(t)}),this.caisseService.getTransfertCaisse(this.personnel.caisse.id).subscribe(t=>{this.transferts=t.data,this.cdr.detectChanges()},t=>{console.log(t)})})}onSave(){const n={data:{caisseinit:this.personnel.caisse.id,caissefinal:this.formGroup.value.caissefinal.id,libelle:this.formGroup.value.libelle,montant:this.formGroup.value.montant}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{null!==t?this.caisseService.addTransfert(n).subscribe(i=>{this.transferts=i.data,this.journeecomptableService.getBydateAndCaisse(this.personnel.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(s=>{this.soldeouverture=s.soldeouverture,this.retrait=s.retrait,this.versement=s.versement,this.solde=s.caisse.solde,this.caissestatus=s.status,this.cdr.detectChanges()},s=>{})},i=>{}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onChange(n){this.formGroup.patchValue({libelle:"Transfert de la "+this.personnel.caisse.libelle+" vers la caisse :"+this.formGroup.value.caissefinal.libelle})}validate(n){this.caisseService.validateTransfertCaisse(n.id).subscribe(t=>{this.transferts=t.data},t=>{})}}B.\u0275fac=function(n){return new(n||B)(e.Y36(I.N),e.Y36(ce.e),e.Y36(d.uU),e.Y36(a.qu),e.Y36(k.$),e.Y36(e.sBO),e.Y36(R.G),e.Y36(Q),e.Y36(f._W))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-transfertcaisse"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},outputs:{caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:79,vars:19,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","caissefinal",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","libelle",1,"form-control"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],["rowHeight","auto","columnMode","force",3,"rows"],["name","Libelle",3,"width"],["ngx-datatable-cell-template",""],["name","Montant",3,"width"],["name","Caisse destinataire",3,"width"],["name","Status",3,"width"],["cellClass","allow-overflow",3,"sortable","width"],[3,"value"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],["class","btn-sm btn btn-warning",4,"ngIf"],["class","btn-sm btn btn-success",4,"ngIf"],[1,"btn-sm","btn","btn-warning"],[1,"btn-sm","btn","btn-success"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h4"),e._uU(5,"Transfert"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"form",5),e.NdJ("validSubmit",function(){return t.onSave()}),e.TgZ(8,"div",6),e.TgZ(9,"label",7),e._uU(10,"Caisse"),e.qZA(),e.TgZ(11,"ng-select",8),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(12,Lt,2,2,"ng-option",9),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",7),e._uU(15,"Libelle"),e.qZA(),e._UZ(16,"input",10),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"label",7),e._uU(19,"Montant"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"button",12),e._uU(22,"Enregistrer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",13),e.TgZ(24,"div",2),e.TgZ(25,"div",3),e.TgZ(26,"h4"),e._uU(27),e.qZA(),e.qZA(),e.TgZ(28,"div",4),e.TgZ(29,"p"),e.TgZ(30,"span",14),e._uU(31,"Date: "),e.qZA(),e.TgZ(32,"span"),e._uU(33),e.qZA(),e.qZA(),e.TgZ(34,"p"),e.TgZ(35,"span",14),e._uU(36," Journ\xe9e comptable:"),e.qZA(),e.YNc(37,jt,2,0,"span",15),e.YNc(38,Ft,2,0,"span",16),e.qZA(),e.TgZ(39,"div",0),e.TgZ(40,"div",17),e.TgZ(41,"p"),e.TgZ(42,"span",14),e._uU(43,"Solde ouverture:"),e.qZA(),e.TgZ(44,"span"),e._uU(45),e.qZA(),e.qZA(),e.TgZ(46,"p"),e.TgZ(47,"span",14),e._uU(48,"Versements:"),e.qZA(),e.TgZ(49,"span"),e._uU(50),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",17),e.TgZ(52,"p"),e.TgZ(53,"span",14),e._uU(54,"Retrait:"),e.qZA(),e.TgZ(55,"span"),e._uU(56),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"h4"),e.TgZ(58,"span",14),e._uU(59,"Solde:"),e.qZA(),e.TgZ(60,"span"),e._uU(61),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",0),e.TgZ(63,"div",2),e.TgZ(64,"div",3),e.TgZ(65,"h4"),e._uU(66,"Transfert"),e.qZA(),e.qZA(),e.TgZ(67,"div",4),e.TgZ(68,"ngx-datatable",18),e.TgZ(69,"ngx-datatable-column",19),e.YNc(70,Et,1,1,"ng-template",20),e.qZA(),e.TgZ(71,"ngx-datatable-column",21),e.YNc(72,Gt,1,1,"ng-template",20),e.qZA(),e.TgZ(73,"ngx-datatable-column",22),e.YNc(74,Vt,1,1,"ng-template",20),e.qZA(),e.TgZ(75,"ngx-datatable-column",23),e.YNc(76,Bt,2,2,"ng-template",20),e.qZA(),e.TgZ(77,"ngx-datatable-column",24),e.YNc(78,Wt,1,1,"ng-template",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngForOf",t.caisses),e.xp6(8),e.Q6J("min",0),e.xp6(1),e.Q6J("disabled",!t.formGroup.valid),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(4),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(7),e.Oqu(t.soldeouverture),e.xp6(5),e.Oqu(t.versement),e.xp6(6),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(7),e.Q6J("rows",t.transferts),e.xp6(1),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("sortable",!1)("width",40))},directives:[a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,m.oH,a.wV,a.qQ,d.O5,r.nE,r.UC,r.vq,Z.xv],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],B.prototype,"user1$",void 0);var re=p(7077);let Ze=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.API_URL+"retraits",this.httpOptions={}}getRetraits(){return this.http.get(this.apiUrl)}getRetraitCaisse(t){return this.http.get(`${this.apiUrl}/${t}`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}getRetraitBank(t){return this.http.get(`${this.apiUrl}/bank/${t}`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}retraitValidate(t){return this.http.get(`${this.apiUrl}/${t}/validate`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}addRetrait(t){return this.http.post(this.apiUrl,t,this.httpOptions)}addRetraitBank(t){return this.http.post(this.apiUrl+"/bank",t,this.httpOptions)}handleError(t="operation",i){return s=>(console.error(s),(0,ie.of)(i))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var $t=p(8971),D=p(1875),W=p(519),$=p(2201);function Xt(o,n){if(1&o&&(e.TgZ(0,"ng-option",27),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.intitule)}}function Kt(o,n){1&o&&(e.TgZ(0,"span",28),e._uU(1,"ouverte"),e.qZA())}function en(o,n){1&o&&(e.TgZ(0,"span",29),e._uU(1,"non ouverte"),e.qZA())}function tn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.beneficaire.intitule," ")}function nn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function on(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function sn(o,n){if(1&o&&(e.TgZ(0,"div",30),e._UZ(1,"span",31),e.qZA()),2&o){const t=n.row;e.Q6J("ngClass","true"===t.valide?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass",t.valide?"bg-success":"bg-danger")}}function an(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().row;return e.oxw().validate(s)}),e.TgZ(1,"div",39),e._UZ(2,"i",42),e.TgZ(3,"span",41),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.qZA()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"action.validate")))}function ln(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",32),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",33),e._UZ(2,"i",34),e.qZA(),e.TgZ(3,"dropdown-menu",35,36),e.YNc(5,an,6,3,"a",37),e.TgZ(6,"a",38),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().delete(l)}),e.TgZ(7,"div",39),e._UZ(8,"i",40),e.TgZ(9,"span",41),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.row;e.xp6(5),e.Q6J("ngIf",!t.valide),e.xp6(5),e.Oqu(e.lcZ(11,2,"action.delete"))}}class X{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y){this.compteService=n,this.translateService=t,this.datePipe=i,this.journeecomptableService=s,this.toastr=l,this.modalService=u,this.formBuilder=g,this.caisseService=_,this.servStudent=b,this.authService=x,this.retraitService=M,this.cdr=T,this.personnelService=H,this.screenSizeSvc=Y,this.temp=[],this.rows=[],this.comptes=[],this.personnel=null,this.titlesession="",this.datesession="",this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(v=>{v.includes(h.y.XXL)||v.includes(h.y.XL)||v.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{}),this.retraitService.getRetraitCaisse(n.data.caisse.id).subscribe(t=>{this.rows=t,this.cdr.detectChanges()},t=>{}),this.cdr.detectChanges()},n=>{}),this.formGroup=this.formBuilder.group({beneficiare:["",[a.kI.required]],libelle:["",[a.kI.nullValidator]],montant:[,a.kI.nullValidator]})}onSubmit(){const n={data:{beneficiare:this.formGroup.value.beneficiare.id,libelle:this.formGroup.value.libelle,montant:this.formGroup.value.montant,caisse:this.personnel.caisse.id}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{null!==t?this.retraitService.addRetrait(n).subscribe(i=>{this.rows=i.data,this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onChange(n){this.formGroup.patchValue({libelle:"Retrait de la"+this.personnel.caisse.libelle+" vers le compte :"+this.formGroup.value.beneficiare.intitule})}onReset(){}selected(){console.log(this.selectcompte),this.compteService.getComptesbytype(this.selectcompte).subscribe(n=>{this.comptes=n.data},n=>{console.log(n)})}delete(n){}validate(n){this.retraitService.retraitValidate(n.id).subscribe(t=>{this.rows=t},t=>{console.log(t)})}}function rn(o,n){if(1&o&&(e.TgZ(0,"ng-option",20),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function cn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"a",22),e.NdJ("click",function(){const l=e.CHM(t).group;return e.oxw().toggleExpandGroup(l)}),e.TgZ(2,"b"),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.group,i=n.expanded,s=e.oxw();e.xp6(1),e.ekj("datatable-icon-right",!i)("datatable-icon-down",i),e.xp6(2),e.hij("Date: ",t.value[0].datestring,""),e.xp6(2),e.hij("Credit: ",s.totalgroup,"")}}function dn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function un(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.debit," ")}function pn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.credit," ")}function mn(o,n){1&o&&(e._uU(0),e.ALo(1,"date")),2&o&&e.hij(" ",e.xi3(1,1,n.row.dateoperation,"yyyy-MM-dd")," ")}X.\u0275fac=function(n){return new(n||X)(e.Y36(re.D),e.Y36(q.sK),e.Y36(d.uU),e.Y36(Q),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(Ze),e.Y36(e.sBO),e.Y36(R.G),e.Y36(A.O))},X.\u0275cmp=e.Xpm({type:X,selectors:[["app-retraitespece"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},outputs:{caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:92,vars:43,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],["name","inlineCheckbox","value","enseignant",3,"inline","ngModel","change","ngModelChange"],["name","inlineCheckbox","value","personnel",3,"inline","ngModel","change","ngModelChange"],["name","inlineCheckbox","value","autre",3,"inline","ngModel","change","ngModelChange"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","beneficiare",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","libelle",1,"form-control"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],[3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","scrollbarH"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],["cellClass","allow-overflow",3,"sortable","width"],[3,"value"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","left"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click",4,"ngIf"],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-trash"],[1,"ms-2"],[1,"feather","icon-check-square"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h5"),e._uU(5,"Retrait caisse"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"radio",5),e.NdJ("change",function(){return t.selected()})("ngModelChange",function(s){return t.selectcompte=s}),e._uU(8,"Enseignants"),e.qZA(),e.TgZ(9,"radio",6),e.NdJ("change",function(){return t.selected()})("ngModelChange",function(s){return t.selectcompte=s}),e._uU(10,"Personnels"),e.qZA(),e.TgZ(11,"radio",7),e.NdJ("change",function(){return t.selected()})("ngModelChange",function(s){return t.selectcompte=s}),e._uU(12,"Autres"),e.qZA(),e.TgZ(13,"form",8),e.NdJ("validSubmit",function(){return t.onSubmit()}),e.TgZ(14,"div",9),e.TgZ(15,"label",10),e._uU(16,"Beneficiare"),e.qZA(),e.TgZ(17,"ng-select",11),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(18,Xt,2,2,"ng-option",12),e.qZA(),e.qZA(),e.TgZ(19,"div",9),e.TgZ(20,"label",10),e._uU(21,"Libelle"),e.qZA(),e._UZ(22,"input",13),e.qZA(),e.TgZ(23,"div",9),e.TgZ(24,"label",10),e._uU(25,"Montant"),e.qZA(),e._UZ(26,"input",14),e.qZA(),e.TgZ(27,"button",15),e.NdJ("click",function(){return t.onReset()}),e._uU(28,"Reset"),e.qZA(),e.TgZ(29,"button",16),e._uU(30,"Enregistrer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",17),e.TgZ(32,"div",2),e.TgZ(33,"div",3),e.TgZ(34,"h5"),e._uU(35),e.qZA(),e.qZA(),e.TgZ(36,"div",4),e.TgZ(37,"p"),e.TgZ(38,"span",18),e._uU(39,"Date: "),e.qZA(),e.TgZ(40,"span"),e._uU(41),e.qZA(),e.qZA(),e.TgZ(42,"p"),e.TgZ(43,"span",18),e._uU(44," Journ\xe9e comptable:"),e.qZA(),e.YNc(45,Kt,2,0,"span",19),e.YNc(46,en,2,0,"span",20),e.qZA(),e.TgZ(47,"div",0),e.TgZ(48,"div",21),e.TgZ(49,"p"),e.TgZ(50,"span",18),e._uU(51,"Solde ouverture:"),e.qZA(),e.TgZ(52,"span"),e._uU(53),e.qZA(),e.qZA(),e.TgZ(54,"p"),e.TgZ(55,"span",18),e._uU(56,"Versements:"),e.qZA(),e.TgZ(57,"span"),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",21),e.TgZ(60,"p"),e.TgZ(61,"span",18),e._uU(62,"Retrait:"),e.qZA(),e.TgZ(63,"span"),e._uU(64),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"h4"),e.TgZ(66,"span",18),e._uU(67,"Solde:"),e.qZA(),e.TgZ(68,"span"),e._uU(69),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"div",0),e.TgZ(71,"div",2),e.TgZ(72,"div",3),e.TgZ(73,"h5"),e._uU(74,"Liste des retraits"),e.qZA(),e.qZA(),e.TgZ(75,"div",4),e.TgZ(76,"ngx-datatable",22,23),e.TgZ(78,"ngx-datatable-column",24),e.ALo(79,"translate"),e.YNc(80,tn,1,1,"ng-template",25),e.qZA(),e.TgZ(81,"ngx-datatable-column",24),e.ALo(82,"translate"),e.YNc(83,nn,1,1,"ng-template",25),e.qZA(),e.TgZ(84,"ngx-datatable-column",24),e.ALo(85,"translate"),e.YNc(86,on,1,1,"ng-template",25),e.qZA(),e.TgZ(87,"ngx-datatable-column",24),e.ALo(88,"translate"),e.YNc(89,sn,2,2,"ng-template",25),e.qZA(),e.TgZ(90,"ngx-datatable-column",26),e.YNc(91,ln,12,4,"ng-template",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("inline",!0)("ngModel",t.selectcompte),e.xp6(2),e.Q6J("inline",!0)("ngModel",t.selectcompte),e.xp6(2),e.Q6J("inline",!0)("ngModel",t.selectcompte),e.xp6(2),e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngForOf",t.comptes),e.xp6(8),e.Q6J("min",0),e.xp6(3),e.Q6J("disabled",!t.caissestatus||!t.formGroup.valid),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(4),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(7),e.Oqu(t.soldeouverture),e.xp6(5),e.Oqu(t.versement),e.xp6(6),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(7),e.Q6J("rows",t.rows)("columnMode",t.columnMode)("headerHeight",50)("footerHeight",150)("limit",10)("rowHeight",t.rowHeight)("scrollbarH",t.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(79,35,"fields.beneficiare")),e.Q6J("width",170),e.xp6(3),e.s9C("name",e.lcZ(82,37,"fields.libelle")),e.Q6J("width",300),e.xp6(3),e.s9C("name",e.lcZ(85,39,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(88,41,"fields.status")),e.Q6J("width",10),e.xp6(3),e.Q6J("sortable",!1)("width",10))},directives:[$t.U,a.JJ,a.On,a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.u,d.sg,a.Fj,m.oH,a.wV,a.qQ,d.O5,r.nE,r.UC,r.vq,Z.xv,d.mk,D.L,W.h,$.h],pipes:[q.X$],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],X.prototype,"user1$",void 0);let hn=(()=>{class o{constructor(t,i,s,l,u,g,_,b,x,M){this.caisseService=t,this.screenSizeSvc=i,this.configurationService=s,this.datePipe=l,this.formBuilder=u,this.authService=g,this.cdr=_,this.personnelService=b,this.journeecomptableService=x,this.toastr=M,this.caisses=[],this.temp=[],this.totalgroup=0,this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.mouvements=[],this.isLoading=1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(T=>{T.includes(h.y.XXL)||T.includes(h.y.XL)||T.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}toggleExpandGroup(t){console.log("Toggled Expand Group!",t.value),this.table.groupHeader.toggleExpandGroup(t)}onDetailToggle(t){console.log("Detail Toggled",t)}ngOnInit(){this.configurationService.getCaisses().subscribe(t=>{this.caisses=t.data},t=>{console.log(t)})}onChange(t){this.caisseService.consultercaisse(t).subscribe(i=>{this.mouvements=i.data,this.temp=[...i.data],this.cdr.detectChanges()},i=>{console.log(i)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.libelle.toLowerCase().indexOf(i)||-1!==l.dateoperation.toLowerCase().indexOf(i)||!i});this.mouvements=s,this.table.offset=0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I.N),e.Y36(A.O),e.Y36(ce.e),e.Y36(d.uU),e.Y36(a.qu),e.Y36(k.$),e.Y36(e.sBO),e.Y36(R.G),e.Y36(Q),e.Y36(f._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-consultercaisse"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},features:[e._Bn([f._W,d.uU])],decls:31,vars:20,consts:[[1,"row"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group","mb-3"],[1,"form-label"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4","mb-2","text-center"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"material","expandable",3,"rows","columnMode","headerHeight","footerHeight","limit","summaryRow","summaryPosition","loadingIndicator","selectionType","rowHeight","scrollbarH","groupRowsBy","groupExpansionDefault"],["table",""],[3,"rowHeight","toggle"],["myGroupHeader",""],["ngx-datatable-group-header-template",""],["name","Libelle",3,"width"],["ngx-datatable-cell-template",""],["name","Debit",3,"width"],["name","Credit",3,"width"],["name","Date op\xe9ration",3,"width"],[3,"value"],[2,"padding-left","5px"],["title","Expand/Collapse Group",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4"),e._uU(4,"Consulter caisse"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"label",5),e._uU(8,"Caisse"),e.qZA(),e.TgZ(9,"ng-select",6),e.NdJ("ngModelChange",function(l){return i.caisse=l})("change",function(l){return i.onChange(l)}),e.YNc(10,rn,2,2,"ng-option",7),e.qZA(),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"div",8),e.TgZ(13,"input",9),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.TgZ(14,"ngx-datatable",10,11),e.TgZ(16,"ngx-datatable-group-header",12,13),e.NdJ("toggle",function(l){return i.onDetailToggle(l)}),e.YNc(18,cn,6,6,"ng-template",14),e.qZA(),e.TgZ(19,"ngx-datatable-column",15),e.YNc(20,dn,1,1,"ng-template",16),e.qZA(),e.TgZ(21,"ngx-datatable-column",17),e.YNc(22,un,1,1,"ng-template",16),e.qZA(),e.TgZ(23,"ngx-datatable-column",18),e.YNc(24,pn,1,1,"ng-template",16),e.qZA(),e.TgZ(25,"ngx-datatable-column",19),e.YNc(26,mn,2,4,"ng-template",16),e.qZA(),e._UZ(27,"br"),e._UZ(28,"br"),e._UZ(29,"br"),e.qZA(),e._UZ(30,"br"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngModel",i.caisse),e.xp6(1),e.Q6J("ngForOf",i.caisses),e.xp6(4),e.Q6J("rows",i.mouvements)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",150)("limit",5)("summaryRow",!0)("summaryPosition","bottom")("loadingIndicator",!0)("selectionType",i.SelectionType.cell)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH)("groupRowsBy","datestring")("groupExpansionDefault",!0),e.xp6(2),e.Q6J("rowHeight",50),e.xp6(3),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70))},directives:[m.HK,Z.w9,a.JJ,a.On,d.sg,m.oH,r.nE,r.jY,r.Vl,r.UC,r.vq,Z.xv],pipes:[d.uU],styles:[""]}),o})(),fe=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.API_URL+"versements",this.httpOptions={}}getVersements(){return this.http.get(this.apiUrl)}getVersementCaisse(t){return this.http.get(`${this.apiUrl}/${t}`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}getVersementBank(t){return this.http.get(`${this.apiUrl}/bank/${t}`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}versementCaissevalidate(t){return this.http.get(`${this.apiUrl}/${t}/validate`,this.httpOptions).pipe((0,O.U)(s=>s.data),(0,C.b)(s=>console.log(`fetched product id=${t}`)),(0,w.K)(this.handleError(`getProduct id=${t}`)))}addVersement(t){return this.http.post(this.apiUrl,t,this.httpOptions)}addVersementBank(t){return this.http.post(this.apiUrl+"/bank",t,this.httpOptions)}handleError(t="operation",i){return s=>(console.error(s),(0,ie.of)(i))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function gn(o,n){if(1&o&&(e.TgZ(0,"ng-option",24),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.intitule)}}function _n(o,n){1&o&&(e.TgZ(0,"span",25),e._uU(1,"ouverte"),e.qZA())}function Zn(o,n){1&o&&(e.TgZ(0,"span",26),e._uU(1,"non ouverte"),e.qZA())}function fn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.compte.intitule," ")}function bn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Tn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function vn(o,n){if(1&o&&(e.TgZ(0,"div",27),e._UZ(1,"span",28),e.qZA()),2&o){const t=n.row;e.Q6J("ngClass","true"===t.validate?"text-success":"text-danger"),e.xp6(1),e.Q6J("ngClass",t.validate?"bg-success":"bg-danger")}}function An(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().row;return e.oxw().validate(s)}),e.TgZ(1,"div",36),e._UZ(2,"i",39),e.TgZ(3,"span",38),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.qZA()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"action.validate")))}function qn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",29),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",30),e._UZ(2,"i",31),e.qZA(),e.TgZ(3,"dropdown-menu",32,33),e.YNc(5,An,6,3,"a",34),e.TgZ(6,"a",35),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().delete(l)}),e.TgZ(7,"div",36),e._UZ(8,"i",37),e.TgZ(9,"span",38),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.row;e.xp6(5),e.Q6J("ngIf",!t.validate),e.xp6(5),e.Oqu(e.lcZ(11,2,"action.delete"))}}class K{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y){this.compteService=n,this.translateService=t,this.datePipe=i,this.journeecomptableService=s,this.toastr=l,this.modalService=u,this.formBuilder=g,this.caisseService=_,this.servStudent=b,this.authService=x,this.cdr=M,this.personnelService=T,this.versementService=H,this.screenSizeSvc=Y,this.temp=[],this.rows=[],this.comptes=[],this.personnel=null,this.titlesession="",this.datesession="",this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(v=>{v.includes(h.y.XXL)||v.includes(h.y.XL)||v.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{}),this.versementService.getVersementCaisse(n.data.caisse.id).subscribe(t=>{this.rows=t,this.cdr.detectChanges()},t=>{}),this.cdr.detectChanges()},n=>{}),this.compteService.getComptesbytype("autre").subscribe(n=>{this.comptes=n.data},n=>{}),this.formGroup=this.formBuilder.group({compte:["",[a.kI.required]],libelle:["",[a.kI.nullValidator]],montant:[,a.kI.nullValidator]})}onSubmit(){const n={data:{compte:this.formGroup.value.compte.id,libelle:this.formGroup.value.libelle,montant:this.formGroup.value.montant,caisse:this.personnel.caisse.id}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{null!==t?this.versementService.addVersement(n).subscribe(i=>{this.rows=i,this.formGroup.reset(),this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onChange(n){this.formGroup.patchValue({libelle:"Versement au compte"+this.formGroup.value.compte.intitule})}onReset(){}selected(){console.log(this.selectcompte),this.compteService.getComptesbytype(this.selectcompte).subscribe(n=>{this.comptes=n.data},n=>{console.log(n)})}delete(n){}validate(n){this.versementService.versementCaissevalidate(n.id).subscribe(t=>{this.rows=t.data},t=>{console.log(t)})}}function Cn(o,n){if(1&o&&(e.TgZ(0,"ng-option",26),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.intitule)}}function wn(o,n){1&o&&(e.TgZ(0,"span",27),e._uU(1,"ouverte"),e.qZA())}function Un(o,n){1&o&&(e.TgZ(0,"span",28),e._uU(1,"non ouverte"),e.qZA())}function yn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.id," ")}function Sn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.caisse.libelle," ")}function xn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Mn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function Jn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.beneficaire.intitule," ")}function kn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",29),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",30),e._UZ(2,"i",31),e.qZA(),e.TgZ(3,"dropdown-menu",32,33),e.TgZ(5,"a",34),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().delete(l)}),e.TgZ(6,"div",35),e._UZ(7,"i",36),e.TgZ(8,"span",37),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&o&&(e.xp6(9),e.Oqu(e.lcZ(10,1,"action.delete")))}K.\u0275fac=function(n){return new(n||K)(e.Y36(re.D),e.Y36(q.sK),e.Y36(d.uU),e.Y36(Q),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(e.sBO),e.Y36(R.G),e.Y36(fe),e.Y36(A.O))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-versementespece"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},outputs:{caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:86,vars:37,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","compte",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","libelle",1,"form-control"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],[3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","scrollbarH"],["table",""],[3,"name","width"],["ngx-datatable-cell-template",""],["cellClass","allow-overflow",3,"sortable","width"],[3,"value"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],[1,"d-flex","align-items-center",3,"ngClass"],[1,"badge-dot","me-2",3,"ngClass"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","left"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click",4,"ngIf"],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-trash"],[1,"ms-2"],[1,"feather","icon-check-square"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h5"),e._uU(5,"Versement caisse"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"form",5),e.NdJ("validSubmit",function(){return t.onSubmit()}),e.TgZ(8,"div",6),e.TgZ(9,"label",7),e._uU(10,"Beneficiare"),e.qZA(),e.TgZ(11,"ng-select",8),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(12,gn,2,2,"ng-option",9),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",7),e._uU(15,"Libelle"),e.qZA(),e._UZ(16,"input",10),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"label",7),e._uU(19,"Montant"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"button",12),e.NdJ("click",function(){return t.onReset()}),e._uU(22,"Reset"),e.qZA(),e.TgZ(23,"button",13),e._uU(24,"Enregistrer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",14),e.TgZ(26,"div",2),e.TgZ(27,"div",3),e.TgZ(28,"h5"),e._uU(29),e.qZA(),e.qZA(),e.TgZ(30,"div",4),e.TgZ(31,"p"),e.TgZ(32,"span",15),e._uU(33,"Date: "),e.qZA(),e.TgZ(34,"span"),e._uU(35),e.qZA(),e.qZA(),e.TgZ(36,"p"),e.TgZ(37,"span",15),e._uU(38," Journ\xe9e comptable:"),e.qZA(),e.YNc(39,_n,2,0,"span",16),e.YNc(40,Zn,2,0,"span",17),e.qZA(),e.TgZ(41,"div",0),e.TgZ(42,"div",18),e.TgZ(43,"p"),e.TgZ(44,"span",15),e._uU(45,"Solde ouverture:"),e.qZA(),e.TgZ(46,"span"),e._uU(47),e.qZA(),e.qZA(),e.TgZ(48,"p"),e.TgZ(49,"span",15),e._uU(50,"Versements:"),e.qZA(),e.TgZ(51,"span"),e._uU(52),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",18),e.TgZ(54,"p"),e.TgZ(55,"span",15),e._uU(56,"Retrait:"),e.qZA(),e.TgZ(57,"span"),e._uU(58),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"h4"),e.TgZ(60,"span",15),e._uU(61,"Solde:"),e.qZA(),e.TgZ(62,"span"),e._uU(63),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",0),e.TgZ(65,"div",2),e.TgZ(66,"div",3),e.TgZ(67,"h5"),e._uU(68,"Liste des versements"),e.qZA(),e.qZA(),e.TgZ(69,"div",4),e.TgZ(70,"ngx-datatable",19,20),e.TgZ(72,"ngx-datatable-column",21),e.ALo(73,"translate"),e.YNc(74,fn,1,1,"ng-template",22),e.qZA(),e.TgZ(75,"ngx-datatable-column",21),e.ALo(76,"translate"),e.YNc(77,bn,1,1,"ng-template",22),e.qZA(),e.TgZ(78,"ngx-datatable-column",21),e.ALo(79,"translate"),e.YNc(80,Tn,1,1,"ng-template",22),e.qZA(),e.TgZ(81,"ngx-datatable-column",21),e.ALo(82,"translate"),e.YNc(83,vn,2,2,"ng-template",22),e.qZA(),e.TgZ(84,"ngx-datatable-column",23),e.YNc(85,qn,12,4,"ng-template",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngForOf",t.comptes),e.xp6(8),e.Q6J("min",0),e.xp6(3),e.Q6J("disabled",!t.caissestatus||!t.formGroup.valid),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(4),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(7),e.Oqu(t.soldeouverture),e.xp6(5),e.Oqu(t.versement),e.xp6(6),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(7),e.Q6J("rows",t.rows)("columnMode",t.columnMode)("headerHeight",50)("footerHeight",150)("limit",10)("rowHeight",t.rowHeight)("scrollbarH",t.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(73,29,"fields.beneficiare")),e.Q6J("width",100),e.xp6(3),e.s9C("name",e.lcZ(76,31,"fields.libelle")),e.Q6J("width",270),e.xp6(3),e.s9C("name",e.lcZ(79,33,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(82,35,"fields.status")),e.Q6J("width",10),e.xp6(3),e.Q6J("sortable",!1)("width",10))},directives:[a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,m.oH,a.wV,a.qQ,d.O5,r.nE,r.UC,r.vq,Z.xv,d.mk,D.L,W.h,$.h],pipes:[q.X$],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],K.prototype,"user1$",void 0);class ee{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y){this.compteService=n,this.translateService=t,this.datePipe=i,this.journeecomptableService=s,this.toastr=l,this.modalService=u,this.formBuilder=g,this.caisseService=_,this.servStudent=b,this.authService=x,this.retraitService=M,this.cdr=T,this.personnelService=H,this.screenSizeSvc=Y,this.temp=[],this.rows=[],this.comptes=[],this.personnel=null,this.titlesession="",this.datesession="",this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(v=>{v.includes(h.y.XXL)||v.includes(h.y.XL)||v.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{}),this.retraitService.getRetraitBank(this.personnel.caisse.id).subscribe(t=>{this.rows=t,this.cdr.detectChanges()},t=>{}),this.compteService.getComptesbytype("bank").subscribe(t=>{this.comptes=t.data},t=>{}),this.cdr.detectChanges()},n=>{}),this.formGroup=this.formBuilder.group({compte:["",[a.kI.required]],libelle:["",[a.kI.nullValidator]],montant:[,a.kI.nullValidator]})}onSubmit(){const n={data:{compte:this.formGroup.value.compte.id,libelle:this.formGroup.value.libelle,montant:this.formGroup.value.montant,caisse:this.personnel.caisse.id}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{t.status?this.retraitService.addRetraitBank(n).subscribe(i=>{this.rows=i.data,this.formGroup.reset(),this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onChange(n){console.log(n),this.soldebank="Solde:"+n.solde,this.formGroup.patchValue({libelle:"Retrait du compte :"+this.formGroup.value.compte.intitule+" vers la caisse: "+this.personnel.caisse.libelle})}onReset(){}selected(){console.log(this.selectcompte),this.compteService.getComptesbytype(this.selectcompte).subscribe(n=>{this.comptes=n.data},n=>{console.log(n)})}delete(n){}}function Hn(o,n){if(1&o&&(e.TgZ(0,"ng-option",26),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.intitule)}}function Nn(o,n){1&o&&(e.TgZ(0,"span",27),e._uU(1,"ouverte"),e.qZA())}function On(o,n){1&o&&(e.TgZ(0,"span",28),e._uU(1,"non ouverte"),e.qZA())}function Yn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.id," ")}function Qn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.compte.intitule," ")}function In(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Rn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function Ln(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",29),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",30),e._UZ(2,"i",31),e.qZA(),e.TgZ(3,"dropdown-menu",32,33),e.TgZ(5,"a",34),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().delete(l)}),e.TgZ(6,"div",35),e._UZ(7,"i",36),e.TgZ(8,"span",37),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&o&&(e.xp6(9),e.Oqu(e.lcZ(10,1,"action.delete")))}ee.\u0275fac=function(n){return new(n||ee)(e.Y36(re.D),e.Y36(q.sK),e.Y36(d.uU),e.Y36(Q),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(Ze),e.Y36(e.sBO),e.Y36(R.G),e.Y36(A.O))},ee.\u0275cmp=e.Xpm({type:ee,selectors:[["app-retrait"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},outputs:{caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:99,vars:66,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","compte",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"text-right"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","text","formControlName","libelle",1,"form-control"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],[3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","scrollbarH"],["table",""],["name","#",3,"width"],["ngx-datatable-cell-template",""],[3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],[3,"value"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","left"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-plus"],[1,"ms-2"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h5"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"form",5),e.NdJ("validSubmit",function(){return t.onSubmit()}),e.TgZ(9,"div",6),e.TgZ(10,"label",7),e._uU(11,"Compte banque"),e.qZA(),e.TgZ(12,"ng-select",8),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(13,Cn,2,2,"ng-option",9),e.qZA(),e.TgZ(14,"label",10),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"label",7),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"label",7),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",12),e.qZA(),e.TgZ(26,"button",13),e.NdJ("click",function(){return t.onReset()}),e._uU(27,"Reset"),e.qZA(),e.TgZ(28,"button",14),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",15),e.TgZ(32,"div",2),e.TgZ(33,"div",3),e.TgZ(34,"h5"),e._uU(35),e.qZA(),e.qZA(),e.TgZ(36,"div",4),e.TgZ(37,"p"),e.TgZ(38,"span",16),e._uU(39,"Date: "),e.qZA(),e.TgZ(40,"span"),e._uU(41),e.qZA(),e.qZA(),e.TgZ(42,"p"),e.TgZ(43,"span",16),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,wn,2,0,"span",17),e.YNc(47,Un,2,0,"span",18),e.qZA(),e.TgZ(48,"div",0),e.TgZ(49,"div",19),e.TgZ(50,"p"),e.TgZ(51,"span",16),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"span"),e._uU(55),e.qZA(),e.qZA(),e.TgZ(56,"p"),e.TgZ(57,"span",16),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"span"),e._uU(61),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",19),e.TgZ(63,"p"),e.TgZ(64,"span",16),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"span"),e._uU(68),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"h4"),e.TgZ(70,"span",16),e._uU(71,"Solde:"),e.qZA(),e.TgZ(72,"span"),e._uU(73),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(74,"div",0),e.TgZ(75,"div",2),e.TgZ(76,"div",3),e.TgZ(77,"h5"),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.qZA(),e.TgZ(80,"div",4),e.TgZ(81,"ngx-datatable",20,21),e.TgZ(83,"ngx-datatable-column",22),e.YNc(84,yn,1,1,"ng-template",23),e.qZA(),e.TgZ(85,"ngx-datatable-column",24),e.ALo(86,"translate"),e.YNc(87,Sn,1,1,"ng-template",23),e.qZA(),e.TgZ(88,"ngx-datatable-column",24),e.ALo(89,"translate"),e.YNc(90,xn,1,1,"ng-template",23),e.qZA(),e.TgZ(91,"ngx-datatable-column",24),e.ALo(92,"translate"),e.YNc(93,Mn,1,1,"ng-template",23),e.qZA(),e.TgZ(94,"ngx-datatable-column",24),e.ALo(95,"translate"),e.YNc(96,Jn,1,1,"ng-template",23),e.qZA(),e.TgZ(97,"ngx-datatable-column",25),e.YNc(98,kn,11,3,"ng-template",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,40,"title.retraitbanque")),e.xp6(3),e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngForOf",t.comptes),e.xp6(2),e.Oqu(t.soldebank),e.xp6(3),e.Oqu(e.lcZ(19,42,"fields.montant")),e.xp6(2),e.Q6J("min",0),e.xp6(3),e.Oqu(e.lcZ(24,44,"fields.libelle")),e.xp6(5),e.Q6J("disabled",!t.caissestatus||!t.formGroup.valid),e.xp6(1),e.Oqu(e.lcZ(30,46,"action.save")),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(3),e.hij(" ",e.lcZ(45,48,"fields.journeecomptable"),":"),e.xp6(2),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(5),e.hij("",e.lcZ(53,50,"fields.soldeouverture"),":"),e.xp6(3),e.Oqu(t.soldeouverture),e.xp6(3),e.hij("",e.lcZ(59,52,"fields.versement"),":"),e.xp6(3),e.Oqu(t.versement),e.xp6(4),e.hij("",e.lcZ(66,54,"fields.retrait"),":"),e.xp6(3),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(5),e.Oqu(e.lcZ(79,56,"title.listeretraitbanque")),e.xp6(3),e.Q6J("rows",t.rows)("columnMode",t.columnMode)("headerHeight",50)("footerHeight",150)("limit",10)("rowHeight",t.rowHeight)("scrollbarH",t.scrollbarH),e.xp6(2),e.Q6J("width",10),e.xp6(2),e.s9C("name",e.lcZ(86,58,"fields.caisse")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(89,60,"fields.libelle")),e.Q6J("width",200),e.xp6(3),e.s9C("name",e.lcZ(92,62,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(95,64,"fields.banque")),e.Q6J("width",70),e.xp6(3),e.Q6J("sortable",!1)("width",20))},directives:[a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.wV,a.qQ,a.Fj,m.oH,d.O5,r.nE,r.UC,r.vq,Z.xv,D.L,W.h,$.h],pipes:[q.X$],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],ee.prototype,"user1$",void 0);class te{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y){this.compteService=n,this.translateService=t,this.datePipe=i,this.journeecomptableService=s,this.toastr=l,this.modalService=u,this.formBuilder=g,this.caisseService=_,this.servStudent=b,this.authService=x,this.versementService=M,this.cdr=T,this.personnelService=H,this.screenSizeSvc=Y,this.temp=[],this.rows=[],this.comptes=[],this.personnel=null,this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(v=>{v.includes(h.y.XXL)||v.includes(h.y.XL)||v.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,this.cdr.detectChanges()},t=>{}),this.versementService.getVersementBank(this.personnel.caisse.id).subscribe(t=>{this.rows=t,this.cdr.detectChanges()},t=>{}),this.compteService.getComptesbytype("bank").subscribe(t=>{this.comptes=t.data},t=>{}),this.cdr.detectChanges()},n=>{}),this.formGroup=this.formBuilder.group({compte:["",[a.kI.required]],libelle:["",[a.kI.nullValidator]],montant:[,a.kI.nullValidator]})}onSubmit(){const n={data:{compte:this.formGroup.value.compte.id,libelle:this.formGroup.value.libelle,montant:this.formGroup.value.montant,caisse:this.personnel.caisse.id}};this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(t=>{t.status?this.versementService.addVersementBank(n).subscribe(i=>{this.rows=i.data,this.formGroup.reset(),this.toastr.success(this.translateService.instant("MESSAGES.SAVE_SUCCESS"),"OK")},i=>{this.toastr.error(this.translateService.instant("MESSAGES.SAVE_ERROR"),"OK")}):this.toastr.error("Journ\xe9e comptable du "+t.datecomptable+" non clotur\xe9 Veulliez cloture cette journee comptable","Journ\xe9e non clotur\xe9",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-center"})},t=>{console.log(t)})}onChange(n){console.log(n),this.soldebank="Solde:"+n.solde,this.formGroup.patchValue({libelle:"Transfert la caisse :"+this.personnel.caisse.libelle+" vers le compte : "+this.formGroup.value.compte.intitule})}onReset(){}selected(){console.log(this.selectcompte),this.compteService.getComptesbytype(this.selectcompte).subscribe(n=>{this.comptes=n.data},n=>{console.log(n)})}delete(n){}}te.\u0275fac=function(n){return new(n||te)(e.Y36(re.D),e.Y36(q.sK),e.Y36(d.uU),e.Y36(Q),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(fe),e.Y36(e.sBO),e.Y36(R.G),e.Y36(A.O))},te.\u0275cmp=e.Xpm({type:te,selectors:[["app-versement"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},outputs:{caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable"},features:[e._Bn([f._W,d.uU])],decls:95,vars:59,consts:[[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","validSubmit"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","compte",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"text-right","h5"],["type","text","formControlName","libelle",1,"form-control"],["type","number","formControlName","montant",1,"form-control",3,"min"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],[3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","scrollbarH"],["table",""],["name","#",3,"width"],["ngx-datatable-cell-template",""],[3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],[3,"value"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","left"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-plus"],[1,"ms-2"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h5"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"form",5),e.NdJ("validSubmit",function(){return t.onSubmit()}),e.TgZ(9,"div",6),e.TgZ(10,"label",7),e._uU(11,"Compte banque"),e.qZA(),e.TgZ(12,"ng-select",8),e.NdJ("change",function(s){return t.onChange(s)}),e.YNc(13,Hn,2,2,"ng-option",9),e.qZA(),e.TgZ(14,"label",10),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"label",7),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"label",7),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",12),e.qZA(),e.TgZ(26,"button",13),e.NdJ("click",function(){return t.onReset()}),e._uU(27,"Reset"),e.qZA(),e.TgZ(28,"button",14),e._uU(29,"Enregistrer"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",15),e.TgZ(31,"div",2),e.TgZ(32,"div",3),e.TgZ(33,"h5"),e._uU(34),e.qZA(),e.qZA(),e.TgZ(35,"div",4),e.TgZ(36,"p"),e.TgZ(37,"span",16),e._uU(38,"Date: "),e.qZA(),e.TgZ(39,"span"),e._uU(40),e.qZA(),e.qZA(),e.TgZ(41,"p"),e.TgZ(42,"span",16),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,Nn,2,0,"span",17),e.YNc(46,On,2,0,"span",18),e.qZA(),e.TgZ(47,"div",0),e.TgZ(48,"div",19),e.TgZ(49,"p"),e.TgZ(50,"span",16),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"span"),e._uU(54),e.qZA(),e.qZA(),e.TgZ(55,"p"),e.TgZ(56,"span",16),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"span"),e._uU(60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",19),e.TgZ(62,"p"),e.TgZ(63,"span",16),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"span"),e._uU(67),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"h4"),e.TgZ(69,"span",16),e._uU(70,"Solde:"),e.qZA(),e.TgZ(71,"span"),e._uU(72),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",0),e.TgZ(74,"div",2),e.TgZ(75,"div",3),e.TgZ(76,"h5"),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.qZA(),e.TgZ(79,"div",4),e.TgZ(80,"ngx-datatable",20,21),e.TgZ(82,"ngx-datatable-column",22),e.YNc(83,Yn,1,1,"ng-template",23),e.qZA(),e.TgZ(84,"ngx-datatable-column",24),e.ALo(85,"translate"),e.YNc(86,Qn,1,1,"ng-template",23),e.qZA(),e.TgZ(87,"ngx-datatable-column",24),e.ALo(88,"translate"),e.YNc(89,In,1,1,"ng-template",23),e.qZA(),e.TgZ(90,"ngx-datatable-column",24),e.ALo(91,"translate"),e.YNc(92,Rn,1,1,"ng-template",23),e.qZA(),e.TgZ(93,"ngx-datatable-column",25),e.YNc(94,Ln,11,3,"ng-template",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,37,"title.versementbanque")),e.xp6(3),e.Q6J("formGroup",t.formGroup),e.xp6(5),e.Q6J("ngForOf",t.comptes),e.xp6(2),e.Oqu(t.soldebank),e.xp6(3),e.Oqu(e.lcZ(19,39,"fields.libelle")),e.xp6(5),e.Oqu(e.lcZ(24,41,"fields.montant")),e.xp6(2),e.Q6J("min",0),e.xp6(3),e.Q6J("disabled",!t.formGroup.valid),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(3),e.hij(" ",e.lcZ(44,43,"fields.journeecomptable"),":"),e.xp6(2),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(5),e.hij("",e.lcZ(52,45,"fields.soldeouverture"),":"),e.xp6(3),e.Oqu(t.soldeouverture),e.xp6(3),e.hij("",e.lcZ(58,47,"fields.versement"),":"),e.xp6(3),e.Oqu(t.versement),e.xp6(4),e.hij("",e.lcZ(65,49,"fields.retrait"),":"),e.xp6(3),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(5),e.Oqu(e.lcZ(78,51,"title.listeversementbanque")),e.xp6(3),e.Q6J("rows",t.rows)("columnMode",t.columnMode)("headerHeight",50)("footerHeight",150)("limit",10)("rowHeight",t.rowHeight)("scrollbarH",t.scrollbarH),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.s9C("name",e.lcZ(85,53,"fields.beneficiare")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(88,55,"fields.libelle")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(91,57,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.Q6J("sortable",!1)("width",40))},directives:[a._Y,a.JL,a.sg,m.MU,m.HK,Z.w9,a.JJ,a.u,d.sg,a.Fj,m.oH,a.wV,a.qQ,d.O5,r.nE,r.UC,r.vq,Z.xv,D.L,W.h,$.h],pipes:[q.X$],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],te.prototype,"user1$",void 0);var be=p(4865);const jn=["childModal"],Fn=["opencaisseModal"];function En(o,n){if(1&o&&(e.TgZ(0,"ng-option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Gn(o,n){if(1&o&&(e.TgZ(0,"ng-option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.libelle)}}function Vn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ng-select",38),e.NdJ("change",function(s){return e.CHM(t),e.oxw().onChangeclasse(s)}),e.YNc(5,Gn,2,2,"ng-option",11),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"fields.classe")),e.xp6(3),e.Q6J("ngForOf",t.classes)}}function Pn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",40),e.TgZ(1,"input",41),e.NdJ("change",function(s){return e.CHM(t),e.oxw().onCheckboxChangeFn(s)}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(),i=t.row,s=t.isSelected;e.xp6(1),e.Q6J("disabled",i.status)("checked",s)}}function zn(o,n){1&o&&e.YNc(0,Pn,2,2,"div",39),2&o&&e.Q6J("ngIf",!n.row.status)}function Bn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.code," ")}function Dn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function Wn(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function $n(o,n){1&o&&(e.TgZ(0,"span",44),e._uU(1,"pay\xe9"),e.qZA())}function Xn(o,n){1&o&&(e.TgZ(0,"span",45),e._uU(1,"non pay\xe9"),e.qZA())}function Kn(o,n){if(1&o&&(e.YNc(0,$n,2,0,"span",42),e.YNc(1,Xn,2,0,"span",43)),2&o){const t=n.row;e.Q6J("ngIf",t.status),e.xp6(1),e.Q6J("ngIf",!t.status)}}function eo(o,n){1&o&&(e.TgZ(0,"span",46),e._uU(1,"ouverte"),e.qZA())}function to(o,n){1&o&&(e.TgZ(0,"span",47),e._uU(1,"non ouverte"),e.qZA())}function no(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().printrecu()}),e._uU(1,"Imprimer la facture"),e.qZA()}}const oo=function(){return{backdrop:"static"}};class E{constructor(n,t,i,s,l,u,g,_,b,x,M,T,H,Y,v,G){this.datePipe=n,this.journeecomptableService=t,this.router=i,this.toastr=s,this.modalService=l,this.formBuilder=u,this.store=g,this.studentSvc=_,this.documentpdfService=b,this.scolariteService=x,this.tableSvc=M,this.servStudent=T,this.authService=H,this.serClasse=Y,this.cdr=v,this.personnelService=G,this.temp=[],this.validate=!1,this.printfacture=!1,this.paiements=[],this.rows=[],this.students=[],this.classes=[],this.selected=[],this.personnel=null,this.titlesession="",this.datesession="",this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.initValues(),this.personnelService.getPersonnelCompte(this.currentuser.id).subscribe(n=>{this.caisse=n.data.caisse.libelle,this.personnel=n.data,this.solde=n.data.caisse.solde,this.caissier=n.data.name,this.verifydate(),this.journeecomptableService.getBydateAndCaisse(n.data.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(t=>{this.datecomptable=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.soldeouverture=t.soldeouverture,this.retrait=t.retrait,this.versement=t.versement,this.caissestatus=t.status,t.status||this.openCaisse(),this.cdr.detectChanges()},t=>{}),this.cdr.detectChanges()},n=>{this.router.navigate(["/"])})}openCaisse(){this.opencaisseModal.show()}verifydate(){this.journeecomptableService.verifydate(this.personnel.caisse.id).subscribe(n=>{console.log(n)},n=>{console.log(n)})}onChange(n){this.rows=[],this.selected=[],this.isInscrire=!1,this.studentid=n,this.printfacture=!1,this.tableSvc.getInformationtudent(n).subscribe(t=>{this.studentname=t.data.name,this.matricule=t.data.matricule,this.isInscrire=t.data.inscription,this.total_payement=t.data.totalscolarite,this.regime=t.data.regime,this.classe=t.data.classe,this.classeid=t.data.classeid,this.restant=t.data.totalrestant,this.paiements=t.data.tranches,this.bourses=t.data.bourses,this.isInscrire&&this.scolariteService.getAccessoirebystudent(this.classeid,n).subscribe(i=>{this.rows=i.data,this.cdr.markForCheck()}),this.cdr.markForCheck()},t=>{})}initValues(){this.serClasse.getClasses().subscribe(n=>{this.classes=n.data},n=>{console.log(n)}),this.store.dispatch(new pe.RR),this.studentInfo$.subscribe(n=>{this.students=n.data,this.temp=n.data})}openCash(){this.journeecomptableService.open(this.personnel.caisse.id,this.datecomptable).subscribe(n=>{this.soldeouverture=n.soldeouverture,this.retrait=n.retrait,this.versement=n.versement,this.caissestatus=n.status,this.opencaisseModal.hide(),this.cdr.detectChanges()},n=>{console.log(n)})}printrecu(){this.scolariteService.getFactureAccessoireId(this.paiementid).subscribe(n=>{console.log(n.data),window.open(n.data.link,"_blank")},n=>{})}onChangeclasse(n){this.selected=[],this.isInscrire=!1,this.scolariteService.getAccessoirebystudent(n,this.studentid).subscribe(t=>{this.rows=t.data,this.cdr.markForCheck()})}saveaccessoire(){const n=[];for(let i=0;i<this.selected.length;i++)n.push({accessoire:this.selected[i].id});const t={data:{accessoires:n,student:this.studentid,caisse:this.personnel.caisse.id,user:this.personnel.compte.id}};console.log(t),this.scolariteService.saveAccessoirebystudent(t).subscribe(i=>{this.paiementid=i.data.facture,this.toastr.success("Paiement effectu\xe9 avec success","Success paiement",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"}),this.cdr.markForCheck(),this.selected=[],this.printfacture=!0,this.journeecomptableService.getBydateAndCaisse(this.personnel.caisse.id,this.datePipe.transform(new Date,"yyyy-MM-dd")).subscribe(s=>{this.soldeouverture=s.soldeouverture,this.retrait=s.retrait,this.versement=s.versement,this.solde=s.caisse.solde,this.caissestatus=s.status,this.cdr.detectChanges()})},i=>{this.toastr.error(i.error.details,"Echec paiement",{easeTime:100,toastClass:"ngx-toastr mt-3",positionClass:"toast-top-right"}),console.log(i)})}onSelect({selected:n}){n.status||(this.selected.splice(0,this.selected.length),this.selected.push(...n))}checkSelectable(n){return!n.status}}function io(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student," ")}function so(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function ao(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function lo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.datecreation," ")}E.\u0275fac=function(n){return new(n||E)(e.Y36(d.uU),e.Y36(Q),e.Y36(U.F0),e.Y36(f._W),e.Y36(S.tT),e.Y36(a.qu),e.Y36(J.yh),e.Y36(j.V),e.Y36(he.J),e.Y36(be.h),e.Y36(I.N),e.Y36(j.V),e.Y36(k.$),e.Y36(ge.U),e.Y36(e.sBO),e.Y36(R.G))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-accessoire"]],viewQuery:function(n,t){if(1&n&&(e.Gf(r.nE,5),e.Gf(jn,5),e.Gf(Fn,5)),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first),e.iGM(i=e.CRH())&&(t.childModal=i.first),e.iGM(i=e.CRH())&&(t.opencaisseModal=i.first)}},inputs:{studentname:"studentname"},outputs:{isInscrire:"isInscrire",matricule:"matricule",classe:"classe",paiements:"paiements",bourses:"bourses",total_payement:"total_payement",regime:"regime",restant:"restant",caisse:"caisse",solde:"solde",soldeouverture:"soldeouverture",datecomptable:"datecomptable",caissier:"caissier"},features:[e._Bn([f._W,d.uU])],decls:137,vars:89,consts:[[1,"row"],[1,"col-md-8","col-md-offset-1"],[1,"card"],[1,"card-header"],[1,"card-title","mb-2","fw-bolder"],[1,"h5"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"form-group","mb-3"],[1,"form-label"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-group mb-3",4,"ngIf"],["rowHeight","auto","columnMode","force",3,"rows","footerHeight","selected","selectCheck","selectionType","select"],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-cell-template",""],[3,"name","width"],[1,"card-footer"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"la","la-save"],[1,"col-md-4"],[1,"h6"],["class","h5 btn-sm btn-success",4,"ngIf"],["class","h5 btn-sm btn-danger",4,"ngIf"],[1,"col-md-6"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["opencaisseModal","bs-modal"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header"],["id","dialog-open-caisse",1,"modal-title","pull-left"],[1,"modal-body"],[1,"h4"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","routerLink","/",1,"btn","btn-default"],[3,"value"],[3,"change"],["class","form-check mb-0",4,"ngIf"],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"disabled","checked","change"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-danger"],[1,"h5","btn-sm","btn-success"],[1,"h5","btn-sm","btn-danger"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h4",4),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"span",5),e._uU(8),e.ALo(9,"date"),e.qZA(),e.qZA(),e._UZ(10,"div",6),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"label",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"ng-select",10),e.NdJ("ngModelChange",function(s){return t.studentid=s})("change",function(s){return t.onChange(s)}),e.YNc(17,En,2,2,"ng-option",11),e.qZA(),e.qZA(),e.YNc(18,Vn,6,4,"div",12),e._UZ(19,"hr"),e.TgZ(20,"ngx-datatable",13),e.NdJ("select",function(s){return t.onSelect(s)}),e.TgZ(21,"ngx-datatable-column",14),e.YNc(22,zn,1,1,"ng-template",15),e.qZA(),e.TgZ(23,"ngx-datatable-column",16),e.ALo(24,"translate"),e.YNc(25,Bn,1,1,"ng-template",15),e.qZA(),e.TgZ(26,"ngx-datatable-column",16),e.ALo(27,"translate"),e.YNc(28,Dn,1,1,"ng-template",15),e.qZA(),e.TgZ(29,"ngx-datatable-column",16),e.ALo(30,"translate"),e.YNc(31,Wn,1,1,"ng-template",15),e.qZA(),e.TgZ(32,"ngx-datatable-column",16),e.ALo(33,"translate"),e.YNc(34,Kn,2,2,"ng-template",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",17),e.TgZ(36,"button",18),e.NdJ("click",function(){return t.saveaccessoire()}),e._UZ(37,"i",19),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",20),e.TgZ(41,"div",2),e.TgZ(42,"div",3),e.TgZ(43,"h5"),e._uU(44),e.qZA(),e.qZA(),e.TgZ(45,"div",7),e.TgZ(46,"p"),e.TgZ(47,"span",21),e._uU(48,"Date: "),e.qZA(),e.TgZ(49,"span"),e._uU(50),e.qZA(),e.qZA(),e.TgZ(51,"p"),e.TgZ(52,"span",21),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.YNc(55,eo,2,0,"span",22),e.YNc(56,to,2,0,"span",23),e.qZA(),e.TgZ(57,"div",0),e.TgZ(58,"div",24),e.TgZ(59,"p"),e.TgZ(60,"span",21),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"span"),e._uU(64),e.qZA(),e.qZA(),e.TgZ(65,"p"),e.TgZ(66,"span",21),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"span"),e._uU(70),e.qZA(),e.qZA(),e.qZA(),e.TgZ(71,"div",24),e.TgZ(72,"p"),e.TgZ(73,"span",21),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"span"),e._uU(77),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"h4"),e.TgZ(79,"span",21),e._uU(80,"Solde:"),e.qZA(),e.TgZ(81,"span"),e._uU(82),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",2),e.TgZ(84,"div",3),e.TgZ(85,"h5"),e._uU(86),e.ALo(87,"translate"),e.qZA(),e.qZA(),e.TgZ(88,"div",7),e.TgZ(89,"div"),e.TgZ(90,"p"),e._uU(91),e.ALo(92,"translate"),e.TgZ(93,"span"),e._uU(94),e.qZA(),e.qZA(),e.TgZ(95,"p"),e._uU(96),e.ALo(97,"translate"),e.TgZ(98,"span"),e._uU(99),e.qZA(),e.qZA(),e.TgZ(100,"p"),e._uU(101),e.ALo(102,"translate"),e.TgZ(103,"span"),e._uU(104),e.qZA(),e.qZA(),e.TgZ(105,"p"),e._uU(106),e.ALo(107,"translate"),e.TgZ(108,"span"),e._uU(109),e.qZA(),e.qZA(),e._UZ(110,"hr"),e.YNc(111,no,2,0,"button",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(112,"div",26,27),e.TgZ(114,"div",28),e.TgZ(115,"div",29),e.TgZ(116,"div",30),e.TgZ(117,"h4",31),e._uU(118),e.qZA(),e.qZA(),e.TgZ(119,"div",32),e.TgZ(120,"p"),e.TgZ(121,"span",33),e._uU(122,"Caisse:"),e.qZA(),e._uU(123),e.qZA(),e.TgZ(124,"p"),e.TgZ(125,"span",33),e._uU(126,"Agent caisse:"),e.qZA(),e._uU(127),e.qZA(),e.TgZ(128,"p"),e.TgZ(129,"span",33),e._uU(130,"Montant en caisse:"),e.qZA(),e._uU(131),e.qZA(),e.qZA(),e.TgZ(132,"div",34),e.TgZ(133,"button",35),e.NdJ("click",function(){return t.openCash()}),e._uU(134,"Ouvrir"),e.qZA(),e.TgZ(135,"button",36),e._uU(136,"Annuler"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.hij("",e.lcZ(6,53,"title.caisseaccessoire")," "),e.xp6(3),e.AsE(" ",t.titlesession," ",e.xi3(9,55,t.datesession,"Y-M-dd"),""),e.xp6(6),e.Oqu(e.lcZ(15,58,"fields.student")),e.xp6(2),e.Q6J("ngModel",t.studentid),e.xp6(1),e.Q6J("ngForOf",t.students),e.xp6(1),e.Q6J("ngIf",!t.isInscrire),e.xp6(2),e.Q6J("rows",t.rows)("footerHeight",100)("selected",t.selected)("selectCheck",t.checkSelectable)("selectionType",t.SelectionType.multiClick),e.xp6(1),e.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),e.xp6(2),e.s9C("name",e.lcZ(24,60,"fields.code")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(27,62,"fields.libelle")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(30,64,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(33,66,"fields.status")),e.Q6J("width",70),e.xp6(6),e.hij("",e.lcZ(39,68,"action.save"),'"'),e.xp6(6),e.Oqu(t.caisse),e.xp6(6),e.Oqu(t.datecomptable),e.xp6(3),e.hij(" ",e.lcZ(54,70,"fields.journeecomptable"),":"),e.xp6(2),e.Q6J("ngIf",t.caissestatus),e.xp6(1),e.Q6J("ngIf",!t.caissestatus),e.xp6(5),e.hij("",e.lcZ(62,72,"fields.soldeouverture"),":"),e.xp6(3),e.Oqu(t.soldeouverture),e.xp6(3),e.hij("",e.lcZ(68,74,"fields.versement"),":"),e.xp6(3),e.Oqu(t.versement),e.xp6(4),e.hij("",e.lcZ(75,76,"fields.retrait"),":"),e.xp6(3),e.Oqu(t.retrait),e.xp6(5),e.Oqu(t.solde),e.xp6(4),e.Oqu(e.lcZ(87,78,"title.informationstudent")),e.xp6(5),e.hij("",e.lcZ(92,80,"fields.name"),": "),e.xp6(3),e.Oqu(t.studentname),e.xp6(2),e.hij("",e.lcZ(97,82,"fields.matricule"),": "),e.xp6(3),e.Oqu(t.matricule),e.xp6(2),e.hij("",e.lcZ(102,84,"fields.classe"),": "),e.xp6(3),e.Oqu(t.classe),e.xp6(2),e.hij("",e.lcZ(107,86,"fields.regime"),": "),e.xp6(3),e.Oqu(t.regime),e.xp6(2),e.Q6J("ngIf",t.printfacture),e.xp6(1),e.Q6J("config",e.DdM(88,oo)),e.xp6(6),e.hij("Ouvrir Journ\xe9e comptable ",t.datecomptable,""),e.xp6(5),e.hij(" ",t.caisse,""),e.xp6(4),e.hij(" ",t.caissier,""),e.xp6(4),e.hij(" ",t.soldeouverture,""))},directives:[m.HK,Z.w9,a.JJ,a.On,d.sg,d.O5,r.nE,r.UC,r.vq,S.oB,U.rH,Z.xv,m.oH],pipes:[q.X$,d.uU],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],E.prototype,"user1$",void 0),(0,N.gn)([(0,J.Ph)(me.N.selectStateData)],E.prototype,"studentInfo$",void 0);let ro=(()=>{class o{constructor(t,i,s,l,u){this.formBuilder=t,this.scolariteService=i,this.auth=s,this.cdr=l,this.screenSizeSvc=u,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(g=>{g.includes(h.y.XXL)||g.includes(h.y.XL)||g.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch()}onPage(t){}pageLimit(t){console.log(this.ipp),this.rows&&(this.table.pageSize=50)}fetch(){localStorage.getItem("currentUser"),this.scolariteService.getPaiementaccessoire().subscribe(i=>{this.temp=[...i.data],this.rows=i.data,this.cdr.markForCheck(),console.log(this.temp)},i=>{console.log(i)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.student.toLowerCase().indexOf(i)||-1!==l.accessoire.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}getScreenWidth(t){this.screenSizeSvc.onResize(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(be.h),e.Y36(k.$),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-paiementaccessoire"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},decls:26,vars:29,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],["prop","student",3,"sortable","name","width"],["ngx-datatable-cell-template",""],[3,"name","width"],["prop","datecreation",3,"name","width"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",6),e.TgZ(9,"div",6),e.TgZ(10,"input",7),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"ngx-datatable",9,10),e.NdJ("activate",function(l){return i.onActivate(l)})("select",function(l){return i.onSelect(l)}),e.TgZ(14,"ngx-datatable-column",11),e.ALo(15,"translate"),e.YNc(16,io,1,1,"ng-template",12),e.qZA(),e.TgZ(17,"ngx-datatable-column",13),e.ALo(18,"translate"),e.YNc(19,so,1,1,"ng-template",12),e.qZA(),e.TgZ(20,"ngx-datatable-column",13),e.ALo(21,"translate"),e.YNc(22,ao,1,1,"ng-template",12),e.qZA(),e.TgZ(23,"ngx-datatable-column",14),e.ALo(24,"translate"),e.YNc(25,lo,1,1,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,19,"title.paiementaccessoire")),e.xp6(6),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.s9C("name",e.lcZ(15,21,"fields.student")),e.Q6J("sortable",!0)("width",250),e.xp6(3),e.s9C("name",e.lcZ(18,23,"fields.libelle")),e.Q6J("width",170),e.xp6(3),e.s9C("name",e.lcZ(21,25,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(24,27,"fields.datecreation")),e.Q6J("width",70))},directives:[m.oH,r.nE,r.UC,r.vq],pipes:[q.X$],styles:[""]}),o})();function co(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.numero," ")}function uo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.libelle," ")}function po(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.solde," ")}function mo(o,n){1&o&&(e.TgZ(0,"span",14),e._uU(1,"oui"),e.qZA())}function ho(o,n){1&o&&(e.TgZ(0,"span",15),e._uU(1,"non"),e.qZA())}function go(o,n){if(1&o&&(e.YNc(0,mo,2,0,"span",12),e.YNc(1,ho,2,0,"span",13)),2&o){const t=n.row;e.Q6J("ngIf",t.isbank),e.xp6(1),e.Q6J("ngIf",!t.isbank)}}let _o=(()=>{class o{constructor(t,i,s,l,u,g,_,b,x,M){this.caisseService=t,this.screenSizeSvc=i,this.configurationService=s,this.datePipe=l,this.formBuilder=u,this.authService=g,this.cdr=_,this.personnelService=b,this.journeecomptableService=x,this.toastr=M,this.caisses=[],this.temp=[],this.totalgroup=0,this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1,this.mouvements=[],this.isLoading=1,this.screenSizeSvc.onResize$.pipe((0,y.g)(0)).subscribe(T=>{T.includes(h.y.XXL)||T.includes(h.y.XL)||T.includes(h.y.LG)?(this.rowHeight="auto",this.scrollbarH=!1,this.columnMode=r.hq.force):(this.rowHeight=68,this.scrollbarH=!0,this.columnMode=r.hq.force),this.cdr.markForCheck()})}toggleExpandGroup(t){console.log("Toggled Expand Group!",t.value),this.table.groupHeader.toggleExpandGroup(t)}onDetailToggle(t){console.log("Detail Toggled",t)}ngOnInit(){this.caisseService.getComptes().subscribe(t=>{this.mouvements=t.data,this.temp=[...t.data],this.cdr.detectChanges()},t=>{console.log(t)})}onChange(t){this.caisseService.consultercaisse(t).subscribe(i=>{this.mouvements=i.data,this.temp=[...i.data],this.cdr.detectChanges()},i=>{console.log(i)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.libelle.toLowerCase().indexOf(i)||-1!==l.isbank.toLowerCase().indexOf(i)||!i});this.mouvements=s,this.table.offset=0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I.N),e.Y36(A.O),e.Y36(ce.e),e.Y36(d.uU),e.Y36(a.qu),e.Y36(k.$),e.Y36(e.sBO),e.Y36(R.G),e.Y36(Q),e.Y36(f._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-consultercompte"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},features:[e._Bn([f._W,d.uU])],decls:18,vars:15,consts:[[1,"row"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-md-4","mb-2","text-center"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"material","expandable",3,"rows","columnMode","headerHeight","footerHeight","limit","summaryRow","summaryPosition","loadingIndicator","selectionType","rowHeight","scrollbarH"],["table",""],["name","Libelle",3,"width"],["ngx-datatable-cell-template",""],["name","solde",3,"width"],["name","Est banque?",3,"width"],["class","badge bg-success",4,"ngIf"],["class","badge bg-warning",4,"ngIf"],[1,"badge","bg-success"],[1,"badge","bg-warning"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h4"),e._uU(4,"Consulter les comptes"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"input",5),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.TgZ(8,"ngx-datatable",6,7),e.TgZ(10,"ngx-datatable-column",8),e.YNc(11,co,1,1,"ng-template",9),e.qZA(),e.TgZ(12,"ngx-datatable-column",8),e.YNc(13,uo,1,1,"ng-template",9),e.qZA(),e.TgZ(14,"ngx-datatable-column",10),e.YNc(15,po,1,1,"ng-template",9),e.qZA(),e.TgZ(16,"ngx-datatable-column",11),e.YNc(17,go,2,2,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("rows",i.mouvements)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",150)("limit",5)("summaryRow",!0)("summaryPosition","bottom")("loadingIndicator",!0)("selectionType",i.SelectionType.cell)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70),e.xp6(2),e.Q6J("width",70))},directives:[m.oH,r.nE,r.UC,r.vq,d.O5],styles:[""]}),o})(),Te=(()=>{class o{constructor(t){this.http=t,this.apiUrl=V.N.API_URL+"facturepayements"}getFactures(){return this.http.get(this.apiUrl)}getFacturecaisse(t){return this.http.get(this.apiUrl+"/"+t+"/usercaisse")}getFactureduplicata(t){return this.http.get(this.apiUrl+"/"+t+"/duplicata")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(P.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Zo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.numero," ")}function fo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student," ")}function bo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function To(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.caisse," ")}function vo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.datecreation," ")}function Ao(o,n){if(1&o&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function qo(o,n){if(1&o&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function Co(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",18),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",19),e._UZ(2,"i",20),e.qZA(),e.TgZ(3,"dropdown-menu",21,22),e.TgZ(5,"a",23),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().print(l.id)}),e.TgZ(6,"div",24),e._UZ(7,"i",25),e.TgZ(8,"span",26),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Ao,2,1,"span",27),e.qZA(),e.qZA(),e.TgZ(12,"a",23),e.NdJ("click",function(){const l=e.CHM(t).row,u=e.oxw(),g=e.MAs(31);return u.delete(l,g)}),e.TgZ(13,"div",24),e._UZ(14,"i",28),e.TgZ(15,"span",26),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,qo,2,1,"span",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,4,"action.print")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0),e.xp6(5),e.Oqu(e.lcZ(17,6,"action.delete")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0)}}function wo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(4,"Yes"),e.qZA(),e.TgZ(5,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().decline()}),e._uU(6,"No"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Voulez-vous vraiment supprimer cettte facture:",t.deleteRow.student,"?")}}class ne{constructor(n,t,i,s,l){this.store=n,this.formBuilder=t,this.factureService=i,this.cdr=s,this.screenSizeSvc=l,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1}windowResize(n){this.getScreenWidth(n.target.innerWidth)}ngOnInit(){this.user1$.subscribe(n=>{this.currentuser=n}),this.fetch()}onPage(n){}pageLimit(n){console.log(this.ipp),this.rows&&(this.table.pageSize=50)}fetch(){this.factureService.getFacturecaisse(this.currentuser.id).subscribe(n=>{this.temp=[...n.data],this.rows=n.data,this.cdr.markForCheck(),console.log(this.temp)},n=>{console.log(n)})}updateFilter(n){const t=n.target.value.toLowerCase(),i=this.temp.filter(function(s){return-1!==s.student.toLowerCase().indexOf(t)||-1!==s.datecreation.toLowerCase().indexOf(t)||!t});this.rows=i,this.table.offset=0}onSelect({selected:n}){this.selected.splice(0,this.selected.length),this.selected.push(...n),console.log("Select Event",this.selected)}onActivate(n){}getScreenWidth(n){this.screenSizeSvc.onResize(n)}confirm(){}decline(){}delete(n,t){}print(n){this.factureService.getFactureduplicata(n).subscribe(t=>{console.log(t.data),window.open(t.data.link,"_blank")},t=>{})}}function Uo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.numero," ")}function yo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.student," ")}function So(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.montant," ")}function xo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.caisse," ")}function Mo(o,n){1&o&&e._uU(0),2&o&&e.hij(" ",n.row.datecreation," ")}function Jo(o,n){if(1&o&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function ko(o,n){if(1&o&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij("(",t.selected.length,")")}}function Ho(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"dropdown",18),e.NdJ("click",function(s){return e.CHM(t),e.MAs(4).toggle(s)}),e.TgZ(1,"a",19),e._UZ(2,"i",20),e.qZA(),e.TgZ(3,"dropdown-menu",21,22),e.TgZ(5,"a",23),e.NdJ("click",function(){const l=e.CHM(t).row;return e.oxw().print(l.id)}),e.TgZ(6,"div",24),e._UZ(7,"i",25),e.TgZ(8,"span",26),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,Jo,2,1,"span",27),e.qZA(),e.qZA(),e.TgZ(12,"a",23),e.NdJ("click",function(){const l=e.CHM(t).row,u=e.oxw(),g=e.MAs(31);return u.delete(l,g)}),e.TgZ(13,"div",24),e._UZ(14,"i",28),e.TgZ(15,"span",26),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,ko,2,1,"span",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(9),e.Oqu(e.lcZ(10,4,"action.print")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0),e.xp6(5),e.Oqu(e.lcZ(17,6,"action.delete")),e.xp6(2),e.Q6J("ngIf",t.selected.length>0)}}function No(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(4,"Yes"),e.qZA(),e.TgZ(5,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().decline()}),e._uU(6,"No"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij("Voulez-vous vraiment supprimer cettte facture:",t.deleteRow.student.name,"?")}}ne.\u0275fac=function(n){return new(n||ne)(e.Y36(J.yh),e.Y36(a.qu),e.Y36(Te),e.Y36(e.sBO),e.Y36(A.O))},ne.\u0275cmp=e.Xpm({type:ne,selectors:[["app-facturecaisse"]],viewQuery:function(n,t){if(1&n&&e.Gf(r.nE,5),2&n){let i;e.iGM(i=e.CRH())&&(t.table=i.first)}},hostBindings:function(n,t){1&n&&e.NdJ("resize",function(s){return t.windowResize(s)},!1,e.Jf7)},decls:32,vars:31,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],["name","Numero","prop","numero",3,"width"],["ngx-datatable-cell-template",""],["prop","student",3,"name","width"],[3,"name","width"],["prop","datecreation",3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],["template",""],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-printer"],[1,"ms-2"],["class","ms-1",4,"ngIf"],[1,"feather","icon-trash-2"],[1,"ms-1"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",6),e.TgZ(9,"div",6),e.TgZ(10,"input",7),e.NdJ("keyup",function(s){return t.updateFilter(s)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"ngx-datatable",9,10),e.NdJ("activate",function(s){return t.onActivate(s)})("select",function(s){return t.onSelect(s)}),e.TgZ(14,"ngx-datatable-column",11),e.YNc(15,Zo,1,1,"ng-template",12),e.qZA(),e.TgZ(16,"ngx-datatable-column",13),e.ALo(17,"translate"),e.YNc(18,fo,1,1,"ng-template",12),e.qZA(),e.TgZ(19,"ngx-datatable-column",14),e.ALo(20,"translate"),e.YNc(21,bo,1,1,"ng-template",12),e.qZA(),e.TgZ(22,"ngx-datatable-column",14),e.ALo(23,"translate"),e.YNc(24,To,1,1,"ng-template",12),e.qZA(),e.TgZ(25,"ngx-datatable-column",15),e.ALo(26,"translate"),e.YNc(27,vo,1,1,"ng-template",12),e.qZA(),e.TgZ(28,"ngx-datatable-column",16),e.YNc(29,Co,19,8,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,wo,7,1,"ng-template",null,17,e.W1O)),2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,21,"title.factures")),e.xp6(6),e.Q6J("rows",t.rows)("columnMode",t.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",t.selected)("selectionType",t.SelectionType.checkbox)("rowHeight",t.rowHeight)("scrollbarH",t.scrollbarH),e.xp6(2),e.Q6J("width",20),e.xp6(2),e.s9C("name",e.lcZ(17,23,"fields.student")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(20,25,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(23,27,"fields.caisse")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(26,29,"fields.datecreation")),e.Q6J("width",70),e.xp6(3),e.Q6J("sortable",!1)("width",40))},directives:[m.oH,r.nE,r.UC,r.vq,D.L,W.h,$.h,d.O5],pipes:[q.X$],styles:[""]}),(0,N.gn)([(0,J.Ph)(L.j)],ne.prototype,"user1$",void 0);const Yo=[{path:"caisse",data:{title:"Caisse",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:F},{path:"accessoire",data:{title:"Caisse-Accessoire",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:E},{path:"paiement-accessoire",data:{title:"Paiement-Accessoire",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:ro},{path:"consultercaisse",data:{title:"consultercaisse",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:hn},{path:"facture-caisse",data:{title:"facturecaisse",hidePageHeader:!0,authorities:[c.W.ECONOME,c.W.COMPTA]},component:ne},{path:"facture",data:{title:"facture",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:(()=>{class o{constructor(t,i,s,l){this.formBuilder=t,this.factureService=i,this.cdr=s,this.screenSizeSvc=l,this.temp=[],this.rows=[],this.selected=[],this.columnMode=r.hq.force,this.SelectionType=r.RT,this.rowHeight="auto",this.scrollbarH=!1}windowResize(t){this.getScreenWidth(t.target.innerWidth)}ngOnInit(){this.fetch()}onPage(t){}pageLimit(t){console.log(this.ipp),this.rows&&(this.table.pageSize=50)}fetch(){localStorage.getItem("currentUser"),this.factureService.getFactures().subscribe(i=>{this.temp=[...i.data],this.rows=i.data,this.cdr.markForCheck(),console.log(this.temp)},i=>{console.log(i)})}updateFilter(t){const i=t.target.value.toLowerCase(),s=this.temp.filter(function(l){return-1!==l.student.toLowerCase().indexOf(i)||-1!==l.datecreation.toLowerCase().indexOf(i)||!i});this.rows=s,this.table.offset=0}onSelect({selected:t}){this.selected.splice(0,this.selected.length),this.selected.push(...t),console.log("Select Event",this.selected)}onActivate(t){}getScreenWidth(t){this.screenSizeSvc.onResize(t)}confirm(){}decline(){}delete(t,i){}print(t){this.factureService.getFactureduplicata(t).subscribe(i=>{console.log(i.data),window.open(i.data.link,"_blank")},i=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(Te),e.Y36(e.sBO),e.Y36(A.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-facture"]],viewQuery:function(t,i){if(1&t&&e.Gf(r.nE,5),2&t){let s;e.iGM(s=e.CRH())&&(i.table=s.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(l){return i.windowResize(l)},!1,e.Jf7)},decls:32,vars:31,consts:[[1,"card"],[1,"card-header"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"card-body"],[1,"mb-3","d-flex","align-items-center","justify-content-between"],[1,"mb-2","fw-bolder"],[1,"mb-2"],["type","text","placeholder","Search ",1,"form-control","mb-3",3,"keyup"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","selected","selectionType","rowHeight","scrollbarH","activate","select"],["table",""],["name","Numero",3,"width"],["ngx-datatable-cell-template",""],["prop","student",3,"name","width"],[3,"name","width"],["prop","datecreation",3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],["template",""],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"d-flex","align-items-center"],[1,"feather","icon-printer"],[1,"ms-2"],["class","ms-1",4,"ngIf"],[1,"feather","icon-trash-2"],[1,"ms-1"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",6),e.TgZ(9,"div",6),e.TgZ(10,"input",7),e.NdJ("keyup",function(l){return i.updateFilter(l)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"ngx-datatable",9,10),e.NdJ("activate",function(l){return i.onActivate(l)})("select",function(l){return i.onSelect(l)}),e.TgZ(14,"ngx-datatable-column",11),e.YNc(15,Uo,1,1,"ng-template",12),e.qZA(),e.TgZ(16,"ngx-datatable-column",13),e.ALo(17,"translate"),e.YNc(18,yo,1,1,"ng-template",12),e.qZA(),e.TgZ(19,"ngx-datatable-column",14),e.ALo(20,"translate"),e.YNc(21,So,1,1,"ng-template",12),e.qZA(),e.TgZ(22,"ngx-datatable-column",14),e.ALo(23,"translate"),e.YNc(24,xo,1,1,"ng-template",12),e.qZA(),e.TgZ(25,"ngx-datatable-column",15),e.ALo(26,"translate"),e.YNc(27,Mo,1,1,"ng-template",12),e.qZA(),e.TgZ(28,"ngx-datatable-column",16),e.YNc(29,Ho,19,8,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,No,7,1,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,21,"title.factures")),e.xp6(6),e.Q6J("rows",i.rows)("columnMode",i.columnMode)("headerHeight",50)("footerHeight",50)("limit",10)("selected",i.selected)("selectionType",i.SelectionType.checkbox)("rowHeight",i.rowHeight)("scrollbarH",i.scrollbarH),e.xp6(2),e.Q6J("width",20),e.xp6(2),e.s9C("name",e.lcZ(17,23,"fields.student")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(20,25,"fields.montant")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(23,27,"fields.caisse")),e.Q6J("width",70),e.xp6(3),e.s9C("name",e.lcZ(26,29,"fields.datecreation")),e.Q6J("width",70),e.xp6(3),e.Q6J("sortable",!1)("width",40))},directives:[m.oH,r.nE,r.UC,r.vq,D.L,W.h,$.h,d.O5],pipes:[q.X$],styles:[""]}),o})()},{path:"consultercompte",data:{title:"consultercompte",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:_o},{path:"journeecomptable",data:{title:"journeecomptable",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:z},{path:"transfertintercaisse",data:{title:"Transfert intercaisse",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:B},{path:"retraitespece",data:{title:"Retrait espece",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:X},{path:"versementespece",data:{title:"Versement espece",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:K},{path:"retraitbanque",data:{title:"Retrait banque",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:ee},{path:"versementbanque",data:{title:"Versement banque",hidePageHeader:!0,authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME,c.W.COMPTA]},component:te},{path:"scolarite",data:{title:"Scolarite",authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.ECONOME],hidePageHeader:!0},component:Le},{path:"mouvement",data:{title:"Mouvement scolarite",hidePageHeader:!0},component:Ot},{path:"insolvable",data:{title:"Insolvable",hidePageHeader:!0},component:Pe},{path:"bilan",data:{title:"Bilan",hidePageHeader:!0},component:Be},{path:"depense",data:{title:"Depense",authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.COMPTA],hidePageHeader:!0},component:ot},{path:"recette",data:{title:"Recette",authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.COMPTA],hidePageHeader:!1},component:pt},{path:"typerecette",data:{title:"Type Recette",authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.COMPTA],hidePageHeader:!0},component:vt},{path:"typedepense",data:{title:"Type depense",authorities:[c.W.ADMIN,c.W.SUPER_ADMIN,c.W.COMPTA],hidePageHeader:!0},component:Mt}];let Qo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[U.Bz.forChild(Yo)],U.Bz]}),o})();var Io=p(902),Ro=p(8090),Lo=p(4466),jo=p(4079),Fo=p(8900),Eo=p(2563);let Go=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[d.ez,Lo.m,jo.h,Qo,Io.n,Ro.d,Z.A0,S.zk,r.xD,Fo.F,Eo.k,m.VN,m.VN.forRoot(),f.Rh.forRoot()]]}),o})()}}]);